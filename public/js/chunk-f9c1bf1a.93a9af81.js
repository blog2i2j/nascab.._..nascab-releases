(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-f9c1bf1a"],{1182:function(t,e,o){"use strict";o("973f")},"1e36":function(t,e,o){},"4e2f":function(t,e,o){"use strict";o("dd93")},"59fb":function(t,e,o){"use strict";o("14d9");var i={props:{restoreFilter:{default:!1,type:Boolean},showSourceFilter:{default:!1,type:Boolean},datePrefix:{default:"",type:String},albumId:{default:"",type:String},nearMode:{default:!1,type:Boolean},editMode:{default:!1,type:Boolean},showSearchBtn:{default:!0,type:Boolean},usePadding:{default:!1,type:Boolean}},computed:{filterConditionCount:function(){return this.selectedSourceFolder.length}},data(){return{timeOrder:"desc",showFilterDialog:!1,sourceFolderList:[],selectedSourceFolder:[],showAndroidPlayerSetting:!1,typeMenuOptionList:[{title:this.$t("photo.all"),id:"0"},{title:this.$t("photo.photo"),id:"1"},{title:this.$t("photo.video"),id:"2"},{title:"LIVE",id:"3"}],rangeMenuOptionList:[{title:this.$t("photo.5km"),id:"0"},{title:this.$t("photo.10km"),id:"1"},{title:this.$t("photo.80km"),id:"2"}],sliderMin:130,sliderMax:350,sliderValue:200,lastSliderValue:200,itemBaseWidth:200,itemWidth:200,itemMargin:5,searchStr:"",firstPhoto:null,loadingPositionStr:!1,positionStr:"",firstPhotoGeohash:"",showRangeType:"0",showMode:"cover",showDateInfo:!1,showFileType:"0",topPhotoDate:""}},mounted(){var t=localStorage.getItem("photo-settging-img-size"),t=(t&&(this.sliderValue=parseInt(t),this.$emit("onSizeChange",parseInt(t))),localStorage.getItem("photo-settging-show-mode")),t=(t&&this.showMode!=t&&(this.showMode=t,this.$emit("onChangeShowMode",this.showMode)),localStorage.getItem("photo-settging-time-order")),t=(t&&this.timeOrder!=t&&(this.timeOrder=t,this.$emit("onTimeOrderChange",this.timeOrder,!1)),localStorage.getItem("photo-settging-show-range"));t&&this.showRangeType!=t&&(this.showRangeType=t,this.$nextTick(()=>{this.$refs.rangeSelector&&0<this.showRangeType&&this.showRangeType<=2&&this.$refs.rangeSelector.setSelectedIndex(this.showRangeType)})),this.getSourceFolder(),window.addEventListener("keydown",this.onKeyDown)},beforeDestroy(){window.removeEventListener("keydown",this.onKeyDown)},methods:{onKeyDown(t){let e,o=t.key;"="==o?this.sliderValue<this.sliderMax&&(e=this.sliderValue+50):"-"==o?this.sliderValue>this.sliderMin&&(e=this.sliderValue-50):o&&"c"==o.toLowerCase()&&("contain"==this.showMode?this.onChangeShowMode("cover"):this.onChangeShowMode("contain")),e&&(this.sliderValue=e,this.onSizeChange(e))},getSourceFolder(){this.api.post("/api/sourceFolderApi/getPathByType",{type:"photo"}).then(t=>{if(!t.code){if(1==this.$store.state.currentUser.is_admin)if(t.data.length<1)this.showVsConfirmDialog(this.$t("common.confirm"),this.$t("photo.noSourceSetAlert"),()=>{this.$emit("setViewType","photoSourceSet")},null,this.$t("photo.goToSet"));else if(!sessionStorage.PhotoSourcePathUnusableAlert)for(var e in t.data)if(0==t.data[e].exist){sessionStorage.PhotoSourcePathUnusableAlert=1,this.showVsConfirmDialog(this.$t("common.confirm"),this.$t("photo.sourcePathUnusable",{path:t.data[e].path}),()=>{this.$emit("setViewType","photoSourceSet")},null,this.$t("photo.goToSet"));break}for(var o in t.data)this.sourceFolderList.push(t.data[o].path);if(this.restoreFilter)if(localStorage.cacheSelectedSourceFolderJSON)try{var i,s=JSON.parse(localStorage.cacheSelectedSourceFolderJSON);for(i in s)for(var h in this.sourceFolderList)s[i]==this.sourceFolderList[h]&&this.selectedSourceFolder.push(s[i]);0<this.selectedSourceFolder.length?this.onFilterFinish():this.loadFirstPage()}catch(t){this.loadFirstPage()}else this.loadFirstPage();else this.loadFirstPage()}}).catch(t=>{})},loadFirstPage(){this.$emit("onChooseRange",this.showRangeType)},onFilterFinish(){var t=0<this.selectedSourceFolder.length?JSON.stringify(this.selectedSourceFolder):"";this.$emit("onChooseSource",t),this.restoreFilter&&(t?localStorage.cacheSelectedSourceFolderJSON=t:window.localStorage.removeItem("cacheSelectedSourceFolderJSON"))},onSwitchTimeOrder(){this.timeOrder="desc"==this.timeOrder?"asc":"desc",localStorage.setItem("photo-settging-time-order",this.timeOrder),this.$emit("onTimeOrderChange",this.timeOrder,!0)},onSearch(t){this.searchStr=t,this.$emit("onSearch",this.searchStr)},onSearchClear(){this.$emit("onSearch","")},onChooseDataType(t){this.showFileType=t,this.$emit("onChooseDataType",t)},onChooseRange(t){this.showRangeType=t,localStorage.setItem("photo-settging-show-range",this.showRangeType),this.$emit("onChooseRange",t)},onSizeChange(t){this.lastSliderValue!=t&&(this.lastSliderValue=t,localStorage.setItem("photo-settging-img-size",t),this.$emit("onSizeChange",t))},onChangeShowMode(t){this.showMode=t,localStorage.setItem("photo-settging-show-mode",this.showMode),this.$emit("onChangeShowMode",this.showMode)},getPositionStr(e){var t=this.$store.state.geoCache.get(e.geohash.substr(0,5));t?this.positionStr=t:(this.loadingPositionStr=!0,this.api.post("/api/mapApi/getLocationStr",{indexId:e.id,hideLoading:!0}).then(t=>{t.code||(this.positionStr=t.geo.name+" "+t.geo.cn_name,this.$store.state.geoCache.set(e.geohash.substr(0,5),this.positionStr)),this.loadingPositionStr=!1}).catch(t=>{this.loadingPositionStr=!1}))},calPhotoDate(t,e,o,i){this.showDateInfo=0<e.length;t=parseInt(t/i)*o;if(e.length-1>t)return i=e[t],(this.firstPhoto=i)&&i.geohash?this.loadingPositionStr||this.firstPhotoGeohash.substr(0,5)==i.geohash.substr(0,5)||(this.firstPhotoGeohash=i.geohash,this.getPositionStr(i)):this.positionStr="",this.topPhotoDate=i.original_date,this.$store.state.firstIndex=i}}},o=(o("4e2f"),o("2877")),o=Object(o.a)(i,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{height:"100%",width:"100%",position:"relative"}},[o("div",{staticClass:"layout-header-bar",class:{"nas-padding-left":e.usePadding,"nas-padding-right":e.usePadding}},[o("div",{staticClass:"header-right"},[o("div",{staticStyle:{display:"flex","align-items":"center"}},[o("Badge",{staticClass:"icon-showtype",attrs:{offset:[5,0],count:e.showSourceFilter?e.filterConditionCount:0}},[e.showSourceFilter?o("span",{staticClass:"nasIcons icon-filter icon-filt",on:{click:function(t){e.showFilterDialog=!0}}}):e._e()]),o("Tooltip",{attrs:{disabled:e.isMobile,content:"asc"==e.timeOrder?e.$t("common.asc"):e.$t("common.desc")}},[e.showSourceFilter?o("div",{on:{click:function(t){return e.onSwitchTimeOrder()}}},["asc"==e.timeOrder?o("span",{staticClass:"nasIcons icon-asc icon-showtype",staticStyle:{color:"#386DF2"}}):e._e(),"desc"==e.timeOrder?o("span",{staticClass:"nasIcons icon-desc icon-showtype",staticStyle:{color:"#386DF2"}}):e._e()]):e._e()]),o("my-menu-select",{attrs:{optionList:e.typeMenuOptionList},on:{onItemClick:e.onChooseDataType}}),e.nearMode?o("my-menu-select",{ref:"rangeSelector",staticStyle:{display:"inline-flex","margin-left":"10px"},attrs:{optionList:e.rangeMenuOptionList},on:{onItemClick:e.onChooseRange}}):e._e()],1),e.showSearchBtn?o("div",{staticClass:"search-root"},[o("my-search",{staticStyle:{"max-width":"250px"},attrs:{placeholder:e.$t("photo.searchPlaceHolder")},on:{onSearch:e.onSearch}})],1):e._e()])]),e.showDateInfo?o("div",{staticClass:"photo-info"},[o("div",{staticClass:"photo-date"},[e._v(e._s(e.datePrefix)+" "+e._s(e.topPhotoDate))]),o("div",{staticClass:"photo-date"},[e.positionStr&&" "!=e.positionStr?o("span",{staticClass:"photo-geo"},[e._v(e._s(e.positionStr))]):e._e(),e.firstPhoto&&e.firstPhoto.mode&&"undefined"!=e.firstPhoto.mode?o("span",{staticClass:"photo-mode"},[e._v(e._s(e.firstPhoto.mode))]):e._e()])]):e._e(),o("vs-dialog",{attrs:{scroll:""},scopedSlots:e._u([{key:"header",fn:function(){return[o("h4",{staticClass:"not-margin"},[e._v(" "+e._s(e.$t("movie.conditionFilter"))+" ")])]},proxy:!0}]),model:{value:e.showFilterDialog,callback:function(t){e.showFilterDialog=t},expression:"showFilterDialog"}},[o("div",[o("div",{staticClass:"nas-mobile-none slider-root"},[o("p",{staticStyle:{"text-align":"left","flex-shrink":"0","font-weight":"bold"}},[e._v(e._s(e.$t("imageSize"))+":")]),o("div",{staticStyle:{display:"flex","align-items":"center"}},[o("Slider",{staticClass:"zoom-slider",attrs:{"show-tip":"never",min:e.sliderMin,max:e.sliderMax,step:10},on:{"on-input":e.onSizeChange},model:{value:e.sliderValue,callback:function(t){e.sliderValue=t},expression:"sliderValue"}}),o("a",{on:{click:function(t){e.showVsAlertDialog(e.$t("quickKey"),e.$t("photoKeyAlert"))}}},[o("Icon",{staticStyle:{"font-weight":"bold",cursor:"pointer"},attrs:{type:"ios-help-circle-outline"}})],1)],1)]),o("Divider",{staticClass:"nas-mobile-none",staticStyle:{margin:"10px 0"}}),o("div",{staticStyle:{display:"flex","align-items":"center"}},[o("p",{staticStyle:{"text-align":"left","flex-shrink":"0","font-weight":"bold"}},[e._v(e._s(e.$t("file.showType"))+":")]),o("RadioGroup",{staticStyle:{"text-align":"left","margin-left":"10px"},on:{"on-change":e.onChangeShowMode},model:{value:e.showMode,callback:function(t){e.showMode=t},expression:"showMode"}},[o("Radio",{attrs:{label:"contain"}},[o("Icon",{attrs:{type:"md-photos"}}),o("span",[e._v(e._s(this.$t("photo.contain")))])],1),o("Radio",{attrs:{label:"cover"}},[o("Icon",{attrs:{type:"ios-apps"}}),o("span",[e._v(e._s(this.$t("photo.cover")))])],1)],1)],1),o("Divider",{staticStyle:{margin:"10px 0"}}),o("p",{staticStyle:{width:"100%","text-align":"left","margin-top":"15px"}},[e._v(e._s(e.$t("movie.selectSourceFolder")))]),o("CheckboxGroup",{on:{"on-change":e.onFilterFinish},model:{value:e.selectedSourceFolder,callback:function(t){e.selectedSourceFolder=t},expression:"selectedSourceFolder"}},e._l(e.sourceFolderList,function(t){return o("Checkbox",{staticClass:"source-item max-line-one",attrs:{label:t,border:""}},[e._v(e._s(""+t))])}),1)],1)])],1)},[],!1,null,"2cd45e8a",null);e.a=o.exports},"973f":function(t,e,o){},cd79:function(t,e,o){"use strict";o.r(e);o("14d9");var i=o("9453"),s={name:"photo-timeline",props:{geohash:{default:"",type:String}},data(){return{mouseInTimeLine:!1,showTimeLine:!1,showTimeOut:null,scrolling:!1,rootWrapper:null,cursorTop:0,cursorDateStr:"",cursorDateObj:"",dateList:[],itemHeight:1,tmHeight:0,isUsingTimeLine:!1,photoTotalCount:0,movePointerIndex:0,hadMoved:!1}},methods:{barTouchStart(t){this.cancelTimeout(),this.movePointerIndex=0,this.hadMoved=!1,this.isUsingTimeLine=!0},barTouchMove(t){this.isUsingTimeLine=!0,this.rootWrapper||(this.rootWrapper=this.$refs.timeLineRoot.getBoundingClientRect());t=t.changedTouches[0].pageY-this.rootWrapper.top;this.cursorTop=t;let e=0,o=0;for(let t=0;t<this.dateList.length;t++)if(e+=this.dateList[t].height,this.cursorTop<=e){o=0<t?t-1:0;break}this.movePointerIndex=o,this.cursorDateStr=this.dateList[o].yearMonth.replace("-","/"),this.cursorDateObj=this.dateList[o],this.hadMoved=!0},barTouchEnd(t){this.isUsingTimeLine=!1,this.hadMoved&&(this.setTimeoutInvisiable(),this.$emit("onTimeChoose",this.dateList[this.movePointerIndex].original_time))},cancelTimeout(){this.showTimeOut&&clearTimeout(this.showTimeOut)},setTimeoutInvisiable(){this.cancelTimeout(),this.showTimeOut=setTimeout(()=>{this.isUsingTimeLine||!this.isMobile&&this.mouseInTimeLine||(this.showTimeLine=!1,this.scrolling=!1)},1500)},onScroll(){this.scrolling=!0,this.showTimeLine=!0,this.isUsingTimeLine=!1,this.setTimeoutInvisiable()},mouseMove(t){this.$refs.timeLineRoot&&(this.isUsingTimeLine=!0,this.rootWrapper=this.$refs.timeLineRoot.getBoundingClientRect(),this.cursorTop=t.pageY-this.rootWrapper.top)},mouseEnter(t){this.mouseInTimeLine=!0,this.showTimeLine=!0,this.isUsingTimeLine=!0},itemMouseEnter(t){this.cursorDateStr=t.yearMonth.replace("-","/"),this.cursorDateObj=t},mouseLeave(t){this.mouseInTimeLine=!1,setTimeout(()=>{this.mouseInTimeLine||this.scrolling||(this.showTimeLine=!1)},1e3),this.isUsingTimeLine=!1},onTimeClick(t){this.hadMoved=!1,this.$emit("onTimeChoose",this.dateList[t].original_time)},onWindowResize(){this.calItemHeight()},showSelectedTime(t){let e=0,o=0;for(var i in this.dateList)if(o+=this.dateList[i].count,t>=this.dateList[i].original_time){e=i;break}this.cursorTop=o/this.photoTotalCount*this.tmHeight,this.cursorDateStr=this.dateList[e].yearMonth.replace("-","/"),this.cursorDateObj=this.dateList[e]},calItemHeight(){this.photoTotalCount<1||this.$nextTick(()=>{this.rootWrapper=this.$refs.timeLineRoot.getBoundingClientRect(),this.tmHeight=this.rootWrapper.height-60,this.itemHeight=this.tmHeight/this.photoTotalCount;for(let t=0;t<this.dateList.length;t++)this.dateList[t].height=this.dateList[t].count*this.itemHeight})},getTimeLine(t,e,o,i,s,h,a,r,n,l){t={type:parseInt(t)};e&&(t.geohash=e),o&&(t.albumId=o),i&&(t.ordinaryAlbumId=i),s&&(t.searchStr=s),h&&(t.aiClassId=parseInt(h)),a&&(t.faceId=a),r&&(t.sourceFolderList=r),n&&(t.libraryId=n),l&&(t.timeOrder=l),this.api.post("/api/photoApi/getTimeLineDateList",t).then(t=>{t.code||(this.dateList=t.data,this.$emit("onTimeLineGet",t.data),this.initDate())}).catch(t=>{})},initDate(){if(!(this.dateList.length<1)){for(let t=this.photoTotalCount=0;t<this.dateList.length;t++){var o=new Date(this.dateList[t].original_time),o=(this.dateList[t].dateObj=o,this.dateList[t].year=o.getFullYear(),o.getMonth()+1);this.dateList[t].yearMonth=this.dateList[t].year+"-"+(o<10?"0"+o:o)}let e=0;for(let t=0;t<this.dateList.length;t++)this.photoTotalCount+=this.dateList[t].count,e+=this.dateList[t].count,0<t&&this.dateList[t].year!=this.dateList[t-1].year&&(this.dateList[t-1].showYear=!0,this.dateList[t-1].yearPhotoCount=e,e=0),t==this.dateList.length-1&&(this.dateList[t].showYear=!0,this.dateList[t].yearPhotoCount=e,e=0);this.calItemHeight()}}},mounted(){}},h=(o("f8de"),o("2877")),s=Object(h.a)(s,function(){var i=this,t=i.$createElement,s=i._self._c||t;return s("div",{ref:"timeLineRoot",staticClass:"timeline-root",on:{mouseenter:i.mouseEnter,mouseleave:i.mouseLeave,mousemove:i.mouseMove,touchmove:function(t){return t.preventDefault(),i.barTouchMove(t)},touchstart:i.barTouchStart,touchend:i.barTouchEnd}},[i.showTimeLine?s("div",{ref:"dateList",staticClass:"date-list"},i._l(i.dateList,function(e,o){return s("div",{staticClass:"item",style:{height:e.height+"px"},on:{click:function(t){return i.onTimeClick(o)},mouseenter:function(t){return i.itemMouseEnter(e)}}},[e.showYear&&(30<e.yearPhotoCount*i.itemHeight||o==i.dateList.length-1)?s("div",{staticClass:"year-text"},[s("p",[i._v(i._s(e.year))])]):i._e(),10<e.height&&!e.showYear?s("div",{staticClass:"ring-wrapper"},[s("div",{staticClass:"ring"})]):i._e()])}),0):i._e(),i.showTimeLine?s("div",{staticClass:"cursor-root",style:{top:i.cursorTop+"px"}},[s("div",{staticClass:"cursor-line"}),s("p",{staticClass:"cursor-text"},[i._v(" "+i._s(i.cursorDateStr)+" ")])]):i._e(),i.isUsingTimeLine&&i.showTimeLine?s("div",{staticClass:"center-root"},[s("div",{staticClass:"center-root-content"},[i._v(i._s(i.cursorDateObj.original_date))])]):i._e()])},[],!1,null,"2611d723",null).exports,a=o("d3ac"),r=o("5d55"),n=o("59fb"),l=o("db96"),d=o("2cc5"),i={props:{hasSider:{default:!1,type:Boolean},nearMode:!1,geohash:{default:"",type:String},showSearchBtn:{default:!0,type:Boolean},showAddToAlbum:{default:!0,type:Boolean},showRemoveFromAlbum:{default:!1,type:Boolean},ordinaryAlbumId:{default:"",type:String},albumId:{default:"",type:String},libraryId:{default:"",type:String},aiClassId:{default:"",type:String},faceId:{default:"",type:String}},components:{photoBottomSelect:i.a,photoTimeline:s,photoDetail:a.default,videoDetail:r.default,photoOperationHeader:n.a,photoListContent:l.a},data(){return{sourceFolderList:"",searchStr:"",showRangeType:"0",showVideoDetail:!1,scrollTop:0,timeLine:[],showPhotoDetail:!1,editMode:!1,showMode:"cover",showFileType:"0",timeOrder:"desc"}},created(){window.addEventListener("scroll",this.onPageScroll,!0),window.addEventListener("resize",this.onWindowResize),window.addEventListener("popstate",this.onPopstate),this.$bus.$on("closePhotoGallery",()=>{this.$refs.photoDetail&&this.$refs.photoDetail.closeGallery(),this.showPhotoDetail=!1})},beforeDestroy(){window.removeEventListener("scroll",this.onPageScroll),window.removeEventListener("resize",this.onWindowResize),window.removeEventListener("popstate",this.onPopstate),this.$bus.$off("closePhotoGallery")},methods:{setViewType(t){this.$emit("setViewType",t)},galleryLoadMorePre(){this.$refs.photoContent&&this.$refs.photoContent.loadLastPage()},galleryLoadMoreNext(){this.$refs.photoContent&&this.$refs.photoContent.loadNextPage()},onPopstate(){this.showPhotoDetail?(this.$refs.photoDetail.closeGallery(),this.showPhotoDetail=!1):this.showVideoDetail?this.showVideoDetail=!1:this.$router.go(-1)},onChooseRange(t){this.showRangeType=t,this.$nextTick(()=>{this.$refs.timeline&&this.$refs.timeline.getTimeLine(this.$refs.photoHeader?this.$refs.photoHeader.showFileType:"0",this.getGeoParam(),this.albumId,this.ordinaryAlbumId,"",this.aiClassId,this.faceId,this.sourceFolderList,this.libraryId,this.timeOrder)})},onTimeLineGet(t){this.timeLine=t,this.loadFirstPage()},loadFirstPage(){var t;this.$refs.photoContent.clearList(),this.$refs.photoContent.lastHasMore=!1,0<this.timeLine.length&&(t="desc"==this.timeOrder?1:2,this.$refs.photoContent.getPhotoByDate(this.timeLine[0],t))},onWindowResize(t){this.$nextTick(()=>{this.$refs.photoContent.calculateImgHeight(),this.$refs.timeline.onWindowResize(document.documentElement.clientHeight)})},onPageScroll(o){if(!this.showPhotoDetail&&!this.showVideoDetail&&"photo-wrapper"==o.target.id){this.$refs.photoContent&&this.$refs.photoContent.cancelTouchEvent();let t=null,e=null;o.srcElement.scrollingElement?(t=o.srcElement.scrollingElement.scrollTop,e=o.srcElement.scrollingElement.scrollHeight):o.srcElement?(t=o.srcElement.scrollTop,e=o.srcElement.scrollHeight):o.target&&(t=o.target.scrollTop,e=o.target.scrollHeight),this.scrollTop=t;var i=document.documentElement.clientHeight;!e&&o.srcElement.scrollingElement&&(e=o.srcElement.scrollingElement.scrollHeight),this.scrollTop>i?this.$refs.photoContent&&this.$refs.photoContent.setShowTopBtn(!0):this.$refs.photoContent&&this.$refs.photoContent.setShowTopBtn(!1),0==this.scrollTop&&this.$refs.photoContent&&this.$refs.photoContent.loadLastPage(),this.calFirstPhotoDate(),this.scrollTop+i>=e-5&&this.$refs.photoContent&&this.$refs.photoContent.loadNextPage(),this.$refs.timeline&&this.$refs.timeline.onScroll()}},onUnSelect(){this.clearSelected()},onTimeOrderChange(t,e){this.timeOrder=t,e&&(this.$refs.timeline.getTimeLine(this.$refs.photoHeader?this.$refs.photoHeader.showFileType:"0",this.getGeoParam(),this.albumId,this.ordinaryAlbumId,null,this.aiClassId,this.faceId,this.sourceFolderList,this.libraryId,this.timeOrder),this.clearSelected())},onChooseSource(t){this.sourceFolderList=t,this.$refs.timeline.getTimeLine(this.$refs.photoHeader?this.$refs.photoHeader.showFileType:"0",this.getGeoParam(),this.albumId,this.ordinaryAlbumId,null,this.aiClassId,this.faceId,this.sourceFolderList,this.libraryId,this.timeOrder),this.clearSelected()},onSearch(t){this.searchStr=t,this.$refs.timeline.getTimeLine(this.$refs.photoHeader?this.$refs.photoHeader.showFileType:"0",this.getGeoParam(),this.albumId,this.ordinaryAlbumId,t,this.aiClassId,this.faceId,this.sourceFolderList,this.libraryId,this.timeOrder),this.clearSelected()},onChooseDataType(t){this.showFileType=t,this.$refs.timeline.getTimeLine(this.$refs.photoHeader?this.$refs.photoHeader.showFileType:"0",this.getGeoParam(),this.albumId,this.ordinaryAlbumId,null,this.aiClassId,this.faceId,this.sourceFolderList,this.libraryId,this.timeOrder),this.clearSelected()},getGeoParam(){if(!this.geohash)return null;let t=this.geohash.substr(0,5);return"1"==this.showRangeType?t=this.geohash.substr(0,4):"2"==this.showRangeType?t=this.geohash.substr(0,3):"3"==this.showRangeType&&(t=this.geohash.substr(0,2)),t},setImgSize(t){this.$refs.photoContent.itemBaseWidth=t,this.$refs.photoContent.calculateImgHeight(),this.calFirstPhotoDate()},onTimeChoose(t){this.$refs.photoContent.clearList(),this.$refs.photoContent.getPhotoByTime(t,1,!0)},onChangeShowMode(t){this.showMode=t,this.$refs.photoContent.calculateImgHeight()},calFirstPhotoDate(){let t=null;(t=this.$refs.photoHeader&&this.$refs.photoContent?this.$refs.photoHeader.calPhotoDate(this.scrollTop,this.$refs.photoContent.photoList,this.$refs.photoContent.dataColumns,this.$refs.photoContent.photoHeight):t)&&this.$refs.timeline&&this.$refs.timeline.showSelectedTime(t.original_time)},switchEditMode(){this.editMode=!this.editMode,this.editMode||this.clearSelected()},onHoverSelected(t){this.editMode=!0,this.onPhotoClick(t)},onPhotoLoadOver(t,e){this.calFirstPhotoDate(),setTimeout(()=>{this.$refs.photoContent.calculateImgHeight()},300),this.showPhotoDetail&&this.$refs.photoDetail&&this.$refs.photoDetail.updateImageList(t,e)},onTrashInSuc(){this.$refs.photoContent.onTrashInSuc(),this.calFirstPhotoDate()},clearSelected(){this.$refs.photoContent.clearSelected(),this.$refs.selectView&&this.$refs.selectView.clearSelected(),this.editMode=!1},onPhotoClick(o){let i=this.$refs.photoContent.photoList;if(this.editMode)i[o].selected?(this.$refs.photoContent.setPhotoSelected(o,!1),this.$refs.selectView.removeSelected(i[o].id),this.$refs.selectView.selectedList.length<1&&(this.editMode=!1)):(this.$refs.photoContent.setPhotoSelected(o,!0),this.$refs.selectView.addSelected(i[o]));else if(1==i[o].type)this.showPhotoDetail=!0,this.$nextTick(()=>{this.$refs.photoDetail.showImg(i,o)}),this.pushState();else if(2==i[o].type)if("1"==localStorage.getItem("rawPlayer")||this.isIosSupportRawPlayer()){let t=[],e=0;for(var s in i)2==i[s].type&&t.push(i[s]);for(var h in t)if(t[h].id==i[o].id){e=h;break}d.a.playVideo({playIndex:e,playList:t,token:this.$store.state.token,fromFileBrower:!1,serverType:"photo"})}else this.showVideoDetail=!0,this.$nextTick(()=>{this.$refs.videoPlayer.playVideo(i,o)}),this.pushState()}}},s=(o("ec48"),Object(h.a)(i,function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("div",{ref:"photoListRoot",staticClass:"photo-list-root"},[t("div",{staticClass:"photo-header"},[t("photo-operation-header",{ref:"photoHeader",attrs:{usePadding:!0,showSourceFilter:!0,restoreFilter:!(e.nearMode||e.ordinaryAlbumId||e.albumId||e.faceId||e.aiClassId),editMode:e.editMode,nearMode:e.nearMode},on:{showSearchBtn:e.showSearchBtn,onChooseDataType:e.onChooseDataType,setViewType:e.setViewType,onChangeShowMode:e.onChangeShowMode,onSizeChange:e.setImgSize,onChooseRange:e.onChooseRange,onSearch:e.onSearch,albumId:e.albumId,onSwitchEditMode:e.switchEditMode,onChooseSource:e.onChooseSource,onTimeOrderChange:e.onTimeOrderChange}})],1),t("div",{staticClass:"photo-content"},[t("photo-list-content",{ref:"photoContent",attrs:{timeOrder:e.timeOrder,showMode:e.showMode,geohash:e.geohash,albumId:e.albumId,libraryId:e.libraryId,aiClassId:e.aiClassId,ordinaryAlbumId:e.ordinaryAlbumId,showRangeType:e.showRangeType,showFileType:e.showFileType,searchStr:e.searchStr,faceId:e.faceId,sourceFolderList:e.sourceFolderList},on:{onHoverSelected:e.onHoverSelected,onPhotoClick:e.onPhotoClick,onUnSelect:e.onUnSelect,onPhotoLoadOver:e.onPhotoLoadOver}}),t("photo-timeline",{directives:[{name:"show",rawName:"v-show",value:0<e.timeLine.length,expression:"timeLine.length > 0"}],ref:"timeline",staticClass:"timeline-wrapper",attrs:{geohash:e.geohash,albumId:e.albumId},on:{onTimeChoose:e.onTimeChoose,onTimeLineGet:e.onTimeLineGet}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.editMode,expression:"editMode"}],staticClass:"bottom-select-root"},[t("photo-bottom-select",{ref:"selectView",attrs:{ordinaryAlbumId:e.ordinaryAlbumId,showRemoveFromAlbum:e.showRemoveFromAlbum,showAddToAlbum:e.showAddToAlbum,faceId:e.faceId,editMode:e.editMode},on:{onRemoveFromAlbum:e.onTrashInSuc,onUnSelect:e.onUnSelect,onTrashInSuc:function(t){return e.onTrashInSuc()}}})],1),e.showPhotoDetail?t("photo-detail",{ref:"photoDetail",attrs:{enableRemove:!0},on:{onClose:function(t){e.showPhotoDetail=!1},galleryLoadMorePre:e.galleryLoadMorePre,galleryLoadMoreNext:e.galleryLoadMoreNext}}):e._e(),t("Modal",{attrs:{fullscreen:"","footer-hide":"",closable:!1},model:{value:e.showVideoDetail,callback:function(t){e.showVideoDetail=t},expression:"showVideoDetail"}},[e.showVideoDetail?t("video-detail",{ref:"videoPlayer",attrs:{propsServerType:"photo"},on:{onClose:function(t){e.showVideoDetail=!1}}}):e._e()],1)],1)},[],!1,null,"6b538e60",null));e.default=s.exports},db96:function(t,e,o){"use strict";o("14d9");var i=o("be3b"),s=(o("d930"),{components:{photoFacesSelect:()=>o.e("chunk-e20a0f68").then(o.bind(null,"1498"))},props:{pageRows:{default:10,type:Number},geohash:{default:"",type:String},ordinaryAlbumId:{default:"",type:String},aiClassId:{default:"",type:String},faceId:{default:"",type:String},albumId:{default:"",type:String},libraryId:{default:"",type:String},showMode:{default:"cover",type:String},showFileType:{default:"0",type:String},showRangeType:{default:"0",type:String},trash:{default:0,type:Number},sortField:{default:"original_time",type:String},marginRight:{default:"0",type:String},searchStr:{default:"",type:String},sourceFolderList:{default:"",type:String},timeOrder:{default:"desc",type:String}},data(){return{isInDragSelectMode:!1,dragStartIndex:0,dragEndIndex:0,dragSelectMode:!0,showSelectFace:!1,showToTopBtn:!1,rightMenuList:[],listMaxLength:500,sortType:"desc",scrollBarWidth:0,token:this.getToken(),itemBaseWidth:200,photoWidth:200,photoHeight:0,photoMargin:5,photoList:[],lastHasMore:!1,nextHasMore:!0,lastLoading:!1,nextLoading:!1,baseUrl:i.a.baseUrl,dataColumns:10,selectedIndex:null,selectedFile:null,switchPeopleIndexList:[]}},mounted(){this.isMobile&&(this.itemBaseWidth=180),this.$bus.$on("removeIndexById",t=>{if(this.photoList&&0<this.photoList.length)for(var e in this.photoList)this.photoList[e].id==t&&this.photoList.splice(e,1)}),this.$bus.$on("onIndexUpdate",t=>{for(var e in this.photoList)this.photoList[e].id==t.id&&(this.photoList[e]=t,this.dealPhotoUrl(this.photoList[e]))}),this.$bus.$on("onRemoveFromFace",o=>{this.showVsConfirmDialog(this.$t("common.confirm"),this.$t("photo.removeFromAlbum")+"?",()=>{var t,e=[];for(t of this.photoList)o.includes(t.id)&&e.push(t);this.removeFromFaceApi(e)})}),this.$bus.$on("onSwitchToOtherPeople",t=>{var e,o=[];for(e of this.photoList)t.includes(e.id)&&o.push(e);this.switchPeopleIndexList=o,this.showSelectFace=!0})},beforeDestroy(){this.$bus.$off("removeIndexById"),this.$bus.$off("onIndexUpdate"),this.$bus.$off("onRemoveFromFace")},methods:{initRightMenu(t){this.rightMenuList=[],t.selected||this.rightMenuList.push({text:this.$t("file.check"),type:"CHECK"}),this.rightMenuList.push({text:this.$t("common.download"),type:"DOWNLOAD"}),this.ordinaryAlbumId?this.rightMenuList.push({text:this.$t("photo.removeFromAlbum"),type:"REMOVE_FROM_ALBUM"}):this.rightMenuList.push({text:this.$t("photo.addToAlbum"),type:"ADD_TO_ALBUYM"}),this.faceId&&(this.rightMenuList.push({text:this.$t("photo.setFacePoster"),type:"SET_FACE_POSTER"}),this.rightMenuList.push({text:this.$t("photo.removeFromFace"),type:"REMOVE_FROM_FACE"}),this.$forceUpdate()),1!=this.trash&&this.rightMenuList.push({text:this.$t("photo.putInTrash"),type:"TRASH"}),!t.selected&&this.showOpenInSystem&&(this.rightMenuList.push({text:this.$t("openInSystem"),type:"OPEN_IN_SYSTEM"}),this.rightMenuList.push({text:this.$t("selectedInSystem"),type:"SELECT_IN_SYSTEM"}))},onMouseDown(t,e){t&&1==t.buttons&&(this.isInDragSelectMode=!0,this.dragSelectMode=!this.photoList[e].selected,this.dragStartIndex=e)},onMouseUp(t){this.isInDragSelectMode=!1},onMouseLeaveRoot(){this.isInDragSelectMode=!1},mouseEnterImg(t){this.isInDragSelectMode?(this.dragEndIndex=t,this.setDragRange()):this.isMobile||(this.photoList[t].hover=!0,this.$forceUpdate())},mouseLeaveImg(t){this.isMobile||(this.photoList[t].hover=!1)},setDragRange(){var e=this.dragStartIndex>this.dragEndIndex?this.dragEndIndex:this.dragStartIndex,o=this.dragStartIndex>this.dragEndIndex?this.dragStartIndex:this.dragEndIndex;for(let t=e;t<=o;t++)this.dragSelectMode?this.photoList[t].selected||this.hoverSelect(t):this.photoList[t].selected&&this.hoverSelect(t)},onSelectPeople(){if(this.$refs.photoFaceSelect){var t=this.$refs.photoFaceSelect.getSelectedFaceId();if(t){var e,o=[];for(e of this.switchPeopleIndexList)o.push({photo_index_id:e.id,face_id:e.face_id});t={targetFaceId:t,rawFaceIndexIdList:JSON.stringify(o)};this.api.post("/api/photoApi/switchFaceId",t).then(t=>{if(!t.code){if(this.showVsNotification(this.$t("common.changeSuccess")),t.sucIdList)for(var e in t.sucIdList){var o=t.sucIdList[e];for(let t=this.photoList.length-1;0<=t;t--)if(this.photoList[t].id==o){this.photoList.splice(t,1);break}}this.showSelectFace=!1}}).catch(t=>{})}}},touchstart(t){clearTimeout(this.longPressTimeout),this.longPressTimeout=setTimeout(()=>{this.hoverSelect(t)},800)},touchend(){clearTimeout(this.longPressTimeout)},cancelTouchEvent(){this.longPressTimeout&&(clearTimeout(this.longPressTimeout),this.longPressTimeout=null)},setShowTopBtn(t){this.showToTopBtn=t},showRightMenu(t,e,o,i){o.selected||this.$emit("onUnSelect"),this.initRightMenu(o),this.selectedFile=o,this.selectedIndex=i,this.$easycm(t,e)},rightMenuClick(t){var e,t=this.rightMenuList[t[0]].type;"CHECK"==t?this.onPhotoClick(this.selectedIndex):"TRASH"==t?this.selectedFile.selected?this.$bus.$emit("onTrashAllMsg"):this.$bus.$emit("onTrashMsg",this.photoList[this.selectedIndex].id):"DOWNLOAD"==t?this.selectedFile.selected?this.$bus.$emit("onDownloadSelectedListMsg"):1==(e=this.photoList[this.selectedIndex]).is_livephoto&&e.livephotoIndex&&e.livephotoIndex.videoIndex&&e.livephotoIndex.photoIndex?(this.downloadFile([e.livephotoIndex.videoIndex.rawUrl]),this.downloadFile([e.livephotoIndex.photoIndex.rawUrl])):this.downloadFile([e.rawUrl]):"ADD_TO_ALBUYM"==t?(this.selectedFile.selected||this.hoverSelect(this.selectedIndex),this.$bus.$emit("onAddToAlbumMsg")):"REMOVE_FROM_ALBUM"==t?(this.selectedFile.selected||this.hoverSelect(this.selectedIndex),this.$bus.$emit("onRemoveFromAlbumMsg")):"SET_FACE_POSTER"==t?this.setFacePosterApi(this.selectedIndex):"REMOVE_FROM_FACE"==t?this.removeFromFaceApi([this.photoList[this.selectedIndex]]):"OPEN_IN_SYSTEM"==t?this.openInSystem(this.selectedFile.path,this.selectedFile.filename):"SELECT_IN_SYSTEM"==t&&this.openInSystem(this.selectedFile.path,this.selectedFile.filename,null,"showItemInFolder")},removeFromFaceApi(i){var t,e=[];for(t of i)e.push({faceId:t.face_id,indexId:t.id});this.api.post("/api/photoApi/removeFromFace",{deleteList:JSON.stringify(e)}).then(t=>{if(!t.code)for(var e in this.showVsNotification(this.$t("common.changeSuccess")),i){var o=i[e];for(let t=this.photoList.length-1;0<=t;t--)if(this.photoList[t].id==o.id){this.photoList.splice(t,1);break}}}).catch(t=>{})},setFacePosterApi(t){this.api.post("/api/photoApi/setFacePoster",{photoIndexId:this.photoList[t].id,setFaceId:this.faceId,rawFaceId:this.photoList[t].face_id}).then(t=>{t.code||this.showVsNotification(this.$t("common.changeSuccess"))}).catch(t=>{})},setOrdinaryCover(t){this.showVsConfirmDialog(this.$t("common.confirm"),this.$t("album.setPhotoAsCover"),()=>{this.api.post("/api/ordinaryAlbumApi/setAlbumCover",{indexId:this.photoList[t].id,albumId:this.ordinaryAlbumId}).then(t=>{t.code||this.showVsNotification(this.$t("common.changeSuccess"))}).catch(t=>{})})},setPhotoSelected(t,e){this.photoList[t].selected=e,this.$forceUpdate()},clearList(){this.photoList=[],this.lastHasMore=!0,this.nextHasMore=!0,this.lastLoading=!1,this.nextLoading=!1},hoverSelect(t){this.$emit("onHoverSelected",t)},onTrashInSuc(){for(let t=this.photoList.length-1;0<=t;t--)1==this.photoList[t].selected&&this.photoList.splice(t,1)},clearSelected(){for(var t=0;t<this.photoList.length;t++)this.photoList[t].selected=!1;this.$forceUpdate()},onPhotoClick(t){this.$emit("onPhotoClick",t)},calculateImgHeight(){var t,e;this.$refs.photoWrapper&&(t=this.$refs.photoWrapper.getBoundingClientRect())&&(e=this.utils.calItemWidth(t,this.itemBaseWidth,this.photoMargin),this.photoWidth=e,this.photoHeight=this.photoWidth,this.dataColumns=parseFloat(t.width/this.itemBaseWidth).toFixed())},loadLastPage(){this.lastHasMore&&0<this.photoList.length&&this.getPhotoByTime(this.photoList[0][this.sortField],"desc"==this.timeOrder?2:1)},loadNextPage(){this.nextHasMore&&0<this.photoList.length&&this.getPhotoByTime(this.photoList[this.photoList.length-1][this.sortField],"desc"==this.timeOrder?1:2)},dealPhotoUrl(t){var e=i.a.getImgFullPath(t.id,!0,t.filename),o=i.a.getImgFullPath(t.id,!1,t.filename);return t.url=e,t.rawUrl=o,t.livephotoIndex&&t.livephotoIndex.photoIndex&&t.livephotoIndex.videoIndex&&(t.livephotoIndex.photoIndex.url=i.a.getImgFullPath(t.livephotoIndex.photoIndex.id,!0,t.livephotoIndex.photoIndex.filename),t.livephotoIndex.photoIndex.rawUrl=i.a.getImgFullPath(t.livephotoIndex.photoIndex.id,!1,t.livephotoIndex.photoIndex.filename),t.livephotoIndex.videoIndex.url=i.a.getImgFullPath(t.livephotoIndex.videoIndex.id,!0,t.livephotoIndex.videoIndex.filename),t.livephotoIndex.videoIndex.rawUrl=i.a.getImgFullPath(t.livephotoIndex.videoIndex.id,!1,t.livephotoIndex.videoIndex.filename),t.url=t.livephotoIndex.photoIndex.url,t.rawUrl=t.livephotoIndex.photoIndex.rawUrl,t.type=1),t.rawImageIndex&&(t.rawImageIndex.url=i.a.getImgFullPath(t.rawImageIndex.id,!0,t.rawImageIndex.filename),t.rawImageIndex.rawUrl=i.a.getImgFullPath(t.rawImageIndex.id,!1,t.rawImageIndex.filename)),t},getPhotoByDate(t,e){let o=t.original_time;1==e?o+=864e5:o-=864e5,this.getPhotoByTime(o,e)},getPhotoByTime(t,i,s){let h="desc"==this.timeOrder;if(this.sortType=1==i?"desc":"asc",!this.lastLoading&&!this.nextLoading){i=parseInt(i),h?2==i?this.lastLoading=!0:this.nextLoading=!0:2==i?this.nextLoading=!0:this.lastLoading=!0;for(var e=[],a=0;a<this.photoList.length;a++)this.photoList[a][this.sortField]==t&&e.push(this.photoList[a].id);let o=this.dataColumns*this.pageRows;o<100&&(o=100);var r={hideLoading:!0,timestamp:t,timeType:i,count:o,excludeIds:e,fileType:parseInt(this.showFileType),sortField:this.sortField,sortType:this.sortType,trash:this.trash};if(this.geohash){let t=this.geohash.substr(0,5);"1"==this.showRangeType?t=this.geohash.substr(0,4):"2"==this.showRangeType?t=this.geohash.substr(0,3):"3"==this.showRangeType&&(t=this.geohash.substr(0,2)),r.geohash=t}this.albumId&&(r.albumId=this.albumId),this.libraryId&&(r.libraryId=this.libraryId),this.ordinaryAlbumId&&(r.ordinaryAlbumId=this.ordinaryAlbumId),this.aiClassId&&(r.aiClassId=parseInt(this.aiClassId)),this.faceId&&(r.faceId=this.faceId),this.searchStr&&(r.searchStr=this.searchStr),this.sourceFolderList&&(r.sourceFolderList=this.sourceFolderList),this.api.post("/api/photoApi/getPhotoByTime",r).then(e=>{for(let t=0;t<e.data.length;t++)e.data[t]=this.dealPhotoUrl(e.data[t]);if(h&&2==i||!h&&1==i){e.data.length<o&&(this.lastHasMore=!1),this.photoList=e.data.reverse().concat(this.photoList);let t=(this.photoWidth+2*this.photoMargin)*e.data.length/this.dataColumns;t=0<t?t:0,this.$nextTick(()=>{this.$refs.photoWrapper.scrollTop=t}),this.$nextTick(()=>{if(0<e.data.length&&this.photoList.length>this.listMaxLength)for(var t=0;t<e.data.length;t++)this.photoList.pop()})}else this.photoList=this.photoList.concat(e.data),e.data.length<o&&(this.nextHasMore=!1);h?2==i?this.lastLoading=!1:this.nextLoading=!1:2==i?this.nextLoading=!1:this.lastLoading=!1,this.$nextTick(()=>{this.calculateImgHeight(),this.$emit("onPhotoLoadOver",h&&2==i||!h&&1==i,e.data),s&&this.loadLastPage()})}).catch(t=>{h?2==i?this.lastLoading=!1:this.nextLoading=!1:2==i?this.nextLoading=!1:this.lastLoading=!1})}}}}),h=(o("1182"),o("2877")),h=Object(h.a)(s,function(){var i=this,t=i.$createElement,s=i._self._c||t;return s("div",{ref:"photoWrapper",staticClass:"photo-wrapper",attrs:{id:"photo-wrapper"},on:{mouseleave:i.onMouseLeaveRoot}},[i.lastHasMore?s("div",{staticStyle:{width:"100%",display:"flex","justify-content":"center",height:"60px","align-items":"center"}},[s("Spin")],1):i._e(),i._l(i.photoList,function(e,o){return s("div",{key:e.id,staticClass:"photo-item",staticStyle:{cursor:"pointer"},style:{margin:i.photoMargin+"px",width:i.photoWidth+"px",height:i.photoHeight+"px"},attrs:{id:"photoItem"+e.id},on:{click:function(t){return i.onPhotoClick(o)},mouseenter:function(t){return i.mouseEnterImg(o)},mouseleave:function(t){return i.mouseLeaveImg(o)},contextmenu:function(t){return i.showRightMenu(t,i.$root,e,o)},touchstart:function(t){return i.touchstart(o)},touchend:i.touchend,mousedown:function(t){return i.onMouseDown(t,o)},mouseup:function(t){return i.onMouseUp(o)}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.url,expression:"photo.url"}],staticClass:"photo-img",style:{height:i.photoHeight+"px","object-fit":i.showMode},attrs:{id:"photoImg"+e.id},on:{dragstart:function(t){t.preventDefault()}}}),2==e.type&&1!=e.is_livephoto?s("div",{staticClass:"icon-play-root"},[s("span",{staticClass:"nasIcons icon-play",staticStyle:{color:"white","font-size":"30px"}}),s("p",{staticClass:"icon-duration"},[i._v(i._s(i.utils.formatSeconds(e.duration)))])]):i._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:e.hover&&!e.selected,expression:"photo.hover && !photo.selected"}],staticClass:"photo-hover-mask"},[i.ordinaryAlbumId?s("Icon",{staticClass:"photo-select-icon-setcover",attrs:{size:25,color:"#eee",type:"ios-disc"},on:{click:function(t){return t.stopPropagation(),i.setOrdinaryCover(o)}}}):i._e(),s("vs-tooltip",{staticClass:"photo-select-icon-hover",attrs:{disabled:i.isMobile},scopedSlots:i._u([{key:"tooltip",fn:function(){return[s("div",{staticStyle:{"word-break":"break-all"}},[i._v(i._s(i.$t("dragSelectAlert")))])]},proxy:!0}],null,!0)},[s("span",{staticClass:" nasIcons icon-radio-unchecked",on:{click:function(t){return t.stopPropagation(),i.hoverSelect(o)}}})])],1),e.selected?s("div",{staticClass:"photo-select-mask"},[s("span",{staticClass:"photo-select-icon-hover nasIcons icon-radio-checked"})]):i._e(),1==e.is_livephoto?s("div",{staticClass:"wrapper-livephoto flex-row"},[s("span",{staticClass:"nasIcons icon-livezhaopian",staticStyle:{"font-size":"12px",color:"#333333"}}),s("span",{staticStyle:{"font-size":"10px",color:"#333333"}},[i._v("LIVE")])]):1==e.is_raw?s("div",{staticClass:"wrapper-livephoto flex-row"},[s("span",{staticStyle:{"font-size":"10px",color:"#333333"}},[i._v(i._s(e.ext.replace(".","").toUpperCase()))])]):e.rawImageIndex&&e.raw_filename&&1!=i.trash?s("div",{staticClass:"wrapper-livephoto flex-row"},[s("span",{staticStyle:{"font-size":"10px",color:"#333333"}},[i._v(i._s(e.ext.replace(".","").toUpperCase())+"+"+i._s(e.rawImageIndex.ext.replace(".","").toUpperCase()))])]):i._e()])}),s("div",{staticStyle:{display:"flex","justify-content":"center",width:"100%","flex-direction":"column","align-items":"center"}},[i.nextHasMore&&0<i.photoList.length?s("Button",{staticStyle:{width:"250px","margin-top":"30px",height:"45px","border-radius":"20px"},attrs:{type:"default"},on:{click:function(t){return i.loadNextPage()}}},[i._v(i._s(i.$t("common.loadmore")))]):i._e(),i.nextLoading?s("Spin",{staticStyle:{"margin-top":"30px"},attrs:{size:"large"}}):i._e(),i.nextLoading||i.nextHasMore?i._e():s("span",{staticStyle:{"margin-top":"30px"}},[i._v(i._s(i.$t("common.noMore")))]),s("div",{staticStyle:{height:"50px"}})],1),i.isMobile?i._e():s("easy-cm",{attrs:{list:i.rightMenuList},on:{ecmcb:i.rightMenuClick}}),i.showToTopBtn?s("my-btn-icon",{staticClass:"to-top",attrs:{iIcon:"md-arrow-up"},on:{click:function(t){return i.$refs.photoWrapper.scrollTo({top:0,behavior:"smooth"})}}}):i._e(),s("vs-dialog",{attrs:{scroll:""},scopedSlots:i._u([{key:"header",fn:function(){return[s("h4",{staticStyle:{"font-size":"16px"}},[i._v(" "+i._s(i.$t("photo.changePeopleAlert"))+" ")])]},proxy:!0},{key:"footer",fn:function(){return[s("vs-button",{attrs:{block:""},on:{click:i.onSelectPeople}},[i._v(" "+i._s(i.$t("common.select"))+" ")])]},proxy:!0}]),model:{value:i.showSelectFace,callback:function(t){i.showSelectFace=t},expression:"showSelectFace"}},[s("photo-faces-select",{ref:"photoFaceSelect",attrs:{singleSelectMode:!0}})],1)],2)},[],!1,null,"12dd9720",null);e.a=h.exports},dd93:function(t,e,o){},ec48:function(t,e,o){"use strict";o("f8ef")},f8de:function(t,e,o){"use strict";o("1e36")},f8ef:function(t,e,o){}}]);