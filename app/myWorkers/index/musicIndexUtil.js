function _0x2b0f(_0x520e4b,_0x4164ef){const _0x36247d=_0x3624();return _0x2b0f=function(_0x2b0f7c,_0x206648){_0x2b0f7c=_0x2b0f7c-0x1a4;let _0x417d4a=_0x36247d[_0x2b0f7c];return _0x417d4a;},_0x2b0f(_0x520e4b,_0x4164ef);}const _0x55b40d=_0x2b0f;(function(_0x5a33da,_0x805f15){const _0x670361=_0x2b0f,_0x134013=_0x5a33da();while(!![]){try{const _0x573204=parseInt(_0x670361(0x1d6))/0x1*(-parseInt(_0x670361(0x1e3))/0x2)+-parseInt(_0x670361(0x1e1))/0x3+-parseInt(_0x670361(0x1a9))/0x4+parseInt(_0x670361(0x1d7))/0x5*(-parseInt(_0x670361(0x1b1))/0x6)+parseInt(_0x670361(0x1c6))/0x7+-parseInt(_0x670361(0x1d1))/0x8+parseInt(_0x670361(0x1d2))/0x9;if(_0x573204===_0x805f15)break;else _0x134013['push'](_0x134013['shift']());}catch(_0x437127){_0x134013['push'](_0x134013['shift']());}}}(_0x3624,0xf1916));const path=require(_0x55b40d(0x1c0)),fs=require('fs'),dbFileIndexTable=require('../../db/dbFileIndexTable'),config=require(_0x55b40d(0x1bd)),videoStreamUtil=require(_0x55b40d(0x1af)),indexUtil=require(_0x55b40d(0x1ee));let musicUtils=require(_0x55b40d(0x1ab));function _0x3624(){const _0x3d0994=['TIT2','ffprobeSync','TYER','indexOf','year','original_time','title','dealFileChange','3332196yXlhrD','musicTypeList','../../utils/musicUtil','parseAudioTags','music','stream_info','../../utils/videoStreamUtil','data','172212zVwbnw','NaN','getFullYear','TPE1','log','filename','APIC','content\x20type','size','basename','INDEX_TABLE_NAME_MUSIC','extname','../../myConfig/config','../../express-server/utils/sharpUtils','addFinalIndexToDB','path','addOriginalDate','birthtime','toLowerCase','ceil','dealMediaInfo','10204075VTFlcf','ext','jsmediatags','create','artist','addFileIndexToDb','lastInsertRowid','fileCoverPath','string','writeFile','stringify','15772376zZJaKP','44252982LbTgav','getMonth','genTinyFile','ctime','371859RbeQhJ','320kZJtjr','getTime','recursionFilesAddIndex','type','description','is_file','streams','getMusicSameNameCover','read','includes','1115634nLVXAR','getMediaCoverCachePath','2WoKOYR','format','birthtimeMs','Null','picture','exports','exifMinTimeStamp','dirname','TALB','mtimeMs','transStringToUtf8','./indexUtil','atimeMs','genre','base64','Nan','getById','lyrics','duration','album','length','join','ctimeMs','tags','performer','getDate','temp.'];_0x3624=function(){return _0x3d0994;};return _0x3624();}const indexTableName=dbFileIndexTable[_0x55b40d(0x1bb)],musicIndexUtil={},sharpUtil=require(_0x55b40d(0x1be));let jsmediatags=require(_0x55b40d(0x1c8)),musicTypeList=config[_0x55b40d(0x1aa)];musicIndexUtil[_0x55b40d(0x1a8)]=async function(_0x44c980,_0x5935fd,_0x53f225){const _0x34cb49=_0x55b40d;await indexUtil[_0x34cb49(0x1a8)](_0x44c980,_0x5935fd,_0x53f225,indexTableName,musicIndexUtil[_0x34cb49(0x1cb)],musicIndexUtil['recursionFilesAddIndex']);return;},musicIndexUtil[_0x55b40d(0x1d9)]=async function(_0x6c7448,_0x9feae6,_0x4390c3){const _0x27fa23=_0x55b40d;return await indexUtil['recursionFilesAddIndex'](_0x6c7448,_0x9feae6,indexTableName,_0x27fa23(0x1ad),_0x4390c3,musicIndexUtil[_0x27fa23(0x1cb)]);},musicIndexUtil[_0x55b40d(0x1cb)]=async function(_0x82313f,_0x160c4e,_0x36030c,_0x1d5f98,_0x249341,_0x135da9){const _0x5db9af=_0x55b40d;let _0x3399a9=indexUtil['doesPathCanAddToDb'](_0x82313f,_0x5db9af(0x1ad),config,_0x36030c,_0x1d5f98);if(!_0x3399a9)return;let _0x420cb3=_0x135da9[_0x5db9af(0x1e5)];_0x135da9[_0x5db9af(0x1ec)]<_0x420cb3&&(_0x420cb3=_0x135da9[_0x5db9af(0x1ec)]);_0x135da9['atimeMs']<_0x420cb3&&(_0x420cb3=_0x135da9[_0x5db9af(0x1ef)]);_0x135da9[_0x5db9af(0x1f9)]<_0x420cb3&&(_0x420cb3=_0x135da9[_0x5db9af(0x1f9)]);let _0x30483b={'path':_0x36030c,'filename':_0x1d5f98,'is_file':_0x249341,'ctime':_0x135da9[_0x5db9af(0x1f9)],'mtime':_0x135da9['mtimeMs'],'ext':path[_0x5db9af(0x1bc)](_0x1d5f98),'birthtime':Math[_0x5db9af(0x1c4)](_0x420cb3),'size':_0x135da9[_0x5db9af(0x1b9)],'check_time':new Date()[_0x5db9af(0x1d8)]()};_0x30483b=await musicIndexUtil[_0x5db9af(0x1c5)](_0x160c4e,_0x30483b);},musicIndexUtil[_0x55b40d(0x1c5)]=async function(_0x48ac01,_0x3a7f96){const _0x446195=_0x55b40d;let _0x4292e2=![],_0x59f3b5=path[_0x446195(0x1f8)](_0x3a7f96[_0x446195(0x1c0)],_0x3a7f96[_0x446195(0x1b6)]);if(_0x3a7f96[_0x446195(0x1dc)]==0x1&&_0x3a7f96[_0x446195(0x1c7)]&&musicTypeList[_0x446195(0x1e0)](_0x3a7f96[_0x446195(0x1c7)][_0x446195(0x1c3)]())){_0x3a7f96[_0x446195(0x1da)]=0x3;try{let _0xa26ebe=await indexUtil[_0x446195(0x1ff)](_0x59f3b5);if(_0xa26ebe&&_0xa26ebe[_0x446195(0x1dd)]&&_0xa26ebe[_0x446195(0x1dd)][_0x446195(0x1f7)]>0x0){_0x3a7f96[_0x446195(0x1ae)]=JSON['stringify'](_0xa26ebe[_0x446195(0x1dd)]);let _0xaa5a0b=videoStreamUtil['getDurationFromStream'](_0xa26ebe);_0xaa5a0b&&(_0x3a7f96[_0x446195(0x1f5)]=_0xaa5a0b);}if(_0xa26ebe&&_0xa26ebe[_0x446195(0x1e4)]&&_0xa26ebe['format'][_0x446195(0x1fa)]){let _0x31945c=_0xa26ebe[_0x446195(0x1e4)][_0x446195(0x1fa)][_0x446195(0x1f6)];_0x31945c&&(_0x3a7f96[_0x446195(0x1f6)]=_0x31945c),_0xa26ebe[_0x446195(0x1e4)][_0x446195(0x1f5)]&&!_0x3a7f96[_0x446195(0x1f5)]&&(_0x3a7f96[_0x446195(0x1f5)]=_0xa26ebe[_0x446195(0x1e4)][_0x446195(0x1f5)]);}musicIndexUtil[_0x446195(0x1ac)](_0x59f3b5,_0x3a7f96,_0x123843=>{const _0xd5be1b=_0x446195;return _0x123843[_0xd5be1b(0x1f6)]&&(_0x123843[_0xd5be1b(0x1f6)]=musicUtils[_0xd5be1b(0x1ed)](_0x123843[_0xd5be1b(0x1f6)])),_0x123843[_0xd5be1b(0x1ca)]&&(_0x123843['artist']=musicUtils[_0xd5be1b(0x1ed)](_0x123843[_0xd5be1b(0x1ca)])),_0x123843[_0xd5be1b(0x1a7)]&&(_0x123843[_0xd5be1b(0x1a7)]=musicUtils[_0xd5be1b(0x1ed)](_0x123843[_0xd5be1b(0x1a7)])),_0x123843[_0xd5be1b(0x1f4)]&&(_0x123843[_0xd5be1b(0x1f4)]=musicUtils[_0xd5be1b(0x1ed)](_0x123843['lyrics'])),musicIndexUtil[_0xd5be1b(0x1c1)](_0x48ac01,_0x4292e2,_0x123843);});}catch(_0x1b5098){return console[_0x446195(0x1b5)](_0x1b5098),musicIndexUtil['addOriginalDate'](_0x48ac01,_0x4292e2,_0x3a7f96);}}else{if(_0x3a7f96[_0x446195(0x1dc)]==0x1)return;return musicIndexUtil['addOriginalDate'](_0x48ac01,_0x4292e2,_0x3a7f96);}},musicIndexUtil[_0x55b40d(0x1c1)]=function(_0x48b9b7,_0x5b6a0f,_0x17b5d7){const _0x35e6c8=_0x55b40d;_0x5b6a0f&&_0x5b6a0f<config[_0x35e6c8(0x1e9)]&&(_0x5b6a0f=![]);(!_0x5b6a0f||_0x5b6a0f=='NaN'||_0x5b6a0f==_0x35e6c8(0x1f2)||_0x5b6a0f==_0x35e6c8(0x1b2)||_0x5b6a0f==_0x35e6c8(0x1e6))&&(_0x5b6a0f=_0x17b5d7[_0x35e6c8(0x1c2)]||_0x17b5d7[_0x35e6c8(0x1d5)]);let _0x5ec821=new Date(_0x5b6a0f);_0x17b5d7[_0x35e6c8(0x1a6)]=_0x5ec821[_0x35e6c8(0x1d8)]();let _0xa429bf=_0x5ec821[_0x35e6c8(0x1b3)](),_0x409f9b=_0x5ec821[_0x35e6c8(0x1d3)]()+0x1;_0x409f9b=_0x409f9b>=0xa?_0x409f9b:'0'+_0x409f9b;let _0x5af3e1=_0x5ec821[_0x35e6c8(0x1fc)]();_0x5af3e1=_0x5af3e1>=0xa?_0x5af3e1:'0'+_0x5af3e1,_0x17b5d7['original_date']=_0xa429bf+'-'+_0x409f9b+'-'+_0x5af3e1,musicIndexUtil[_0x35e6c8(0x1bf)](_0x48b9b7,_0x17b5d7);},musicIndexUtil[_0x55b40d(0x1bf)]=function(_0x296697,_0x3a686d){const _0x37a31c=_0x55b40d;!_0x3a686d[_0x37a31c(0x1f6)]&&(_0x3a686d[_0x37a31c(0x1f6)]=path[_0x37a31c(0x1ba)](_0x3a686d[_0x37a31c(0x1c0)]));let _0x162b75=musicUtils[_0x37a31c(0x1de)](_0x296697,_0x3a686d);_0x3a686d[_0x37a31c(0x1cd)]=_0x162b75?_0x162b75:'';let _0x26e7bb=dbFileIndexTable[_0x37a31c(0x1c9)](_0x296697,_0x3a686d,indexTableName);if(_0x26e7bb&&_0x26e7bb[_0x37a31c(0x1cc)]){let _0x10116e=dbFileIndexTable[_0x37a31c(0x1f3)](_0x296697,_0x26e7bb[_0x37a31c(0x1cc)],dbFileIndexTable[_0x37a31c(0x1bb)]);_0x10116e&&musicUtils['dealFirstLetterSingle'](_0x296697,_0x10116e);}},musicIndexUtil[_0x55b40d(0x1ac)]=function(_0x2c48ac,_0x10df84,_0x154a80){const _0x2d000c=_0x55b40d;function _0x3daf36(_0xc69b38,_0x8da70b,_0x364ed6,_0x210bdf,_0x4387cd){const _0x2fb880=_0x2b0f;try{!_0x10df84[_0x8da70b]&&(_0xc69b38[_0x364ed6]&&typeof _0xc69b38[_0x364ed6]=='string'&&(_0x10df84[_0x364ed6]=_0xc69b38[_0x364ed6]),!_0x10df84[_0x8da70b]&&_0x210bdf&&_0xc69b38[_0x210bdf]&&_0xc69b38[_0x210bdf][_0x2fb880(0x1b0)]&&typeof _0xc69b38[_0x210bdf][_0x2fb880(0x1b0)]==_0x2fb880(0x1ce)&&_0xc69b38[_0x210bdf][_0x2fb880(0x1db)]&&typeof _0xc69b38[_0x210bdf][_0x2fb880(0x1db)]==_0x2fb880(0x1ce)&&_0xc69b38[_0x210bdf][_0x2fb880(0x1db)][_0x2fb880(0x1c3)]()[_0x2fb880(0x1a4)](_0x4387cd)!=-0x1&&(_0x10df84[_0x8da70b]=_0xc69b38[_0x210bdf]['data']));}catch(_0x1bca97){console['log'](_0x1bca97);}}jsmediatags[_0x2d000c(0x1df)](_0x2c48ac,{'onSuccess':function(_0x3f1344){const _0x16e9ae=_0x2d000c;let _0x1f2d44=_0x3f1344['tags'];_0x3daf36(_0x1f2d44,_0x16e9ae(0x1f6),_0x16e9ae(0x1f6),_0x16e9ae(0x1eb),_0x16e9ae(0x1f6)),_0x3daf36(_0x1f2d44,'title',_0x16e9ae(0x1a7),_0x16e9ae(0x1fe),_0x16e9ae(0x1a7)),_0x3daf36(_0x1f2d44,_0x16e9ae(0x1ca),_0x16e9ae(0x1ca),_0x16e9ae(0x1b4),_0x16e9ae(0x1fb)),_0x3daf36(_0x1f2d44,_0x16e9ae(0x1a5),'year',_0x16e9ae(0x200),'year'),_0x3daf36(_0x1f2d44,_0x16e9ae(0x1f0),_0x16e9ae(0x1f0),_0x16e9ae(0x200),_0x16e9ae(0x1b8));try{_0x1f2d44[_0x16e9ae(0x1f4)]&&(_0x1f2d44[_0x16e9ae(0x1f4)]=JSON[_0x16e9ae(0x1d0)](_0x1f2d44[_0x16e9ae(0x1f4)])),_0x3daf36(_0x1f2d44,'lyrics',_0x16e9ae(0x1f4),'','');}catch(_0x1a0d62){console[_0x16e9ae(0x1b5)](_0x1a0d62);}var _0x421263;_0x1f2d44[_0x16e9ae(0x1e7)]&&_0x1f2d44['picture'][_0x16e9ae(0x1b0)]&&(_0x421263=_0x1f2d44[_0x16e9ae(0x1e7)][_0x16e9ae(0x1b0)]);!_0x421263&&_0x1f2d44['APIC']&&_0x1f2d44[_0x16e9ae(0x1b7)][_0x16e9ae(0x1b0)]&&_0x1f2d44[_0x16e9ae(0x1b7)][_0x16e9ae(0x1b0)]['data']&&(_0x421263=_0x1f2d44[_0x16e9ae(0x1b7)][_0x16e9ae(0x1b0)][_0x16e9ae(0x1b0)]);let _0x50062f='';if(_0x421263){let _0x17580d=0x200;_0x50062f=config[_0x16e9ae(0x1e2)](_0x10df84,_0x17580d);let _0x5f2d5a=path['join'](path['dirname'](_0x50062f),_0x16e9ae(0x1fd)+path[_0x16e9ae(0x1ba)](_0x50062f));fs[_0x16e9ae(0x1cf)](_0x5f2d5a,Buffer['from'](_0x421263),{'encoding':_0x16e9ae(0x1f1)},function(_0x3310be){const _0x3a68d2=_0x16e9ae;_0x3310be?console[_0x3a68d2(0x1b5)](_0x3310be):sharpUtil[_0x3a68d2(0x1d4)](_0x5f2d5a,path[_0x3a68d2(0x1ea)](_0x50062f),path['basename'](_0x50062f),'image',null,_0x224b33=>{_0x10df84['coverPath']=_0x50062f,fs['rm'](_0x5f2d5a,_0x415b96=>{}),_0x154a80(_0x10df84);},_0x2c185a=>{_0x154a80(_0x10df84);},_0x17580d);});}else _0x154a80(_0x10df84);},'onError':function(_0x21f933){const _0x4623cf=_0x2d000c;console[_0x4623cf(0x1b5)](_0x21f933),_0x154a80(_0x10df84);}});},module[_0x55b40d(0x1e8)]=musicIndexUtil;