const _0x23a1bd=_0x3bc0;function _0x3bc0(_0x59bcd3,_0x1de82b){const _0x42f988=_0x42f9();return _0x3bc0=function(_0x3bc0c3,_0x1ae74e){_0x3bc0c3=_0x3bc0c3-0x64;let _0x1a1beb=_0x42f988[_0x3bc0c3];return _0x1a1beb;},_0x3bc0(_0x59bcd3,_0x1de82b);}function _0x42f9(){const _0x3f34a2=['proxy.frpcStartFail','ping_time','../../utils/i18nUtil','NasCabFrpWorker','nasRemoteEnable','token','parse','prepare','proxy_subdomain','\x0auser=\x22','then','value','toString','432735BiMeNO','type','tmp','pragma','148432rweraM','title','dbOther','proxy.noSubdomain','run','bandwidth','journal_mode\x20=\x20WAL','539714GoKhey','SIGTERM','proxy.timeout','\x20refused','create','apiBaseUrl','_id','account.onlyPtSupport','errMsg','cannot\x20find\x20the\x20file\x20specified','length','S_IXUSR','selected','better-sqlite3','userReqDns','../../db/dbConfigTable','code','start','success','existsSync','1908piAdVZ','path','tmp/proxy/tmp_crt','catch','start\x20proxy\x20success','\x22\x0ause_compression\x20=\x20true\x0ause_encryption\x20=\x20true\x0ameta_subdomain=','pid','log','reset','12bHymIe','stopped','611880JsfprV','\x20error','message：reset','indexOf','proxy.noLoginInfo','https://','数据输出','platform','netRate','lastIndexOf','nasRemoteState','TLS\x20handshake\x20error','远程代理停止','substring','message','proxy','unknown','validServer','proxyServerList','proxy.noExpress','getProxyServer','port','proxy.noUsableServer','axios','win32','promise','kill','stderr','exit','proxy.conSuc','nasAccountInfoPwd','operation\x20timed\x20out','error','nasAccountInfoConfigKey','userInfo','router\x20config\x20conflict','child_process','stdout','retry','../../express-server/utils/cryptoUtils','time','\x0aplugin_host_header_rewrite\x20=\x20127.0.0.1\x0aplugin_header_X-From-Where\x20=\x20NasCab\x0asubdomain\x20=\x20','crt','22768uceKll','vipInfo','alive','fail','findByTitle','\x0aplugin_key_path\x20=\x20\x20','post','spawn','proxy.frpcNoExist','join','constants','writeFileSync','nasZs987bac','context\x20canceled','proxyConfig','frpc\x20stopped','远程代理线程退出','\x0a[common]\x0aserver_addr\x20=\x20','205159zqWyNk','decryptString','show_name','user_count','415045PNqwBN','frpcPath','proxy.disable','userDataFolder','proxy.conFail','../../myConfig/config','\x0aplugin\x20=\x20https2http\x0aplugin_local_addr\x20=\x20127.0.0.1:','proxy.frpcStartFailWin','serverId','getI18n','key','close','.nas-cab.com','ping','msg','PING','stringify','正在连接远程代理,重试次数:','data','FRP\x20Connection\x20health\x20check\x20fail:','getTime','首选服务器','state','\x0asubdomain\x20=\x20','错误输出','-https]\x0atype\x20=\x20https\x0alocal_port\x20=\x20','REPLACE\x20INTO\x20process_record(process_id)\x20VALUES(?)'];_0x42f9=function(){return _0x3f34a2;};return _0x42f9();}(function(_0x69b2a2,_0x3b343e){const _0x440fc9=_0x3bc0,_0x4bcb44=_0x69b2a2();while(!![]){try{const _0x4ff086=-parseInt(_0x440fc9(0xd4))/0x1+-parseInt(_0x440fc9(0x71))/0x2+-parseInt(_0x440fc9(0x6d))/0x3+-parseInt(_0x440fc9(0x97))/0x4+-parseInt(_0x440fc9(0xd8))/0x5*(-parseInt(_0x440fc9(0x95))/0x6)+-parseInt(_0x440fc9(0x78))/0x7+-parseInt(_0x440fc9(0xc2))/0x8*(-parseInt(_0x440fc9(0x8c))/0x9);if(_0x4ff086===_0x3b343e)break;else _0x4bcb44['push'](_0x4bcb44['shift']());}catch(_0x3bb971){_0x4bcb44['push'](_0x4bcb44['shift']());}}}(_0x42f9,0x1c3de));let path=require(_0x23a1bd(0x8d)),fs=require('fs'),os=require('os'),child_process=require(_0x23a1bd(0xbb)),proxyProcess=null;const config=require(_0x23a1bd(0xdd)),Database=require(_0x23a1bd(0x85));let dbOther=new Database(config[_0x23a1bd(0x73)],{});dbOther[_0x23a1bd(0x70)](_0x23a1bd(0x77));let dbConfigTable=require(_0x23a1bd(0x87)),cryptoUtils=require(_0x23a1bd(0xbe)),axios=require(_0x23a1bd(0xae)),i18nUtil=require(_0x23a1bd(0xf5)),retryCount=0x0,maxRetryCount=0x9184e729fff,tmpPath,apiConfig,userToken,crtPath,keyPath,i18n;var ping=require(_0x23a1bd(0xe5));let isWin=os[_0x23a1bd(0x9e)]()==_0x23a1bd(0xaf),frpIsConnected=![],isWaittingTimeout=![];process[_0x23a1bd(0x72)]=_0x23a1bd(0xf6);const healthCheckGap=0x1e;let healthCheckInterval=null,healthCheckUrl='',healthCheckFailCount=0x0,maxhealthCheckFailCount=0x3;process['on'](_0x23a1bd(0xb3),()=>{const _0x18ee5d=_0x23a1bd;console[_0x18ee5d(0x93)](_0x18ee5d(0xd2)),stopProxy(),dbOther[_0x18ee5d(0xe3)]();}),process['on'](_0x23a1bd(0xa5),_0x1ab7ff=>{const _0x4324ae=_0x23a1bd;if(_0x1ab7ff[_0x4324ae(0x6e)]==_0x4324ae(0x89))console[_0x4324ae(0x93)]('message：start'),startProxy();else{if(_0x1ab7ff[_0x4324ae(0x6e)]=='stop')console['log']('message：stop'),stopProxy();else _0x1ab7ff[_0x4324ae(0x6e)]==_0x4324ae(0x94)&&(console[_0x4324ae(0x93)](_0x4324ae(0x99)),_0x1ab7ff['msg']&&_0x1ab7ff[_0x4324ae(0xe6)][_0x4324ae(0xe0)]?resetProxy(_0x1ab7ff[_0x4324ae(0xe6)]['serverId']):resetProxy());}});let stopProxy=function(){const _0x513d07=_0x23a1bd;proxyProcess&&(proxyProcess[_0x513d07(0xb1)](),console[_0x513d07(0x93)](_0x513d07(0xa3)),proxyProcess=null);};function saveNasProxyState(_0xb684f2,_0x579549,_0x1cb169){const _0x59bb96=_0x23a1bd;if(_0x1cb169)console[_0x59bb96(0x93)](_0x1cb169);dbConfigTable['create'](dbOther,{'title':_0x59bb96(0xa1),'value':JSON[_0x59bb96(0xe8)]({'status':_0xb684f2,'time':_0x579549,'error':_0x1cb169})});}let resetProxy=async function(_0x1b7d5b){retryCount=0x0,startProxy(_0x1b7d5b);},startProxy=async function(_0x28a082){const _0x251a7c=_0x23a1bd;i18n=i18nUtil[_0x251a7c(0xe1)](dbOther),stopProxy();let _0x4ff7ab=dbConfigTable[_0x251a7c(0xc6)](dbOther,_0x251a7c(0x64));if(!_0x4ff7ab||_0x4ff7ab&&_0x4ff7ab['value']!=0x1)return console[_0x251a7c(0x93)]('远程连接未启用'),saveNasProxyState(_0x251a7c(0xc5),new Date()[_0x251a7c(0xec)](),i18n['__'](_0x251a7c(0xda)));console[_0x251a7c(0x93)](_0x251a7c(0xe9),retryCount);let _0x59a2c5=dbConfigTable[_0x251a7c(0xc6)](dbOther,config[_0x251a7c(0xb8)]);if(!_0x59a2c5)return console[_0x251a7c(0x93)]('未登录\x20不连接内网穿透'),saveNasProxyState(_0x251a7c(0xc5),new Date()[_0x251a7c(0xec)](),i18n['__'](_0x251a7c(0x9b)));if(!fs[_0x251a7c(0x8b)](config[_0x251a7c(0xd9)]))return saveNasProxyState(_0x251a7c(0xc5),new Date()['getTime'](),i18n['__'](_0x251a7c(0xca)));retryCount+=0x1;if(retryCount>=maxRetryCount)return saveNasProxyState(_0x251a7c(0xc5),new Date()['getTime'](),i18n['__'](_0x251a7c(0xdc)));os[_0x251a7c(0x9e)]()!=_0x251a7c(0xaf)&&fs['chmodSync'](config[_0x251a7c(0xd9)],fs[_0x251a7c(0xcc)][_0x251a7c(0x83)]),cryptoUtils[_0x251a7c(0xd5)](config[_0x251a7c(0xb5)],_0x59a2c5[_0x251a7c(0x6b)])[_0x251a7c(0x6a)](_0x2140ea=>{const _0x12ea9f=_0x251a7c;let _0x5ee413=JSON[_0x12ea9f(0x66)](_0x2140ea),_0x3b24e5=_0x5ee413[_0x12ea9f(0xb9)],_0x3fe86e=_0x5ee413[_0x12ea9f(0xc3)];_0x3b24e5[_0x12ea9f(0x65)]&&_0x3b24e5[_0x12ea9f(0x65)][_0x12ea9f(0x82)]>0x0&&(userToken=_0x3b24e5[_0x12ea9f(0x65)][_0x3b24e5[_0x12ea9f(0x65)][_0x12ea9f(0x82)]-0x1]);if(!userToken)return saveNasProxyState(_0x12ea9f(0xc5),new Date()[_0x12ea9f(0xec)](),i18n['__'](_0x12ea9f(0x9b)));if(!_0x3fe86e)return saveNasProxyState(_0x12ea9f(0xc5),new Date()[_0x12ea9f(0xec)](),i18n['__']('proxy.isntVip'));if(_0x3fe86e[_0x12ea9f(0x6e)]<0x2)return saveNasProxyState(_0x12ea9f(0xc5),new Date()[_0x12ea9f(0xec)](),i18n['__'](_0x12ea9f(0x7f)));if(!_0x3fe86e[_0x12ea9f(0x68)])return saveNasProxyState('fail',new Date()[_0x12ea9f(0xec)](),i18n['__'](_0x12ea9f(0x74)));let _0x83cf4e=dbConfigTable[_0x12ea9f(0xc6)](dbOther,'apiServer');if(!_0x83cf4e)return saveNasProxyState('fail',new Date()['getTime'](),i18n['__']('proxy.noExpress'));apiConfig=JSON['parse'](_0x83cf4e['value']);if(!apiConfig[_0x12ea9f(0xac)]||apiConfig[_0x12ea9f(0xee)]!=_0x12ea9f(0x75))return saveNasProxyState(_0x12ea9f(0xc5),new Date()['getTime'](),i18n['__'](_0x12ea9f(0xaa)));let _0x26c7bd={'token':userToken,'type':_0x12ea9f(0xab)};axios[_0x12ea9f(0xc8)](config[_0x12ea9f(0x7d)]+_0x12ea9f(0xa6),_0x26c7bd)[_0x12ea9f(0x6a)](async _0x10a2fa=>{const _0x41cacc=_0x12ea9f;if(_0x10a2fa['data'][_0x41cacc(0x88)])return saveNasProxyState(_0x41cacc(0xc5),new Date()[_0x41cacc(0xec)](),_0x10a2fa[_0x41cacc(0xea)][_0x41cacc(0xe6)]?_0x10a2fa[_0x41cacc(0xea)]['msg']:i18n['__']('proxy.conFail'));else{let _0x150ef8=_0x10a2fa[_0x41cacc(0xea)][_0x41cacc(0xa8)],_0x5e47c4=null,_0x2464de=dbConfigTable[_0x41cacc(0xc6)](dbOther,_0x41cacc(0xa9));if(_0x2464de&&_0x2464de[_0x41cacc(0x6b)])try{_0x2464de=JSON[_0x41cacc(0x66)](_0x2464de[_0x41cacc(0x6b)]);for(let _0x5ecf3e=0x0;_0x5ecf3e<_0x150ef8[_0x41cacc(0x82)];_0x5ecf3e++){if(_0x28a082){if(_0x28a082==_0x150ef8[_0x5ecf3e][_0x41cacc(0x7e)]){_0x5e47c4=_0x150ef8[_0x5ecf3e];break;}}else for(let _0x15d973=0x0;_0x15d973<_0x2464de[_0x41cacc(0x82)];_0x15d973++){if(_0x2464de[_0x15d973][_0x41cacc(0x84)]&&_0x2464de[_0x15d973][_0x41cacc(0x7e)]==_0x150ef8[_0x5ecf3e][_0x41cacc(0x7e)]){_0x5e47c4=_0x150ef8[_0x5ecf3e];break;}}}}catch(_0x428cf4){console[_0x41cacc(0x93)](_0x428cf4);}testPing(_0x10a2fa[_0x41cacc(0xea)][_0x41cacc(0xa8)],_0x5e47c4?_0x5e47c4['_id']:null);}})[_0x12ea9f(0x8f)](_0x5777ad=>{const _0x18eaaf=_0x12ea9f;console[_0x18eaaf(0x93)](_0x5777ad);});})[_0x251a7c(0x8f)](_0x299098=>{console['log'](_0x299098);});};function userReqDns(_0x478b36,_0x23b1d2){const _0x539681=_0x23a1bd;tmpPath=path[_0x539681(0xcb)](config[_0x539681(0xdb)],_0x539681(0x6f),_0x539681(0xa6));!fs[_0x539681(0x8b)](tmpPath)&&fs['mkdirSync'](tmpPath,{'recursive':!![]});let _0x2c099e=0x1;crtPath=path[_0x539681(0xcb)](tmpPath,'tmp_crt'),keyPath=path[_0x539681(0xcb)](tmpPath,'tmp_key'),axios['post'](config[_0x539681(0x7d)]+_0x539681(0xa6),{'token':userToken,'type':_0x539681(0x86),'serverId':_0x23b1d2[_0x539681(0x7e)],'getKey':_0x2c099e})[_0x539681(0x6a)](async _0x41bf23=>{const _0x465ad7=_0x539681;if(_0x41bf23[_0x465ad7(0xea)][_0x465ad7(0x88)])return saveNasProxyState('fail',new Date()[_0x465ad7(0xec)](),_0x41bf23[_0x465ad7(0xea)]['msg']?_0x41bf23[_0x465ad7(0xea)][_0x465ad7(0xe6)]:i18n['__'](_0x465ad7(0xdc)));else{if(_0x2c099e==0x1){let _0x44619e=await cryptoUtils[_0x465ad7(0xd5)]('nasZs987bac',_0x41bf23[_0x465ad7(0xea)][_0x465ad7(0xc1)]),_0x311044=await cryptoUtils['decryptString'](_0x465ad7(0xce),_0x41bf23[_0x465ad7(0xea)][_0x465ad7(0xe2)]);fs['writeFileSync'](crtPath,_0x44619e),fs[_0x465ad7(0xcd)](keyPath,_0x311044);}connectProxy(_0x478b36,_0x23b1d2);}})[_0x539681(0x8f)](_0x4e2d6f=>{const _0x1a9645=_0x539681;console[_0x1a9645(0x93)](_0x4e2d6f);});}function testPing(_0x42222f,_0x4e7288){const _0xefbef3=_0x23a1bd;if(_0x42222f[_0xefbef3(0x82)]<0x1)return saveNasProxyState('fail',new Date()[_0xefbef3(0xec)](),i18n['__'](_0xefbef3(0xad)));let _0x3d500d=0x0,_0x4db185=null;function _0x5d7429(){const _0x27ef49=_0xefbef3;if(_0x3d500d>=_0x42222f[_0x27ef49(0x82)]){for(let _0x1dae63 of _0x42222f){if(_0x4e7288&&_0x4e7288==_0x1dae63['_id']&&_0x1dae63[_0x27ef49(0xc4)]){_0x4db185=_0x1dae63,console[_0x27ef49(0x93)](_0x27ef49(0xed),_0x4db185[_0x27ef49(0xd6)]);break;}if(_0x1dae63['alive']&&_0x1dae63[_0x27ef49(0xf4)]&&_0x1dae63[_0x27ef49(0xf4)]!=_0x27ef49(0xa7)){if(_0x4db185==null)_0x4db185=_0x1dae63;else _0x4db185[_0x27ef49(0xf4)]*_0x4db185['netRate']>_0x1dae63[_0x27ef49(0xf4)]*_0x1dae63[_0x27ef49(0x9f)]&&(_0x4db185=_0x1dae63);}}if(!_0x4db185)return saveNasProxyState(_0x27ef49(0xc5),new Date()[_0x27ef49(0xec)](),i18n['__'](_0x27ef49(0xad)));userReqDns(_0x42222f,_0x4db185);}}for(let _0x3be298 of _0x42222f){let _0x5394a8=0x1;if(!_0x3be298[_0xefbef3(0xd7)]||!_0x3be298['server_bandwidth'])_0x5394a8=0x1;else try{_0x5394a8=parseInt(_0x3be298[_0xefbef3(0xd7)])/parseInt(_0x3be298['server_bandwidth']);}catch(_0xa73192){console[_0xefbef3(0x93)](_0xa73192);}_0x3be298[_0xefbef3(0x9f)]=_0x5394a8;}for(let _0xd7219e of _0x42222f){ping[_0xefbef3(0xb0)]['probe'](_0xd7219e['ip'],{'timeout':0x14})[_0xefbef3(0x6a)](function(_0x564360){const _0x2ef0b9=_0xefbef3;_0x3d500d+=0x1,_0xd7219e[_0x2ef0b9(0xc4)]=_0x564360[_0x2ef0b9(0xc4)],_0xd7219e[_0x2ef0b9(0xf4)]=_0x564360['time'],_0x5d7429(),console['log'](_0x2ef0b9(0xe7),_0xd7219e['ip'],_0x564360['alive'],_0x564360[_0x2ef0b9(0xbf)]?_0x564360[_0x2ef0b9(0xbf)]:'\x20TIMEOUT');})[_0xefbef3(0x8f)](_0x5d38af=>{const _0x1f269f=_0xefbef3;_0x3d500d+=0x1,_0xd7219e['alive']=![],_0xd7219e[_0x1f269f(0xf4)]=0x1869f,console[_0x1f269f(0x93)](_0x1f269f(0xe7),_0xd7219e['ip'],'\x20TIMEOUT'),_0x5d7429();});}}function setHealthCheckInterval(){healthCheckInterval&&clearInterval(healthCheckInterval),healthCheckInterval=setInterval(()=>{proxyProcess==null?startProxy():checkFrpConnectHealth();},healthCheckGap*0x3e8);}function tryRestartFrpc(){if(isWaittingTimeout)return;setTimeout(()=>{isWaittingTimeout=![],!frpIsConnected&&startProxy();},0x2710);}function checkFrpConnectHealth(){const _0x12276a=_0x23a1bd;axios[_0x12276a(0xc8)](healthCheckUrl+'/api/healthCheck',{'timeout':0x3a98})[_0x12276a(0x6a)](async _0x17818d=>{const _0x5bde80=_0x12276a;_0x17818d[_0x5bde80(0xea)]['code']?(healthCheckFailCount+=0x1,console['log'](_0x5bde80(0xeb),healthCheckFailCount),healthCheckFailCount>maxhealthCheckFailCount&&(healthCheckFailCount=0x0,startProxy())):healthCheckFailCount=0x0;})[_0x12276a(0x8f)](_0x2666eb=>{const _0x3693f6=_0x12276a;healthCheckFailCount+=0x1,console[_0x3693f6(0x93)](_0x3693f6(0xeb),healthCheckFailCount),healthCheckFailCount>maxhealthCheckFailCount&&(healthCheckFailCount=0x0,startProxy());});}async function connectProxy(_0x2f2717,_0x51aee4){const _0x2628ad=_0x23a1bd;for(let _0x254c50 of _0x2f2717){_0x254c50['_id']==_0x51aee4['_id']?_0x254c50[_0x2628ad(0x84)]=!![]:_0x254c50[_0x2628ad(0x84)]=![];}dbConfigTable[_0x2628ad(0x7c)](dbOther,{'title':'proxyServerList','value':JSON[_0x2628ad(0xe8)](_0x2f2717)}),console[_0x2628ad(0x93)]('已选代理服务器',_0x51aee4['ip']);let _0x11d8be=apiConfig['port'],_0x136345=_0x51aee4['port'],_0x492430=_0x51aee4['proxy_subdomain'],_0x1e5f6c=path['join'](tmpPath,_0x2628ad(0xd0));healthCheckUrl=_0x2628ad(0x9c)+_0x492430+_0x2628ad(0xe4);let _0x2f5ca0=_0x2628ad(0xd3)+_0x51aee4['ip']+'\x0aserver_port\x20=\x20'+_0x136345+_0x2628ad(0x69)+userToken+_0x2628ad(0x91)+_0x492430+_0x2628ad(0xef)+_0x492430+'\x0apool_count\x20=\x201\x0atcp_mux\x20=\x20true\x0a\x0a['+_0x492430+_0x2628ad(0xf1)+_0x11d8be+_0x2628ad(0xde)+_0x11d8be+'\x0aplugin_crt_path\x20=\x20'+crtPath+_0x2628ad(0xc7)+keyPath+_0x2628ad(0xc0)+_0x492430+'\x0ause_compression\x20=\x20true\x0ause_encryption\x20=\x20true\x0abandwidth_limit\x20=\x20'+_0x51aee4[_0x2628ad(0x76)]+'\x0a';fs['writeFile'](_0x1e5f6c,_0x2f5ca0,()=>{const _0xc20d70=_0x2628ad;try{proxyProcess!=null&&proxyProcess[_0xc20d70(0xb1)](),proxyProcess=child_process[_0xc20d70(0xc9)](''+config[_0xc20d70(0xd9)],['-c',_0x1e5f6c],{'detached':![],'killSignal':_0xc20d70(0x79)}),proxyProcess['on'](_0xc20d70(0xb7),function(_0x1656f7){const _0x42b9d1=_0xc20d70;return console['log']('frpc\x20process\x20error',_0x1656f7),saveNasProxyState(_0x42b9d1(0xc5),new Date()[_0x42b9d1(0xec)](),isWin?i18n['__']('proxy.frpcStartFailWin'):i18n['__'](_0x42b9d1(0xf3)));});}catch(_0x1c9354){return console['log'](_0x1c9354),saveNasProxyState(_0xc20d70(0xc5),new Date()[_0xc20d70(0xec)](),isWin?i18n['__'](_0xc20d70(0xdf)):i18n['__']('proxy.frpcStartFail'));}proxyProcess[_0xc20d70(0xbc)]['on'](_0xc20d70(0xea),_0xff1393=>{const _0x3a1cb9=_0xc20d70;let _0x57d108=_0xff1393[_0x3a1cb9(0x6c)]();console[_0x3a1cb9(0x93)](_0x3a1cb9(0x9d),_0x57d108);if(_0x57d108[_0x3a1cb9(0x9a)](_0x3a1cb9(0xba))!=-0x1)console[_0x3a1cb9(0x93)]('子域名冲突'),frpIsConnected=!![],setHealthCheckInterval(),saveNasProxyState(_0x3a1cb9(0x8a),new Date()[_0x3a1cb9(0xec)](),i18n['__'](_0x3a1cb9(0xb4)));else{if(_0x57d108['indexOf'](_0x3a1cb9(0x81))!=-0x1)startProxy();else{if(_0x57d108[_0x3a1cb9(0x9a)](_0x3a1cb9(0x98))!=-0x1||_0x57d108[_0x3a1cb9(0x9a)](_0x3a1cb9(0x7b))!=-0x1){frpIsConnected=![];if(isWaittingTimeout)return;isWaittingTimeout=!![],setTimeout(()=>{const _0x5680a8=_0x3a1cb9;isWaittingTimeout=![],!frpIsConnected&&_0x57d108[_0x5680a8(0x9a)](_0x5680a8(0xbd))!=-0x1&&(console[_0x5680a8(0x93)]('---Connection\x20error\x20，\x20reconnecting\x20frpc---',_0x57d108),startProxy());},0x4e20);}else{if(_0x57d108[_0x3a1cb9(0x9a)]('invalid\x20user')!=-0x1){console[_0x3a1cb9(0x93)](_0x3a1cb9(0x80),_0x57d108);var _0x33319c=_0x57d108[_0x3a1cb9(0xa0)]('invalid\x20user');let _0x23306d=_0x57d108[_0x3a1cb9(0xa4)](_0x33319c,_0x57d108[_0x3a1cb9(0x82)]);saveNasProxyState(_0x3a1cb9(0xc5),new Date()['getTime'](),_0x23306d);}else{if(_0x57d108['indexOf'](_0x3a1cb9(0x90))!=-0x1)frpIsConnected=!![],retryCount=0x0,console[_0x3a1cb9(0x93)]('FRP\x20Connected'),saveNasProxyState(_0x3a1cb9(0x8a),new Date()[_0x3a1cb9(0xec)](),i18n['__']('proxy.conSuc')),dbOther[_0x3a1cb9(0x67)](_0x3a1cb9(0xf2))[_0x3a1cb9(0x75)](proxyProcess[_0x3a1cb9(0x92)]+''),fs['rm'](crtPath,()=>{}),fs['rm'](keyPath,()=>{}),fs['rm'](_0x1e5f6c,()=>{}),setHealthCheckInterval();else{if(_0x57d108['indexOf'](_0x3a1cb9(0xb6))!=-0x1)saveNasProxyState(_0x3a1cb9(0xc5),new Date()[_0x3a1cb9(0xec)](),i18n['__'](_0x3a1cb9(0x7a)));else{if(_0x57d108[_0x3a1cb9(0x9a)](_0x3a1cb9(0x96))!=-0x1)saveNasProxyState(_0x3a1cb9(0xc5),new Date()['getTime'](),i18n['__'](_0x3a1cb9(0x96))),tryRestartFrpc();else _0x57d108[_0x3a1cb9(0x9a)](_0x3a1cb9(0x8e))!=-0x1&&tryRestartFrpc();}}}}}}}),proxyProcess[_0xc20d70(0xb2)]['on'](_0xc20d70(0xea),_0x444099=>{const _0xa19906=_0xc20d70;let _0x5ee898=_0x444099[_0xa19906(0x6c)]();console[_0xa19906(0x93)](_0xa19906(0xf0),_0x5ee898),_0x5ee898[_0xa19906(0x9a)]('wsarecv')==-0x1&&_0x5ee898[_0xa19906(0x9a)](_0xa19906(0xcf))==-0x1&&_0x5ee898[_0xa19906(0x9a)](_0xa19906(0xa2))==-0x1&&(frpIsConnected=![]),tryRestartFrpc();}),proxyProcess['on'](_0xc20d70(0xe3),_0x51b6c7=>{const _0x2e9935=_0xc20d70;console[_0x2e9935(0x93)](_0x2e9935(0xd1)),frpIsConnected=![],stopProxy();});});}