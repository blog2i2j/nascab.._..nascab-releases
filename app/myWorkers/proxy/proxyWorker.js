const _0x40c068=_0x125c;(function(_0x3c3366,_0x14ef4a){const _0x8ff178=_0x125c,_0x3139e5=_0x3c3366();while(!![]){try{const _0x4c0627=parseInt(_0x8ff178(0x23c))/0x1*(-parseInt(_0x8ff178(0x246))/0x2)+parseInt(_0x8ff178(0x25a))/0x3+parseInt(_0x8ff178(0x26a))/0x4*(parseInt(_0x8ff178(0x211))/0x5)+-parseInt(_0x8ff178(0x236))/0x6+-parseInt(_0x8ff178(0x20a))/0x7*(-parseInt(_0x8ff178(0x20e))/0x8)+-parseInt(_0x8ff178(0x226))/0x9*(-parseInt(_0x8ff178(0x1e9))/0xa)+parseInt(_0x8ff178(0x26d))/0xb;if(_0x4c0627===_0x14ef4a)break;else _0x3139e5['push'](_0x3139e5['shift']());}catch(_0x40d25b){_0x3139e5['push'](_0x3139e5['shift']());}}}(_0x448f,0x23786));let path=require(_0x40c068(0x254)),fs=require('fs'),os=require('os'),child_process=require(_0x40c068(0x237)),proxyProcess=null;const config=require('../../myConfig/config'),Database=require(_0x40c068(0x23e));let dbOther=new Database(config[_0x40c068(0x230)],{});dbOther['pragma'](_0x40c068(0x26c));let dbConfigTable=require(_0x40c068(0x26e)),cryptoUtils=require(_0x40c068(0x1fe)),axios=require(_0x40c068(0x216)),i18nUtil=require(_0x40c068(0x264)),retryCount=0x0,maxRetryCount=0x9184e729fff,tmpPath,apiConfig,userToken,crtPath,keyPath,i18n;var ping=require(_0x40c068(0x25e));let isWin=os['platform']()==_0x40c068(0x249),frpIsConnected=![],isWaittingTimeout=![];function _0x448f(){const _0x529f4b=['\x22\x0ause_compression\x20=\x20true\x0ause_encryption\x20=\x20true\x0ameta_subdomain=','远程代理线程退出','stop','server_bandwidth','message：reset','code','未登录\x20不连接内网穿透','then','data','length','decryptString','reset','../../express-server/utils/cryptoUtils','lastIndexOf','type','frpc\x20stopped','userInfo','\x0aplugin_host_header_rewrite\x20=\x20127.0.0.1\x0aplugin_header_X-From-Where\x20=\x20NasCab\x0asubdomain\x20=\x20','proxy.isntVip','success','\x0asubdomain\x20=\x20','\x0auser=\x22','\x20refused','proxy.frpcStartFailWin','7KvHtOX','\x0a[common]\x0aserver_addr\x20=\x20','子域名冲突','token','1817016fIELQM','proxy.noSubdomain','mkdirSync','5qLAAJX','join','fail','prepare','---Connection\x20error\x20，\x20reconnecting\x20frpc---','axios','message','spawn','state','kill','writeFileSync','\x20TIMEOUT','stopped','nasZs987bac','\x0aplugin\x20=\x20https2http\x0aplugin_local_addr\x20=\x20127.0.0.1:','run','start\x20proxy\x20success','ping_time','findByTitle','nasAccountInfoConfigKey','serverId','351mlTIaa','wsarecv','proxy.disable','invalid\x20user','alive','router\x20config\x20conflict','stderr','nasRemoteEnable','post','apiServer','dbOther','log','pid','首选服务器','parse','toString','1551894MJbbpd','child_process','crt','https://','unknown','\x0ause_compression\x20=\x20true\x0ause_encryption\x20=\x20true\x0abandwidth_limit\x20=\x20','83332aLRzlf','proxyServerList','better-sqlite3','_id','writeFile','FRP\x20Connected','proxy_subdomain','probe','getI18n','frpc\x20process\x20error','4eUudzA','proxy.conFail','title','win32','错误输出','netRate','远程连接未启用','proxy.noUsableServer','nasRemoteState','远程代理停止','value','indexOf','proxy.conSuc','tmp','path','promise','exit','proxy.frpcNoExist','existsSync','数据输出','114123glNzeT','stdout','\x0aplugin_crt_path\x20=\x20','vipInfo','ping','NasCabFrpWorker','port','account.onlyPtSupport','proxy.timeout','show_name','../../utils/i18nUtil','proxy.frpcStartFail','TLS\x20handshake\x20error','FRP\x20Connection\x20health\x20check\x20fail:','userReqDns','proxyConfig','39156CukJdL','catch','journal_mode\x20=\x20WAL','2776301yzleUx','../../db/dbConfigTable','getProxyServer','apiBaseUrl','proxy.noExpress','message：stop','start','.nas-cab.com','selected','tmp_crt','substring','getTime','/api/healthCheck','create','tmp/proxy/tmp_crt','msg','11090FcefNU','proxy','context\x20canceled','key','frpcPath','-https]\x0atype\x20=\x20https\x0alocal_port\x20=\x20','tmp_key','proxy.noLoginInfo','time'];_0x448f=function(){return _0x529f4b;};return _0x448f();}process[_0x40c068(0x248)]=_0x40c068(0x25f);const healthCheckGap=0x1e;let healthCheckInterval=null,healthCheckUrl='',healthCheckFailCount=0x0,maxhealthCheckFailCount=0x3;process['on'](_0x40c068(0x256),()=>{const _0x3aeb62=_0x40c068;console[_0x3aeb62(0x231)](_0x3aeb62(0x1f3)),stopProxy(),dbOther['close']();}),process['on'](_0x40c068(0x217),_0x5f417a=>{const _0x1c46ce=_0x40c068;if(_0x5f417a['type']==_0x1c46ce(0x1df))console[_0x1c46ce(0x231)]('message：start'),startProxy();else{if(_0x5f417a[_0x1c46ce(0x200)]==_0x1c46ce(0x1f4))console[_0x1c46ce(0x231)](_0x1c46ce(0x1de)),stopProxy();else _0x5f417a[_0x1c46ce(0x200)]==_0x1c46ce(0x1fd)&&(console['log'](_0x1c46ce(0x1f6)),_0x5f417a[_0x1c46ce(0x1e8)]&&_0x5f417a[_0x1c46ce(0x1e8)]['serverId']?resetProxy(_0x5f417a[_0x1c46ce(0x1e8)][_0x1c46ce(0x225)]):resetProxy());}});let stopProxy=function(){const _0xbb01b0=_0x40c068;proxyProcess&&(proxyProcess['kill'](),console[_0xbb01b0(0x231)](_0xbb01b0(0x24f)),proxyProcess=null);};function saveNasProxyState(_0x11ecf3,_0x37085f,_0x183d2a){const _0x2d23ab=_0x40c068;if(_0x183d2a)console[_0x2d23ab(0x231)](_0x183d2a);dbConfigTable[_0x2d23ab(0x1e6)](dbOther,{'title':_0x2d23ab(0x24e),'value':JSON['stringify']({'status':_0x11ecf3,'time':_0x37085f,'error':_0x183d2a})});}let resetProxy=async function(_0x4630bb){retryCount=0x0,startProxy(_0x4630bb);},startProxy=async function(_0x5786e8){const _0x351297=_0x40c068;i18n=i18nUtil[_0x351297(0x244)](dbOther),stopProxy();let _0x2de925=dbConfigTable[_0x351297(0x223)](dbOther,_0x351297(0x22d));if(!_0x2de925||_0x2de925&&_0x2de925['value']!=0x1)return console[_0x351297(0x231)](_0x351297(0x24c)),saveNasProxyState('fail',new Date()[_0x351297(0x1e4)](),i18n['__'](_0x351297(0x228)));console['log']('正在连接远程代理,重试次数:',retryCount);let _0x2783b3=dbConfigTable[_0x351297(0x223)](dbOther,config[_0x351297(0x224)]);if(!_0x2783b3)return console[_0x351297(0x231)](_0x351297(0x1f8)),saveNasProxyState('fail',new Date()[_0x351297(0x1e4)](),i18n['__'](_0x351297(0x1f0)));if(!fs[_0x351297(0x258)](config[_0x351297(0x1ed)]))return saveNasProxyState('fail',new Date()[_0x351297(0x1e4)](),i18n['__'](_0x351297(0x257)));retryCount+=0x1;if(retryCount>=maxRetryCount)return saveNasProxyState(_0x351297(0x213),new Date()[_0x351297(0x1e4)](),i18n['__']('proxy.conFail'));os['platform']()!=_0x351297(0x249)&&fs['chmodSync'](config[_0x351297(0x1ed)],'777'),cryptoUtils['decryptString'](config['nasAccountInfoPwd'],_0x2783b3[_0x351297(0x250)])[_0x351297(0x1f9)](_0x59af29=>{const _0x5d16f4=_0x351297;let _0x44bc88=JSON['parse'](_0x59af29),_0x154093=_0x44bc88[_0x5d16f4(0x202)],_0x8984=_0x44bc88[_0x5d16f4(0x25d)];_0x154093[_0x5d16f4(0x20d)]&&_0x154093[_0x5d16f4(0x20d)][_0x5d16f4(0x1fb)]>0x0&&(userToken=_0x154093[_0x5d16f4(0x20d)][_0x154093[_0x5d16f4(0x20d)][_0x5d16f4(0x1fb)]-0x1]);if(!userToken)return saveNasProxyState(_0x5d16f4(0x213),new Date()[_0x5d16f4(0x1e4)](),i18n['__'](_0x5d16f4(0x1f0)));if(!_0x8984)return saveNasProxyState(_0x5d16f4(0x213),new Date()[_0x5d16f4(0x1e4)](),i18n['__'](_0x5d16f4(0x204)));if(_0x8984['type']<0x2)return saveNasProxyState(_0x5d16f4(0x213),new Date()[_0x5d16f4(0x1e4)](),i18n['__'](_0x5d16f4(0x261)));if(!_0x8984[_0x5d16f4(0x242)])return saveNasProxyState(_0x5d16f4(0x213),new Date()['getTime'](),i18n['__'](_0x5d16f4(0x20f)));let _0x50a624=dbConfigTable[_0x5d16f4(0x223)](dbOther,_0x5d16f4(0x22f));if(!_0x50a624)return saveNasProxyState(_0x5d16f4(0x213),new Date()['getTime'](),i18n['__'](_0x5d16f4(0x1dd)));apiConfig=JSON[_0x5d16f4(0x234)](_0x50a624[_0x5d16f4(0x250)]);if(!apiConfig[_0x5d16f4(0x260)]||apiConfig[_0x5d16f4(0x219)]!=_0x5d16f4(0x220))return saveNasProxyState(_0x5d16f4(0x213),new Date()['getTime'](),i18n['__']('proxy.noExpress'));let _0x551072={'token':userToken,'type':_0x5d16f4(0x1db)};axios[_0x5d16f4(0x22e)](config['apiBaseUrl']+_0x5d16f4(0x1ea),_0x551072)[_0x5d16f4(0x1f9)](async _0x2f878a=>{const _0x41a03b=_0x5d16f4;if(_0x2f878a['data']['code'])return saveNasProxyState('fail',new Date()[_0x41a03b(0x1e4)](),_0x2f878a[_0x41a03b(0x1fa)]['msg']?_0x2f878a[_0x41a03b(0x1fa)]['msg']:i18n['__'](_0x41a03b(0x247)));else{let _0x32631e=_0x2f878a[_0x41a03b(0x1fa)]['validServer'],_0x5ca861=null,_0x58fd79=dbConfigTable[_0x41a03b(0x223)](dbOther,'proxyServerList');if(_0x58fd79&&_0x58fd79[_0x41a03b(0x250)])try{_0x58fd79=JSON[_0x41a03b(0x234)](_0x58fd79[_0x41a03b(0x250)]);for(let _0xd00580=0x0;_0xd00580<_0x32631e[_0x41a03b(0x1fb)];_0xd00580++){if(_0x5786e8){if(_0x5786e8==_0x32631e[_0xd00580][_0x41a03b(0x23f)]){_0x5ca861=_0x32631e[_0xd00580];break;}}else for(let _0x18da73=0x0;_0x18da73<_0x58fd79['length'];_0x18da73++){if(_0x58fd79[_0x18da73][_0x41a03b(0x1e1)]&&_0x58fd79[_0x18da73]['_id']==_0x32631e[_0xd00580][_0x41a03b(0x23f)]){_0x5ca861=_0x32631e[_0xd00580];break;}}}}catch(_0x21193b){console[_0x41a03b(0x231)](_0x21193b);}testPing(_0x2f878a[_0x41a03b(0x1fa)]['validServer'],_0x5ca861?_0x5ca861['_id']:null);}})[_0x5d16f4(0x26b)](_0x2f9f80=>{const _0x1c3fa2=_0x5d16f4;console[_0x1c3fa2(0x231)](_0x2f9f80);});})[_0x351297(0x26b)](_0xd1ebd0=>{const _0x440bdd=_0x351297;console[_0x440bdd(0x231)](_0xd1ebd0);});};function userReqDns(_0x3c71b6,_0x5b8031){const _0x22272e=_0x40c068;tmpPath=path[_0x22272e(0x212)](config['userDataFolder'],_0x22272e(0x253),_0x22272e(0x1ea));!fs[_0x22272e(0x258)](tmpPath)&&fs[_0x22272e(0x210)](tmpPath,{'recursive':!![]});let _0x5394bd=0x1;crtPath=path[_0x22272e(0x212)](tmpPath,_0x22272e(0x1e2)),keyPath=path[_0x22272e(0x212)](tmpPath,_0x22272e(0x1ef)),axios[_0x22272e(0x22e)](config[_0x22272e(0x1dc)]+_0x22272e(0x1ea),{'token':userToken,'type':_0x22272e(0x268),'serverId':_0x5b8031[_0x22272e(0x23f)],'getKey':_0x5394bd})['then'](async _0x54797c=>{const _0x375cc5=_0x22272e;if(_0x54797c[_0x375cc5(0x1fa)][_0x375cc5(0x1f7)])return saveNasProxyState(_0x375cc5(0x213),new Date()[_0x375cc5(0x1e4)](),_0x54797c[_0x375cc5(0x1fa)][_0x375cc5(0x1e8)]?_0x54797c[_0x375cc5(0x1fa)][_0x375cc5(0x1e8)]:i18n['__'](_0x375cc5(0x247)));else{if(_0x5394bd==0x1){let _0x25b34d=await cryptoUtils['decryptString'](_0x375cc5(0x21e),_0x54797c[_0x375cc5(0x1fa)][_0x375cc5(0x238)]),_0x4a6645=await cryptoUtils[_0x375cc5(0x1fc)](_0x375cc5(0x21e),_0x54797c['data'][_0x375cc5(0x1ec)]);fs[_0x375cc5(0x21b)](crtPath,_0x25b34d),fs['writeFileSync'](keyPath,_0x4a6645);}connectProxy(_0x3c71b6,_0x5b8031);}})['catch'](_0x30cd57=>{const _0xde206a=_0x22272e;console[_0xde206a(0x231)](_0x30cd57);});}function testPing(_0xcc4cac,_0x2f8ed4){const _0x4da53d=_0x40c068;if(_0xcc4cac[_0x4da53d(0x1fb)]<0x1)return saveNasProxyState(_0x4da53d(0x213),new Date()[_0x4da53d(0x1e4)](),i18n['__'](_0x4da53d(0x24d)));let _0x33b311=0x0,_0xa46504=null;function _0xce845d(){const _0x13e787=_0x4da53d;if(_0x33b311>=_0xcc4cac[_0x13e787(0x1fb)]){for(let _0x5c4254 of _0xcc4cac){if(_0x2f8ed4&&_0x2f8ed4==_0x5c4254[_0x13e787(0x23f)]&&_0x5c4254[_0x13e787(0x22a)]){_0xa46504=_0x5c4254,console[_0x13e787(0x231)](_0x13e787(0x233),_0xa46504[_0x13e787(0x263)]);break;}if(_0x5c4254[_0x13e787(0x22a)]&&_0x5c4254[_0x13e787(0x222)]&&_0x5c4254['ping_time']!=_0x13e787(0x23a)){if(_0xa46504==null)_0xa46504=_0x5c4254;else _0xa46504['ping_time']*_0xa46504['netRate']>_0x5c4254[_0x13e787(0x222)]*_0x5c4254[_0x13e787(0x24b)]&&(_0xa46504=_0x5c4254);}}if(!_0xa46504)return saveNasProxyState(_0x13e787(0x213),new Date()[_0x13e787(0x1e4)](),i18n['__'](_0x13e787(0x24d)));userReqDns(_0xcc4cac,_0xa46504);}}for(let _0x264b3c of _0xcc4cac){let _0x36ccd9=0x1;if(!_0x264b3c['user_count']||!_0x264b3c[_0x4da53d(0x1f5)])_0x36ccd9=0x1;else try{_0x36ccd9=parseInt(_0x264b3c['user_count'])/parseInt(_0x264b3c[_0x4da53d(0x1f5)]);}catch(_0x2d6966){console[_0x4da53d(0x231)](_0x2d6966);}_0x264b3c[_0x4da53d(0x24b)]=_0x36ccd9;}for(let _0x5c1829 of _0xcc4cac){ping[_0x4da53d(0x255)][_0x4da53d(0x243)](_0x5c1829['ip'],{'timeout':0x14})[_0x4da53d(0x1f9)](function(_0x25e619){const _0x4311b0=_0x4da53d;_0x33b311+=0x1,_0x5c1829[_0x4311b0(0x22a)]=_0x25e619[_0x4311b0(0x22a)],_0x5c1829['ping_time']=_0x25e619[_0x4311b0(0x1f1)],_0xce845d(),console[_0x4311b0(0x231)]('PING',_0x5c1829['ip'],_0x25e619[_0x4311b0(0x22a)],_0x25e619[_0x4311b0(0x1f1)]?_0x25e619['time']:_0x4311b0(0x21c));})[_0x4da53d(0x26b)](_0x5de4dd=>{const _0x45b5cf=_0x4da53d;_0x33b311+=0x1,_0x5c1829[_0x45b5cf(0x22a)]=![],_0x5c1829[_0x45b5cf(0x222)]=0x1869f,console[_0x45b5cf(0x231)]('PING',_0x5c1829['ip'],_0x45b5cf(0x21c)),_0xce845d();});}}function setHealthCheckInterval(){healthCheckInterval&&clearInterval(healthCheckInterval),healthCheckInterval=setInterval(()=>{proxyProcess==null?startProxy():checkFrpConnectHealth();},healthCheckGap*0x3e8);}function tryRestartFrpc(){if(isWaittingTimeout)return;setTimeout(()=>{isWaittingTimeout=![],!frpIsConnected&&startProxy();},0x2710);}function _0x125c(_0x3cb29b,_0x3e5f5a){const _0x448f86=_0x448f();return _0x125c=function(_0x125ce0,_0x139ac0){_0x125ce0=_0x125ce0-0x1db;let _0x3c2d83=_0x448f86[_0x125ce0];return _0x3c2d83;},_0x125c(_0x3cb29b,_0x3e5f5a);}function checkFrpConnectHealth(){const _0x4a5f21=_0x40c068;axios[_0x4a5f21(0x22e)](healthCheckUrl+_0x4a5f21(0x1e5),{'timeout':0x3a98})['then'](async _0x39ac44=>{const _0x89fbe5=_0x4a5f21;_0x39ac44[_0x89fbe5(0x1fa)]['code']?(healthCheckFailCount+=0x1,console[_0x89fbe5(0x231)](_0x89fbe5(0x267),healthCheckFailCount),healthCheckFailCount>maxhealthCheckFailCount&&(healthCheckFailCount=0x0,startProxy())):healthCheckFailCount=0x0;})[_0x4a5f21(0x26b)](_0x25c361=>{const _0x192d1c=_0x4a5f21;healthCheckFailCount+=0x1,console[_0x192d1c(0x231)]('FRP\x20Connection\x20health\x20check\x20fail:',healthCheckFailCount),healthCheckFailCount>maxhealthCheckFailCount&&(healthCheckFailCount=0x0,startProxy());});}async function connectProxy(_0x2f4388,_0x355b26){const _0x2d61ba=_0x40c068;for(let _0x3fe511 of _0x2f4388){_0x3fe511[_0x2d61ba(0x23f)]==_0x355b26['_id']?_0x3fe511['selected']=!![]:_0x3fe511[_0x2d61ba(0x1e1)]=![];}dbConfigTable[_0x2d61ba(0x1e6)](dbOther,{'title':_0x2d61ba(0x23d),'value':JSON['stringify'](_0x2f4388)}),console[_0x2d61ba(0x231)]('已选代理服务器',_0x355b26['ip']);let _0x181df5=apiConfig['port'],_0xd2a21d=_0x355b26['port'],_0x4a19b5=_0x355b26['proxy_subdomain'],_0x249f3c=path[_0x2d61ba(0x212)](tmpPath,_0x2d61ba(0x269));healthCheckUrl=_0x2d61ba(0x239)+_0x4a19b5+_0x2d61ba(0x1e0);let _0x145c4e=_0x2d61ba(0x20b)+_0x355b26['ip']+'\x0aserver_port\x20=\x20'+_0xd2a21d+_0x2d61ba(0x207)+userToken+_0x2d61ba(0x1f2)+_0x4a19b5+_0x2d61ba(0x206)+_0x4a19b5+'\x0apool_count\x20=\x201\x0atcp_mux\x20=\x20true\x0a\x0a['+_0x4a19b5+_0x2d61ba(0x1ee)+_0x181df5+_0x2d61ba(0x21f)+_0x181df5+_0x2d61ba(0x25c)+crtPath+'\x0aplugin_key_path\x20=\x20\x20'+keyPath+_0x2d61ba(0x203)+_0x4a19b5+_0x2d61ba(0x23b)+_0x355b26['bandwidth']+'\x0a';fs[_0x2d61ba(0x240)](_0x249f3c,_0x145c4e,()=>{const _0x4671e7=_0x2d61ba;try{proxyProcess!=null&&proxyProcess[_0x4671e7(0x21a)](),proxyProcess=child_process[_0x4671e7(0x218)](''+config['frpcPath'],['-c',_0x249f3c],{'detached':![],'killSignal':'SIGTERM'}),proxyProcess['on']('error',function(_0x1b3e66){const _0x38419e=_0x4671e7;return console[_0x38419e(0x231)](_0x38419e(0x245),_0x1b3e66),saveNasProxyState(_0x38419e(0x213),new Date()[_0x38419e(0x1e4)](),isWin?i18n['__'](_0x38419e(0x209)):i18n['__']('proxy.frpcStartFail'));});}catch(_0xd723d3){return console['log'](_0xd723d3),saveNasProxyState(_0x4671e7(0x213),new Date()[_0x4671e7(0x1e4)](),isWin?i18n['__'](_0x4671e7(0x209)):i18n['__'](_0x4671e7(0x265)));}proxyProcess[_0x4671e7(0x25b)]['on'](_0x4671e7(0x1fa),_0x3d72f=>{const _0x492ee6=_0x4671e7;let _0xdae80d=_0x3d72f[_0x492ee6(0x235)]();console[_0x492ee6(0x231)](_0x492ee6(0x259),_0xdae80d);if(_0xdae80d['indexOf'](_0x492ee6(0x22b))!=-0x1)console[_0x492ee6(0x231)](_0x492ee6(0x20c)),frpIsConnected=!![],setHealthCheckInterval(),saveNasProxyState(_0x492ee6(0x205),new Date()[_0x492ee6(0x1e4)](),i18n['__']('proxy.conSuc'));else{if(_0xdae80d[_0x492ee6(0x251)]('cannot\x20find\x20the\x20file\x20specified')!=-0x1)startProxy();else{if(_0xdae80d[_0x492ee6(0x251)]('\x20error')!=-0x1||_0xdae80d[_0x492ee6(0x251)](_0x492ee6(0x208))!=-0x1){frpIsConnected=![];if(isWaittingTimeout)return;isWaittingTimeout=!![],setTimeout(()=>{const _0x179a90=_0x492ee6;isWaittingTimeout=![],!frpIsConnected&&_0xdae80d['indexOf']('retry')!=-0x1&&(console[_0x179a90(0x231)](_0x179a90(0x215),_0xdae80d),startProxy());},0x4e20);}else{if(_0xdae80d[_0x492ee6(0x251)](_0x492ee6(0x229))!=-0x1){console[_0x492ee6(0x231)]('errMsg',_0xdae80d);var _0x58df1e=_0xdae80d[_0x492ee6(0x1ff)](_0x492ee6(0x229));let _0x33e231=_0xdae80d[_0x492ee6(0x1e3)](_0x58df1e,_0xdae80d['length']);saveNasProxyState('fail',new Date()[_0x492ee6(0x1e4)](),_0x33e231);}else{if(_0xdae80d[_0x492ee6(0x251)](_0x492ee6(0x221))!=-0x1)frpIsConnected=!![],retryCount=0x0,console['log'](_0x492ee6(0x241)),saveNasProxyState(_0x492ee6(0x205),new Date()[_0x492ee6(0x1e4)](),i18n['__'](_0x492ee6(0x252))),dbOther[_0x492ee6(0x214)]('REPLACE\x20INTO\x20process_record(process_id)\x20VALUES(?)')[_0x492ee6(0x220)](proxyProcess[_0x492ee6(0x232)]+''),fs['rm'](crtPath,()=>{}),fs['rm'](keyPath,()=>{}),fs['rm'](_0x249f3c,()=>{}),setHealthCheckInterval();else{if(_0xdae80d[_0x492ee6(0x251)]('operation\x20timed\x20out')!=-0x1)saveNasProxyState(_0x492ee6(0x213),new Date()['getTime'](),i18n['__'](_0x492ee6(0x262)));else{if(_0xdae80d[_0x492ee6(0x251)](_0x492ee6(0x21d))!=-0x1)saveNasProxyState(_0x492ee6(0x213),new Date()[_0x492ee6(0x1e4)](),i18n['__'](_0x492ee6(0x21d))),tryRestartFrpc();else _0xdae80d[_0x492ee6(0x251)](_0x492ee6(0x1e7))!=-0x1&&tryRestartFrpc();}}}}}}}),proxyProcess[_0x4671e7(0x22c)]['on']('data',_0x365859=>{const _0x3e2216=_0x4671e7;let _0x4ac3e=_0x365859[_0x3e2216(0x235)]();console['log'](_0x3e2216(0x24a),_0x4ac3e),_0x4ac3e['indexOf'](_0x3e2216(0x227))==-0x1&&_0x4ac3e[_0x3e2216(0x251)](_0x3e2216(0x1eb))==-0x1&&_0x4ac3e[_0x3e2216(0x251)](_0x3e2216(0x266))==-0x1&&(frpIsConnected=![]),tryRestartFrpc();}),proxyProcess['on']('close',_0x2f5cce=>{const _0x535ed1=_0x4671e7;console[_0x535ed1(0x231)](_0x535ed1(0x201)),frpIsConnected=![],stopProxy();});});}