const _0x3cf28e=_0x137b;(function(_0x2bf63d,_0x487317){const _0x42ea41=_0x137b,_0x7d59ac=_0x2bf63d();while(!![]){try{const _0x4f9eff=-parseInt(_0x42ea41(0x184))/0x1*(-parseInt(_0x42ea41(0xff))/0x2)+parseInt(_0x42ea41(0x13b))/0x3+parseInt(_0x42ea41(0x17f))/0x4*(-parseInt(_0x42ea41(0x101))/0x5)+parseInt(_0x42ea41(0x13f))/0x6+parseInt(_0x42ea41(0x135))/0x7+-parseInt(_0x42ea41(0xfc))/0x8*(parseInt(_0x42ea41(0x165))/0x9)+-parseInt(_0x42ea41(0x128))/0xa*(-parseInt(_0x42ea41(0x160))/0xb);if(_0x4f9eff===_0x487317)break;else _0x7d59ac['push'](_0x7d59ac['shift']());}catch(_0x5a5f5b){_0x7d59ac['push'](_0x7d59ac['shift']());}}}(_0x30a7,0x8b162));let path=require(_0x3cf28e(0xef)),fs=require('fs'),os=require('os'),child_process=require(_0x3cf28e(0xf7)),proxyProcess=null;const config=require(_0x3cf28e(0x15f)),Database=require('better-sqlite3');function _0x30a7(){const _0x158ef7=['1MhdHnh','/api/healthCheck','close','.nas-cab.com','lastIndexOf','path','\x0asubdomain\x20=\x20','\x0aplugin_key_path\x20=\x20\x20','axios','未登录\x20不连接内网穿透','nasAccountInfoPwd','writeFileSync','../../express-server/utils/cryptoUtils','child_process','NasCabFrpWorker','unknown','toString','\x0aplugin_host_header_rewrite\x20=\x20127.0.0.1\x0aplugin_header_X-From-Where\x20=\x20NasCab\x0asubdomain\x20=\x20','2152xakcnY','proxy_subdomain','getTime','565634cnzSrW','length','55Vomlab','ping_time','首选服务器','userInfo','decryptString','code','title','proxy.isntVip','../../utils/i18nUtil','\x20TIMEOUT','proxyConfig','ping','kill','type','win32','tmp_crt','SIGTERM','message','frpc\x20stopped','port','frpc\x20process\x20error','message：reset','https://','\x0a[common]\x0aserver_addr\x20=\x20','frpcPath','router\x20config\x20conflict','reset','tmp','apiServer','operation\x20timed\x20out','serverId','state','pid','proxy.disable','journal_mode\x20=\x20WAL','user_count','已选代理服务器','stderr','\x0aplugin_crt_path\x20=\x20','10tBmpWM','apiBaseUrl','pragma','\x20refused','alive','proxy.noLoginInfo','fail','prepare','proxy.frpcNoExist','join','\x0aserver_port\x20=\x20','key','nasZs987bac','151592KDPIYz','netRate','parse','stdout','post','远程连接未启用','2408052JpyBfK','\x22\x0ause_compression\x20=\x20true\x0ause_encryption\x20=\x20true\x0ameta_subdomain=','message：start','proxy.frpcStartFailWin','229944WyuNOp','promise','proxy.conSuc','proxy.noSubdomain','spawn','proxy.conFail','tmp_key','proxy.frpcStartFail','token','writeFile','数据输出','cannot\x20find\x20the\x20file\x20specified','stopped','errMsg','nasRemoteState','FRP\x20Connected','错误输出','_id','server_bandwidth','dbOther','proxy.noUsableServer','proxy','\x0auser=\x22','constants','vipInfo','stringify','msg','log','invalid\x20user','\x0apool_count\x20=\x201\x0atcp_mux\x20=\x20true\x0a\x0a[','PING','show_name','../../myConfig/config','9047687EstIAL','chmodSync','FRP\x20Connection\x20health\x20check\x20fail:','time','create','35901yWYwfP','crt','probe','userDataFolder','error','data','bandwidth','catch','start\x20proxy\x20success','findByTitle','mkdirSync','run','context\x20canceled','then','\x20error','REPLACE\x20INTO\x20process_record(process_id)\x20VALUES(?)','userReqDns','proxyServerList','indexOf','platform','value','nasRemoteEnable','proxy.timeout','tmp/proxy/tmp_crt','proxy.noExpress','existsSync','118276aOytJB','TLS\x20handshake\x20error','selected','retry','wsarecv'];_0x30a7=function(){return _0x158ef7;};return _0x30a7();}let dbOther=new Database(config[_0x3cf28e(0x152)],{});dbOther[_0x3cf28e(0x12a)](_0x3cf28e(0x123));function _0x137b(_0x427450,_0xa90194){const _0x30a75a=_0x30a7();return _0x137b=function(_0x137b54,_0x52ce53){_0x137b54=_0x137b54-0xed;let _0x32ae42=_0x30a75a[_0x137b54];return _0x32ae42;},_0x137b(_0x427450,_0xa90194);}let dbConfigTable=require('../../db/dbConfigTable'),cryptoUtils=require(_0x3cf28e(0xf6)),axios=require(_0x3cf28e(0xf2)),i18nUtil=require(_0x3cf28e(0x109)),retryCount=0x0,maxRetryCount=0x9184e729fff,tmpPath,apiConfig,userToken,crtPath,keyPath,i18n;var ping=require(_0x3cf28e(0x10c));let isWin=os[_0x3cf28e(0x178)]()==_0x3cf28e(0x10f),frpIsConnected=![],isWaittingTimeout=![];process[_0x3cf28e(0x107)]=_0x3cf28e(0xf8);const healthCheckGap=0x1e;let healthCheckInterval=null,healthCheckUrl='',healthCheckFailCount=0x0,maxhealthCheckFailCount=0x3;process['on']('exit',()=>{const _0x2312c7=_0x3cf28e;console[_0x2312c7(0x15a)]('远程代理线程退出'),stopProxy(),dbOther[_0x2312c7(0x186)]();}),process['on'](_0x3cf28e(0x112),_0x43b71b=>{const _0x29ad21=_0x3cf28e;if(_0x43b71b[_0x29ad21(0x10e)]=='start')console[_0x29ad21(0x15a)](_0x29ad21(0x13d)),startProxy();else{if(_0x43b71b['type']=='stop')console['log']('message：stop'),stopProxy();else _0x43b71b['type']==_0x29ad21(0x11b)&&(console['log'](_0x29ad21(0x116)),_0x43b71b[_0x29ad21(0x159)]&&_0x43b71b[_0x29ad21(0x159)][_0x29ad21(0x11f)]?resetProxy(_0x43b71b[_0x29ad21(0x159)][_0x29ad21(0x11f)]):resetProxy());}});let stopProxy=function(){const _0x98511=_0x3cf28e;proxyProcess&&(proxyProcess[_0x98511(0x10d)](),console[_0x98511(0x15a)]('远程代理停止'),proxyProcess=null);};function saveNasProxyState(_0xe29424,_0xe89ec0,_0x146ffd){const _0x1573f1=_0x3cf28e;if(_0x146ffd)console[_0x1573f1(0x15a)](_0x146ffd);dbConfigTable[_0x1573f1(0x164)](dbOther,{'title':_0x1573f1(0x14d),'value':JSON[_0x1573f1(0x158)]({'status':_0xe29424,'time':_0xe89ec0,'error':_0x146ffd})});}let resetProxy=async function(_0x1296a2){retryCount=0x0,startProxy(_0x1296a2);},startProxy=async function(_0x39c757){const _0x50a290=_0x3cf28e;i18n=i18nUtil['getI18n'](dbOther),stopProxy();let _0x4b8f7d=dbConfigTable[_0x50a290(0x16e)](dbOther,_0x50a290(0x17a));if(!_0x4b8f7d||_0x4b8f7d&&_0x4b8f7d[_0x50a290(0x179)]!=0x1)return console[_0x50a290(0x15a)](_0x50a290(0x13a)),saveNasProxyState(_0x50a290(0x12e),new Date()[_0x50a290(0xfe)](),i18n['__'](_0x50a290(0x122)));console['log']('正在连接远程代理,重试次数:',retryCount);let _0x411a8b=dbConfigTable['findByTitle'](dbOther,config['nasAccountInfoConfigKey']);if(!_0x411a8b)return console['log'](_0x50a290(0xf3)),saveNasProxyState(_0x50a290(0x12e),new Date()[_0x50a290(0xfe)](),i18n['__'](_0x50a290(0x12d)));if(!fs['existsSync'](config[_0x50a290(0x119)]))return saveNasProxyState(_0x50a290(0x12e),new Date()[_0x50a290(0xfe)](),i18n['__'](_0x50a290(0x130)));retryCount+=0x1;if(retryCount>=maxRetryCount)return saveNasProxyState(_0x50a290(0x12e),new Date()[_0x50a290(0xfe)](),i18n['__']('proxy.conFail'));os[_0x50a290(0x178)]()!=_0x50a290(0x10f)&&fs[_0x50a290(0x161)](config['frpcPath'],fs[_0x50a290(0x156)]['S_IXUSR']),cryptoUtils[_0x50a290(0x105)](config[_0x50a290(0xf4)],_0x411a8b[_0x50a290(0x179)])[_0x50a290(0x172)](_0xb557fd=>{const _0x42d756=_0x50a290;let _0x32e93d=JSON[_0x42d756(0x137)](_0xb557fd),_0x3e7525=_0x32e93d[_0x42d756(0x104)],_0x102ee1=_0x32e93d[_0x42d756(0x157)];_0x3e7525[_0x42d756(0x147)]&&_0x3e7525[_0x42d756(0x147)][_0x42d756(0x100)]>0x0&&(userToken=_0x3e7525[_0x42d756(0x147)][_0x3e7525[_0x42d756(0x147)][_0x42d756(0x100)]-0x1]);if(!userToken)return saveNasProxyState('fail',new Date()['getTime'](),i18n['__'](_0x42d756(0x12d)));if(!_0x102ee1)return saveNasProxyState(_0x42d756(0x12e),new Date()['getTime'](),i18n['__'](_0x42d756(0x108)));if(_0x102ee1['type']<0x2)return saveNasProxyState(_0x42d756(0x12e),new Date()['getTime'](),i18n['__']('account.onlyPtSupport'));if(!_0x102ee1[_0x42d756(0xfd)])return saveNasProxyState(_0x42d756(0x12e),new Date()[_0x42d756(0xfe)](),i18n['__'](_0x42d756(0x142)));let _0x516299=dbConfigTable['findByTitle'](dbOther,_0x42d756(0x11d));if(!_0x516299)return saveNasProxyState(_0x42d756(0x12e),new Date()[_0x42d756(0xfe)](),i18n['__'](_0x42d756(0x17d)));apiConfig=JSON[_0x42d756(0x137)](_0x516299['value']);if(!apiConfig[_0x42d756(0x114)]||apiConfig[_0x42d756(0x120)]!=_0x42d756(0x170))return saveNasProxyState('fail',new Date()[_0x42d756(0xfe)](),i18n['__'](_0x42d756(0x17d)));let _0x1af45a={'token':userToken,'type':'getProxyServer'};axios[_0x42d756(0x139)](config[_0x42d756(0x129)]+_0x42d756(0x154),_0x1af45a)[_0x42d756(0x172)](async _0x1d62a5=>{const _0x28fcf7=_0x42d756;if(_0x1d62a5[_0x28fcf7(0x16a)][_0x28fcf7(0x106)])return saveNasProxyState(_0x28fcf7(0x12e),new Date()[_0x28fcf7(0xfe)](),_0x1d62a5[_0x28fcf7(0x16a)][_0x28fcf7(0x159)]?_0x1d62a5[_0x28fcf7(0x16a)]['msg']:i18n['__'](_0x28fcf7(0x144)));else{let _0x4cd47b=_0x1d62a5[_0x28fcf7(0x16a)]['validServer'],_0x571b1c=null,_0x314052=dbConfigTable[_0x28fcf7(0x16e)](dbOther,_0x28fcf7(0x176));if(_0x314052&&_0x314052['value'])try{_0x314052=JSON[_0x28fcf7(0x137)](_0x314052[_0x28fcf7(0x179)]);for(let _0x23078b=0x0;_0x23078b<_0x4cd47b[_0x28fcf7(0x100)];_0x23078b++){if(_0x39c757){if(_0x39c757==_0x4cd47b[_0x23078b][_0x28fcf7(0x150)]){_0x571b1c=_0x4cd47b[_0x23078b];break;}}else for(let _0x12c195=0x0;_0x12c195<_0x314052['length'];_0x12c195++){if(_0x314052[_0x12c195]['selected']&&_0x314052[_0x12c195][_0x28fcf7(0x150)]==_0x4cd47b[_0x23078b]['_id']){_0x571b1c=_0x4cd47b[_0x23078b];break;}}}}catch(_0x474f46){console[_0x28fcf7(0x15a)](_0x474f46);}testPing(_0x1d62a5[_0x28fcf7(0x16a)]['validServer'],_0x571b1c?_0x571b1c[_0x28fcf7(0x150)]:null);}})[_0x42d756(0x16c)](_0x570ada=>{const _0x1919da=_0x42d756;console[_0x1919da(0x15a)](_0x570ada);});})[_0x50a290(0x16c)](_0xe15a5b=>{console['log'](_0xe15a5b);});};function userReqDns(_0x21543c,_0x4656c2){const _0x1c3cf0=_0x3cf28e;tmpPath=path[_0x1c3cf0(0x131)](config[_0x1c3cf0(0x168)],_0x1c3cf0(0x11c),_0x1c3cf0(0x154));!fs[_0x1c3cf0(0x17e)](tmpPath)&&fs[_0x1c3cf0(0x16f)](tmpPath,{'recursive':!![]});let _0x330a00=0x1;crtPath=path[_0x1c3cf0(0x131)](tmpPath,_0x1c3cf0(0x110)),keyPath=path[_0x1c3cf0(0x131)](tmpPath,_0x1c3cf0(0x145)),axios[_0x1c3cf0(0x139)](config[_0x1c3cf0(0x129)]+_0x1c3cf0(0x154),{'token':userToken,'type':_0x1c3cf0(0x175),'serverId':_0x4656c2[_0x1c3cf0(0x150)],'getKey':_0x330a00})[_0x1c3cf0(0x172)](async _0x358102=>{const _0x24cbbf=_0x1c3cf0;if(_0x358102[_0x24cbbf(0x16a)][_0x24cbbf(0x106)])return saveNasProxyState(_0x24cbbf(0x12e),new Date()['getTime'](),_0x358102[_0x24cbbf(0x16a)]['msg']?_0x358102[_0x24cbbf(0x16a)][_0x24cbbf(0x159)]:i18n['__']('proxy.conFail'));else{if(_0x330a00==0x1){let _0x59dde2=await cryptoUtils[_0x24cbbf(0x105)](_0x24cbbf(0x134),_0x358102[_0x24cbbf(0x16a)][_0x24cbbf(0x166)]),_0x315811=await cryptoUtils[_0x24cbbf(0x105)](_0x24cbbf(0x134),_0x358102[_0x24cbbf(0x16a)][_0x24cbbf(0x133)]);fs['writeFileSync'](crtPath,_0x59dde2),fs[_0x24cbbf(0xf5)](keyPath,_0x315811);}connectProxy(_0x21543c,_0x4656c2);}})['catch'](_0x190bad=>{console['log'](_0x190bad);});}function testPing(_0x3e34f2,_0x3c427e){const _0x21e76c=_0x3cf28e;if(_0x3e34f2['length']<0x1)return saveNasProxyState('fail',new Date()['getTime'](),i18n['__'](_0x21e76c(0x153)));let _0x50f72d=0x0,_0x41f381=null;function _0x465491(){const _0x1b7d1a=_0x21e76c;if(_0x50f72d>=_0x3e34f2[_0x1b7d1a(0x100)]){for(let _0x12d5f9 of _0x3e34f2){if(_0x3c427e&&_0x3c427e==_0x12d5f9[_0x1b7d1a(0x150)]&&_0x12d5f9['alive']){_0x41f381=_0x12d5f9,console[_0x1b7d1a(0x15a)](_0x1b7d1a(0x103),_0x41f381[_0x1b7d1a(0x15e)]);break;}if(_0x12d5f9[_0x1b7d1a(0x12c)]&&_0x12d5f9[_0x1b7d1a(0x102)]&&_0x12d5f9[_0x1b7d1a(0x102)]!=_0x1b7d1a(0xf9)){if(_0x41f381==null)_0x41f381=_0x12d5f9;else _0x41f381[_0x1b7d1a(0x102)]*_0x41f381[_0x1b7d1a(0x136)]>_0x12d5f9[_0x1b7d1a(0x102)]*_0x12d5f9['netRate']&&(_0x41f381=_0x12d5f9);}}if(!_0x41f381)return saveNasProxyState(_0x1b7d1a(0x12e),new Date()[_0x1b7d1a(0xfe)](),i18n['__']('proxy.noUsableServer'));userReqDns(_0x3e34f2,_0x41f381);}}for(let _0x17b249 of _0x3e34f2){let _0x47b080=0x1;if(!_0x17b249[_0x21e76c(0x124)]||!_0x17b249[_0x21e76c(0x151)])_0x47b080=0x1;else try{_0x47b080=parseInt(_0x17b249[_0x21e76c(0x124)])/parseInt(_0x17b249[_0x21e76c(0x151)]);}catch(_0x2702b5){console[_0x21e76c(0x15a)](_0x2702b5);}_0x17b249[_0x21e76c(0x136)]=_0x47b080;}for(let _0x495f78 of _0x3e34f2){ping[_0x21e76c(0x140)][_0x21e76c(0x167)](_0x495f78['ip'],{'timeout':0x14})[_0x21e76c(0x172)](function(_0x37b3f9){const _0x2508f3=_0x21e76c;_0x50f72d+=0x1,_0x495f78[_0x2508f3(0x12c)]=_0x37b3f9['alive'],_0x495f78[_0x2508f3(0x102)]=_0x37b3f9[_0x2508f3(0x163)],_0x465491(),console[_0x2508f3(0x15a)](_0x2508f3(0x15d),_0x495f78['ip'],_0x37b3f9[_0x2508f3(0x12c)],_0x37b3f9[_0x2508f3(0x163)]?_0x37b3f9[_0x2508f3(0x163)]:'\x20TIMEOUT');})['catch'](_0x5958ed=>{const _0x24aadc=_0x21e76c;_0x50f72d+=0x1,_0x495f78[_0x24aadc(0x12c)]=![],_0x495f78['ping_time']=0x1869f,console[_0x24aadc(0x15a)](_0x24aadc(0x15d),_0x495f78['ip'],_0x24aadc(0x10a)),_0x465491();});}}function setHealthCheckInterval(){healthCheckInterval&&clearInterval(healthCheckInterval),healthCheckInterval=setInterval(()=>{proxyProcess==null?startProxy():checkFrpConnectHealth();},healthCheckGap*0x3e8);}function tryRestartFrpc(){if(isWaittingTimeout)return;setTimeout(()=>{isWaittingTimeout=![],!frpIsConnected&&startProxy();},0x2710);}function checkFrpConnectHealth(){const _0x12e4fb=_0x3cf28e;axios['post'](healthCheckUrl+_0x12e4fb(0x185),{'timeout':0x3a98})['then'](async _0x6f1759=>{const _0xe48825=_0x12e4fb;_0x6f1759[_0xe48825(0x16a)]['code']?(healthCheckFailCount+=0x1,console['log'](_0xe48825(0x162),healthCheckFailCount),healthCheckFailCount>maxhealthCheckFailCount&&(healthCheckFailCount=0x0,startProxy())):healthCheckFailCount=0x0;})[_0x12e4fb(0x16c)](_0x859b11=>{const _0x94e2f5=_0x12e4fb;healthCheckFailCount+=0x1,console[_0x94e2f5(0x15a)](_0x94e2f5(0x162),healthCheckFailCount),healthCheckFailCount>maxhealthCheckFailCount&&(healthCheckFailCount=0x0,startProxy());});}async function connectProxy(_0xfed3c5,_0xb9b377){const _0xce9669=_0x3cf28e;for(let _0x28417f of _0xfed3c5){_0x28417f[_0xce9669(0x150)]==_0xb9b377[_0xce9669(0x150)]?_0x28417f[_0xce9669(0x181)]=!![]:_0x28417f[_0xce9669(0x181)]=![];}dbConfigTable[_0xce9669(0x164)](dbOther,{'title':_0xce9669(0x176),'value':JSON['stringify'](_0xfed3c5)}),console[_0xce9669(0x15a)](_0xce9669(0x125),_0xb9b377['ip']);let _0x5dba13=apiConfig[_0xce9669(0x114)],_0x26ad28=_0xb9b377['port'],_0x4b469b=_0xb9b377['proxy_subdomain'],_0x5c0a46=path[_0xce9669(0x131)](tmpPath,_0xce9669(0x10b));healthCheckUrl=_0xce9669(0x117)+_0x4b469b+_0xce9669(0xed);let _0x2cdafd=_0xce9669(0x118)+_0xb9b377['ip']+_0xce9669(0x132)+_0x26ad28+_0xce9669(0x155)+userToken+_0xce9669(0x13c)+_0x4b469b+_0xce9669(0xf0)+_0x4b469b+_0xce9669(0x15c)+_0x4b469b+'-https]\x0atype\x20=\x20https\x0alocal_port\x20=\x20'+_0x5dba13+'\x0aplugin\x20=\x20https2http\x0aplugin_local_addr\x20=\x20127.0.0.1:'+_0x5dba13+_0xce9669(0x127)+crtPath+_0xce9669(0xf1)+keyPath+_0xce9669(0xfb)+_0x4b469b+'\x0ause_compression\x20=\x20true\x0ause_encryption\x20=\x20true\x0abandwidth_limit\x20=\x20'+_0xb9b377[_0xce9669(0x16b)]+'\x0a';fs[_0xce9669(0x148)](_0x5c0a46,_0x2cdafd,()=>{const _0x18b43b=_0xce9669;try{proxyProcess!=null&&proxyProcess[_0x18b43b(0x10d)](),proxyProcess=child_process[_0x18b43b(0x143)](''+config[_0x18b43b(0x119)],['-c',_0x5c0a46],{'detached':![],'killSignal':_0x18b43b(0x111)}),proxyProcess['on'](_0x18b43b(0x169),function(_0x479a8f){const _0x2b2b02=_0x18b43b;return console[_0x2b2b02(0x15a)](_0x2b2b02(0x115),_0x479a8f),saveNasProxyState(_0x2b2b02(0x12e),new Date()['getTime'](),isWin?i18n['__'](_0x2b2b02(0x13e)):i18n['__'](_0x2b2b02(0x146)));});}catch(_0x1208a3){return console[_0x18b43b(0x15a)](_0x1208a3),saveNasProxyState(_0x18b43b(0x12e),new Date()[_0x18b43b(0xfe)](),isWin?i18n['__'](_0x18b43b(0x13e)):i18n['__'](_0x18b43b(0x146)));}proxyProcess[_0x18b43b(0x138)]['on'](_0x18b43b(0x16a),_0x22a52a=>{const _0x31ac20=_0x18b43b;let _0x18752f=_0x22a52a[_0x31ac20(0xfa)]();console[_0x31ac20(0x15a)](_0x31ac20(0x149),_0x18752f);if(_0x18752f[_0x31ac20(0x177)](_0x31ac20(0x11a))!=-0x1)console[_0x31ac20(0x15a)]('子域名冲突'),frpIsConnected=!![],setHealthCheckInterval(),saveNasProxyState('success',new Date()[_0x31ac20(0xfe)](),i18n['__'](_0x31ac20(0x141)));else{if(_0x18752f[_0x31ac20(0x177)](_0x31ac20(0x14a))!=-0x1)startProxy();else{if(_0x18752f[_0x31ac20(0x177)](_0x31ac20(0x173))!=-0x1||_0x18752f['indexOf'](_0x31ac20(0x12b))!=-0x1){frpIsConnected=![];if(isWaittingTimeout)return;isWaittingTimeout=!![],setTimeout(()=>{const _0x235c59=_0x31ac20;isWaittingTimeout=![],!frpIsConnected&&_0x18752f['indexOf'](_0x235c59(0x182))!=-0x1&&(console[_0x235c59(0x15a)]('---Connection\x20error\x20，\x20reconnecting\x20frpc---',_0x18752f),startProxy());},0x4e20);}else{if(_0x18752f[_0x31ac20(0x177)](_0x31ac20(0x15b))!=-0x1){console[_0x31ac20(0x15a)](_0x31ac20(0x14c),_0x18752f);var _0x497d32=_0x18752f[_0x31ac20(0xee)](_0x31ac20(0x15b));let _0x55e5dd=_0x18752f['substring'](_0x497d32,_0x18752f[_0x31ac20(0x100)]);saveNasProxyState(_0x31ac20(0x12e),new Date()[_0x31ac20(0xfe)](),_0x55e5dd);}else{if(_0x18752f['indexOf'](_0x31ac20(0x16d))!=-0x1)frpIsConnected=!![],retryCount=0x0,console['log'](_0x31ac20(0x14e)),saveNasProxyState('success',new Date()[_0x31ac20(0xfe)](),i18n['__'](_0x31ac20(0x141))),dbOther[_0x31ac20(0x12f)](_0x31ac20(0x174))[_0x31ac20(0x170)](proxyProcess[_0x31ac20(0x121)]+''),fs['rm'](crtPath,()=>{}),fs['rm'](keyPath,()=>{}),fs['rm'](_0x5c0a46,()=>{}),setHealthCheckInterval();else{if(_0x18752f['indexOf'](_0x31ac20(0x11e))!=-0x1)saveNasProxyState(_0x31ac20(0x12e),new Date()['getTime'](),i18n['__'](_0x31ac20(0x17b)));else{if(_0x18752f['indexOf'](_0x31ac20(0x14b))!=-0x1)saveNasProxyState(_0x31ac20(0x12e),new Date()['getTime'](),i18n['__'](_0x31ac20(0x14b))),tryRestartFrpc();else _0x18752f['indexOf'](_0x31ac20(0x17c))!=-0x1&&tryRestartFrpc();}}}}}}}),proxyProcess[_0x18b43b(0x126)]['on'](_0x18b43b(0x16a),_0x2c6fb2=>{const _0x2f8a9b=_0x18b43b;let _0xaf373e=_0x2c6fb2[_0x2f8a9b(0xfa)]();console[_0x2f8a9b(0x15a)](_0x2f8a9b(0x14f),_0xaf373e),_0xaf373e[_0x2f8a9b(0x177)](_0x2f8a9b(0x183))==-0x1&&_0xaf373e[_0x2f8a9b(0x177)](_0x2f8a9b(0x171))==-0x1&&_0xaf373e['indexOf'](_0x2f8a9b(0x180))==-0x1&&(frpIsConnected=![]),tryRestartFrpc();}),proxyProcess['on'](_0x18b43b(0x186),_0x21f09e=>{const _0x2a1771=_0x18b43b;console[_0x2a1771(0x15a)](_0x2a1771(0x113)),frpIsConnected=![],stopProxy();});});}