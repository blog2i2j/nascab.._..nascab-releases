'use strict';const _0x1a5d27=_0x2885;(function(_0x1fa102,_0x12d80b){const _0x50aebe=_0x2885,_0xc005ac=_0x1fa102();while(!![]){try{const _0x2050cf=-parseInt(_0x50aebe(0x151))/0x1+-parseInt(_0x50aebe(0x12a))/0x2+-parseInt(_0x50aebe(0x12d))/0x3+-parseInt(_0x50aebe(0x120))/0x4+parseInt(_0x50aebe(0x16a))/0x5+parseInt(_0x50aebe(0x17a))/0x6+-parseInt(_0x50aebe(0x12b))/0x7*(-parseInt(_0x50aebe(0x15f))/0x8);if(_0x2050cf===_0x12d80b)break;else _0xc005ac['push'](_0xc005ac['shift']());}catch(_0x56839d){_0xc005ac['push'](_0xc005ac['shift']());}}}(_0x1fe9,0xa231f));let app,shell,ipcMain;try{app=require(_0x1a5d27(0x187))['app'],shell=require(_0x1a5d27(0x187))[_0x1a5d27(0x161)],ipcMain=require('electron')[_0x1a5d27(0x189)];}catch(_0x3c4571){console[_0x1a5d27(0x183)](_0x1a5d27(0x181));}let mainWindow,sha256=require(_0x1a5d27(0x121));const dbFileShare=require(_0x1a5d27(0xfb)),dbUserTable=require(_0x1a5d27(0x133));let nasAccountUtil=require(_0x1a5d27(0x166));const {fork}=require(_0x1a5d27(0x192));let bgTaskWorkerIsRunning=![],tinyImgWorkerIsRunning=![],getMovieInfoWorkerIsRunning=![],aiFacesWorkerIsRunning=![],aiClassesWorkerIsRunning=![],aiSimilarPhotoWorker=![],globalInfoWorkerIsRunning=![],photoIndexWorkerIsRunning=![],movieIndexWorkerIsRunning=![],musicIndexWorkerIsRunning=![],bookIndexWorkerIsRunning=![],watchWorkerIsRunning=![];const messageUtil=require(_0x1a5d27(0x132));let accountIsVip=![],backupWorkerIsRunning=![],m3u8WorkerIsRunning=![],subtitleGenWorkerIsRunning=![],loadUrl='';function workerSendMsg(_0x4dca4d,_0x22cc55){const _0x5a86a6=_0x1a5d27;try{_0x4dca4d&&!_0x4dca4d['killed']&&_0x4dca4d[_0x5a86a6(0x18e)](_0x22cc55,undefined,undefined,_0xf12006=>{const _0x9ec346=_0x5a86a6;_0xf12006&&console[_0x9ec346(0x183)]('send\x20message\x20callback\x20',_0xf12006);});}catch(_0x4a1d32){console[_0x5a86a6(0x183)](_0x5a86a6(0x148),_0x4a1d32);}}let dbu;function init(){const _0x1db2bb=_0x1a5d27;var _0x1e75f3=require(_0x1db2bb(0x196));let _0x4f572e=require(_0x1db2bb(0x154)),_0xeb75a7=require(_0x1db2bb(0x152)),_0x1a87f4=require(_0x1db2bb(0x167)),_0x292448=_0xeb75a7[_0x1db2bb(0x11d)]();dbu=_0xeb75a7['initDbu']();function _0x2a5d29(_0x46a989,_0x3be901){const _0x1761df=_0x1db2bb;function _0x3d767e(){const _0x2c0196=_0x2885;_0x46a989['init']();if(app)_0xeb75a7[_0x2c0196(0x14d)]();_0xeb75a7[_0x2c0196(0xec)]();if(app)mainWindow=_0xeb75a7[_0x2c0196(0xed)]();_0xeb75a7['init'](_0x46a989);if(app)_0xeb75a7[_0x2c0196(0xea)](_0x46a989,mainWindow);if(app)_0xeb75a7[_0x2c0196(0xf3)](_0x46a989,mainWindow);_0xeb75a7['expireTokenOnTime'](),_0xeb75a7[_0x2c0196(0x109)](_0x46a989);if(app)_0xeb75a7[_0x2c0196(0x136)]();_0xeb75a7[_0x2c0196(0x12e)](),_0x3be901(mainWindow);}app?app['on'](_0x1761df(0x18d),()=>{_0x3d767e();}):_0x3d767e();}_0x2a5d29(dbu,_0x4b16de=>{const _0x570c3c=_0x1db2bb,_0x30d039=_0xeb75a7[_0x570c3c(0x10a)]();let _0x137be9=_0xeb75a7[_0x570c3c(0x106)]();_0xeb75a7['getFreePort'](_0x137be9,_0x598053=>{const _0x289cce=_0x570c3c;function _0x209355(_0x5a4072){const _0x24185f=_0x2885,_0x3d15d5=fork(_0x4f572e['resolve'](__dirname,_0x5a4072),[],{'env':{'userDataFolder':_0x292448,'appRootPath':_0x30d039},'detached':![],'killSignal':_0x24185f(0x184)});return _0xeb75a7['processList'][_0x24185f(0x118)](_0x3d15d5),_0xeb75a7['addProcessRecord'](dbu['dbOther'],_0x3d15d5['pid']),_0x3d15d5['on'](_0x24185f(0xf5),function(_0x5c0ad4,_0x12c5a7){}),_0x3d15d5['on'](_0x24185f(0x17e),function(_0x3c1d01){const _0x177b4f=_0x24185f;console[_0x177b4f(0x183)](_0x177b4f(0x190),_0x3c1d01);}),_0x3d15d5;}function _0x59839f(_0x32d10a){const _0x43321b=_0x2885;nasAccountUtil[_0x43321b(0x129)](null,dbu['dbOther'])[_0x43321b(0x18b)](_0x26c395=>{accountIsVip=_0x26c395;if(_0x32d10a)_0x32d10a();})[_0x43321b(0x179)](_0x41bf30=>{const _0x578452=_0x43321b;console[_0x578452(0x183)](_0x41bf30);});}dbu[_0x289cce(0x104)][_0x289cce(0x194)]('UPDATE\x20bg_task\x20SET\x20task_state=3\x20where\x20task_state=1')[_0x289cce(0x126)](),_0x59839f(),setInterval(()=>{_0x212d1e();},0x258*0x3e8),setTimeout(()=>{const _0xdffb4f=_0x289cce;_0xeb75a7[_0xdffb4f(0x12f)](dbu['dbOther']),_0x529a44(),_0x4c2361(),_0x1e5637(),_0x5bbdca(),_0x154190(),_0x75897f(),_0x31b8d5(),_0x1f63f4(),_0x45dd5a();},0x1388);let _0x5eaaa1;function _0x5bbdca(){const _0xbb8566=_0x289cce;if(bookIndexWorkerIsRunning)return;bookIndexWorkerIsRunning=!![],_0x5eaaa1=_0x209355(_0xbb8566(0x131)),_0x5eaaa1['on']('message',function(_0x9c7527){const _0x4b99a6=_0xbb8566;_0x9c7527[_0x4b99a6(0x176)]==_0x4b99a6(0xee)&&(bookIndexWorkerIsRunning=![]);}),_0x5eaaa1['on']('exit',function(_0x4db87e,_0x498cda,_0x2dbbc2){const _0x211f86=_0xbb8566;console[_0x211f86(0x183)](_0x211f86(0x175),_0x498cda||'',_0x2dbbc2||''),bookIndexWorkerIsRunning=![];});}let _0x5e7dd9;function _0x1e5637(){const _0x2f6a10=_0x289cce;if(musicIndexWorkerIsRunning)return;musicIndexWorkerIsRunning=!![],_0x5e7dd9=_0x209355(_0x2f6a10(0x16c)),_0x5e7dd9['on'](_0x2f6a10(0x11a),function(_0x5f1b36){const _0x3c029c=_0x2f6a10;_0x5f1b36[_0x3c029c(0x176)]=='close'&&(musicIndexWorkerIsRunning=![]);}),_0x5e7dd9['on']('exit',function(_0x22e5d5,_0x34c807,_0x32f8fe){const _0x20bf74=_0x2f6a10;console[_0x20bf74(0x183)]('音乐索引线程已退出[Music\x20indexing\x20worker\x20exited]',_0x34c807||'',_0x32f8fe||''),musicIndexWorkerIsRunning=![];});}let _0x1d873e;function _0x5a676d(){const _0x269a51=_0x289cce;if(watchWorkerIsRunning)return;watchWorkerIsRunning=!![],_0x1d873e=_0x209355(_0x269a51(0xfc)),_0x1d873e['on'](_0x269a51(0x11a),function(_0x26da18){const _0x2b2d90=_0x269a51;if(_0x26da18['type']=='close')watchWorkerIsRunning=![];else{if(_0x26da18[_0x2b2d90(0x176)]=='NEW_PHOTO_INDEX')_0x154190(),_0x1f63f4();else _0x26da18['type']==_0x2b2d90(0x130)&&(_0x154190(),_0x45dd5a(),_0x3e151a());}}),_0x1d873e['on']('exit',function(_0x4abd4d,_0x3bc467,_0x529770){const _0x8ff596=_0x269a51;console[_0x8ff596(0x183)](_0x8ff596(0x172),_0x3bc467,_0x529770),watchWorkerIsRunning=![];});}_0x5a676d();let _0x34a7a2;function _0x529a44(){const _0x7fd092=_0x289cce;if(photoIndexWorkerIsRunning)return;photoIndexWorkerIsRunning=!![],_0x34a7a2=_0x209355(_0x7fd092(0x188)),_0x34a7a2['on'](_0x7fd092(0x11a),function(_0x10e8ae){const _0x39110e=_0x7fd092;_0x10e8ae['type']=='close'&&(photoIndexWorkerIsRunning=![]),_0x10e8ae[_0x39110e(0x176)]==_0x39110e(0xff)&&(_0x154190(),_0x1f63f4());}),_0x34a7a2['on'](_0x7fd092(0xf5),function(_0x208949,_0x317221,_0x56f3d1){const _0x5e9841=_0x7fd092;console['log'](_0x5e9841(0x11b),_0x317221||'',_0x56f3d1||''),photoIndexWorkerIsRunning=![];});}let _0x4245d7;function _0x4c2361(){const _0x490c08=_0x289cce;if(movieIndexWorkerIsRunning)return;movieIndexWorkerIsRunning=!![],_0x4245d7=_0x209355(_0x490c08(0x11f)),_0x4245d7['on']('message',function(_0x30b13e){const _0x4da0c9=_0x490c08;if(_0x30b13e[_0x4da0c9(0x176)]==_0x4da0c9(0xee))movieIndexWorkerIsRunning=![];else _0x30b13e['type']==_0x4da0c9(0x130)&&(_0x154190(),_0x45dd5a(),_0x3e151a());}),_0x4245d7['on'](_0x490c08(0xf5),function(_0x4ae36a,_0x2dbd6c,_0x1a99d4){const _0x510501=_0x490c08;console[_0x510501(0x183)](_0x510501(0x165),_0x2dbd6c||'',_0x1a99d4||''),movieIndexWorkerIsRunning=![];});}function _0x45dd5a(){const _0x5e70b3=_0x289cce;if(getMovieInfoWorkerIsRunning)return;getMovieInfoWorkerIsRunning=!![];let _0x21f207=_0x209355('myWorkers/movieInfoWorker.js');_0x21f207['on'](_0x5e70b3(0x11a),function(_0x1167ae){const _0x147d0c=_0x5e70b3;_0x1167ae[_0x147d0c(0x176)]==_0x147d0c(0xee)&&(getMovieInfoWorkerIsRunning=![]);}),_0x21f207['on'](_0x5e70b3(0xf5),function(){getMovieInfoWorkerIsRunning=![];});}function _0x154190(){const _0x48bd6e=_0x289cce;if(tinyImgWorkerIsRunning)return;tinyImgWorkerIsRunning=!![];let _0x31605d=_0x209355(_0x48bd6e(0x163));_0x31605d['on']('message',function(_0x13e36a){const _0x2a6abb=_0x48bd6e;if(_0x13e36a[_0x2a6abb(0x176)]==_0x2a6abb(0xee))tinyImgWorkerIsRunning=![];else _0x13e36a[_0x2a6abb(0x176)]=='NEW_TINY_IMAGE'&&(_0x75897f(),_0x31b8d5());}),_0x31605d['on']('exit',function(){tinyImgWorkerIsRunning=![];});}let _0x40ead4,_0x4843e2;function _0x248ec0(){const _0xd734f1=_0x289cce;let _0x389339=dbFileShare[_0xd734f1(0xf9)](dbu[_0xd734f1(0x104)],_0xd734f1(0x195),[]);if(_0x389339&&_0x389339[_0xd734f1(0x105)]>0x0)!_0x40ead4&&(_0x40ead4=_0x209355('myWorkers/shareFolder/shareFtp.js'),_0x40ead4['on'](_0xd734f1(0xf5),function(){const _0xe921c9=_0xd734f1;console[_0xe921c9(0x183)](_0xe921c9(0x17b)),_0x40ead4=null;}));else{_0x1a87f4[_0xd734f1(0x11c)](dbu['dbOther'],{'title':'FTPServer','value':JSON['stringify']({'state':_0xd734f1(0x199)})});if(_0x40ead4){let _0x2856ca=_0x40ead4[_0xd734f1(0x14c)]();_0x2856ca&&(_0x40ead4=null,console[_0xd734f1(0x183)](_0xd734f1(0x10c)));}}}function _0x4016a1(){const _0x2836de=_0x289cce;let _0x1e8fab=dbFileShare[_0x2836de(0xf9)](dbu[_0x2836de(0x104)],_0x2836de(0x103),[]);if(_0x1e8fab&&_0x1e8fab[_0x2836de(0x105)]>0x0)!_0x4843e2&&(_0x4843e2=_0x209355(_0x2836de(0x124)),_0x4843e2['on'](_0x2836de(0xf5),function(){const _0x5ba2c4=_0x2836de;console[_0x5ba2c4(0x183)](_0x5ba2c4(0x17c)),_0x4843e2=null;}));else{_0x1a87f4['create'](dbu[_0x2836de(0x104)],{'title':_0x2836de(0xfd),'value':JSON['stringify']({'state':_0x2836de(0x199)})});if(_0x4843e2){let _0x56211c=_0x4843e2['kill']();_0x56211c&&(_0x4843e2=null);}}}let _0x5afb9f;function _0x5d159f(){const _0x3a4b91=_0x289cce;let _0x10670f=![],_0x4c8147=_0x1a87f4[_0x3a4b91(0x18a)](dbu[_0x3a4b91(0x104)],_0x3a4b91(0x116));_0x4c8147&&_0x4c8147[_0x3a4b91(0x117)]==0x1&&(_0x10670f=!![]);if(_0x10670f)!_0x5afb9f&&(_0x5afb9f=_0x209355(_0x3a4b91(0xf6)),_0x5afb9f['on'](_0x3a4b91(0x11a),function(_0x1f2133){const _0x312fac=_0x3a4b91;_0x1f2133[_0x312fac(0x176)]==_0x312fac(0xee)&&(_0x5afb9f=null);}),_0x5afb9f['on'](_0x3a4b91(0xf5),function(){const _0x2cc9cf=_0x3a4b91;console[_0x2cc9cf(0x183)]('DDNS\x20worker\x20is\x20stopped'),_0x5afb9f=null;}));else{if(_0x5afb9f){let _0x488b99=_0x5afb9f[_0x3a4b91(0x14c)]();_0x488b99&&(_0x5afb9f=null,console[_0x3a4b91(0x183)]('Closing\x20NasCab\x20ddns'));}_0x1a87f4[_0x3a4b91(0xf4)](dbu[_0x3a4b91(0x104)],_0x3a4b91(0x147)),_0x1a87f4[_0x3a4b91(0xf4)](dbu[_0x3a4b91(0x104)],_0x3a4b91(0xeb)),_0x1a87f4[_0x3a4b91(0x11c)](dbu['dbOther'],{'title':_0x3a4b91(0x135),'value':JSON['stringify']({'status':'fail','ddnsIp':'','error':'OFF'})});}}_0x5d159f();let _0x55389a;function _0x49072c(){const _0x1f3a6e=_0x289cce;if(globalInfoWorkerIsRunning)return;globalInfoWorkerIsRunning=!![],_0x55389a=_0x209355(_0x1f3a6e(0x15b)),_0x55389a['on'](_0x1f3a6e(0x11a),function(_0x285339){const _0x473966=_0x1f3a6e;if(_0x285339[_0x473966(0x176)]=='close')globalInfoWorkerIsRunning=![];else _0x285339[_0x473966(0x176)]=='startScanPath'&&_0x3d14fb(_0x285339);}),_0x55389a['on']('exit',function(){globalInfoWorkerIsRunning=![];});}_0x49072c();function _0x31b8d5(){const _0x1daa08=_0x289cce;let _0x3c7f5a=_0x1a87f4[_0x1daa08(0x18a)](dbu[_0x1daa08(0x104)],'aiFaceEnable');if(_0x3c7f5a&&_0x3c7f5a[_0x1daa08(0x117)]=='1'){if(aiFacesWorkerIsRunning)return;aiFacesWorkerIsRunning=!![];let _0x4f2c1c=_0x209355(_0x1daa08(0x134));_0x4f2c1c['on']('message',function(_0x126e93){const _0x1d1967=_0x1daa08;_0x126e93['type']==_0x1d1967(0xee)&&(aiFacesWorkerIsRunning=![]);}),_0x4f2c1c['on'](_0x1daa08(0xf5),function(_0x30fe49,_0x2efeb3,_0x1eb886){aiFacesWorkerIsRunning=![],_0x4f2c1c=null;});}else{}}function _0x1f63f4(){const _0xd5d922=_0x289cce;let _0x24f7b2=_0x1a87f4['findByTitle'](dbu[_0xd5d922(0x104)],'aiSimilarPhotoEnable');if(_0x24f7b2&&_0x24f7b2['value']=='1'){if(aiSimilarPhotoWorker)return;aiSimilarPhotoWorker=!![];let _0x2765dc=_0x209355('myWorkers/ai/aiSimilarPhotos.js');_0x2765dc['on'](_0xd5d922(0x11a),function(_0x279b4d){const _0x1abf8a=_0xd5d922;_0x279b4d[_0x1abf8a(0x176)]=='close'&&(aiSimilarPhotoWorker=![]);}),_0x2765dc['on'](_0xd5d922(0xf5),()=>{_0x2765dc=![];});}else{}}function _0x75897f(){const _0x422679=_0x289cce;let _0x2ef630=_0x1a87f4[_0x422679(0x18a)](dbu['dbOther'],_0x422679(0xf0));if(_0x2ef630&&_0x2ef630[_0x422679(0x117)]=='1'){if(aiClassesWorkerIsRunning)return;aiClassesWorkerIsRunning=!![];let _0x5fab61=_0x209355(_0x422679(0x155));_0x5fab61['on'](_0x422679(0x11a),function(_0x3ca79e){const _0x258bcf=_0x422679;_0x3ca79e[_0x258bcf(0x176)]==_0x258bcf(0xee)&&(aiClassesWorkerIsRunning=![]);}),_0x5fab61['on'](_0x422679(0xf5),()=>{aiClassesWorkerIsRunning=![];});}else{}}let _0x2dbad8;function _0x1708d5(){const _0x590980=_0x289cce;let _0x4530ca=dbu[_0x590980(0x104)][_0x590980(0x194)](_0x590980(0x125))[_0x590980(0x141)]();if(_0x4530ca[_0x590980(0x10f)]>0x0){if(backupWorkerIsRunning)return;backupWorkerIsRunning=!![],_0x2dbad8=_0x209355('myWorkers/bg/backupWorker.js'),_0x2dbad8['on']('message',function(_0x5bbb46){const _0x1ab469=_0x590980;_0x5bbb46[_0x1ab469(0x176)]==_0x1ab469(0xee)&&(backupWorkerIsRunning=![]);}),_0x2dbad8['on'](_0x590980(0xf5),()=>{backupWorkerIsRunning=![];});}else{if(_0x2dbad8){let _0x591a9e=_0x2dbad8[_0x590980(0x14c)]();_0x591a9e&&(_0x2dbad8=null);}}}_0x1708d5();let _0x330ea4;function _0x5d150d(){const _0x138c52=_0x289cce;if(m3u8WorkerIsRunning)return;m3u8WorkerIsRunning=!![],_0x330ea4=_0x209355(_0x138c52(0x185)),_0x330ea4['on'](_0x138c52(0x11a),function(_0x498cf8){const _0x330440=_0x138c52;_0x498cf8['type']==_0x330440(0xee)&&(m3u8WorkerIsRunning=![]);}),_0x330ea4['on']('exit',function(_0x512007){m3u8WorkerIsRunning=![];});}let _0x2ce03b,_0x8d0eef=![];function _0x212d1e(){const _0x5c3012=_0x289cce;_0x8d0eef&&(!_0x2ce03b&&(_0x2ce03b=_0x209355(_0x5c3012(0x101)),_0x2ce03b['on'](_0x5c3012(0xf5),_0x168d79=>{const _0xb23600=_0x5c3012;console['log'](_0xb23600(0xef),_0x168d79),_0x2ce03b=null;}),console[_0x5c3012(0x183)](_0x5c3012(0x149))));}function _0x2c1ce6(){const _0x12a495=_0x289cce;let _0x2897ab=_0x1a87f4[_0x12a495(0x18a)](dbu[_0x12a495(0x104)],'nasRemoteEnable');!_0x2897ab||_0x2897ab&&_0x2897ab[_0x12a495(0x117)]!=0x1&&_0x2897ab[_0x12a495(0x117)]!='1'?(_0x8d0eef=![],_0x2ce03b&&(_0x2ce03b[_0x12a495(0x14c)](),_0x2ce03b=null,console[_0x12a495(0x183)](_0x12a495(0x156))),_0x1a87f4['create'](dbu['dbOther'],{'title':_0x12a495(0x14b),'value':JSON[_0x12a495(0xf2)]({'status':_0x12a495(0xf7),'time':new Date()['getTime']()+'','error':_0x12a495(0x146)})})):(_0x8d0eef=!![],_0x212d1e());}_0x2c1ce6();let _0x1c87a4;function _0x3e151a(){const _0xd56679=_0x289cce;if(subtitleGenWorkerIsRunning)return;subtitleGenWorkerIsRunning=!![],_0x1c87a4=_0x209355(_0xd56679(0x137)),_0x1c87a4['on'](_0xd56679(0x11a),function(_0x41cabe){const _0x5e4906=_0xd56679;_0x41cabe['type']==_0x5e4906(0xee)&&(subtitleGenWorkerIsRunning=![]);}),_0x1c87a4['on'](_0xd56679(0xf5),function(_0x4d474e){subtitleGenWorkerIsRunning=![];});}setTimeout(()=>{_0x3e151a();},0x1388);let _0x42599f=![],_0x3f8187=![],_0x47feda=![];function _0x1d21b3(_0xcf0ad9){const _0x58ebdc=_0x289cce;try{!_0x47feda&&(_0x47feda=!![],setTimeout(()=>{const _0x3912d5=_0x2885;let _0x4ae3fd=require(_0x3912d5(0x114)),_0x237a0d=_0x4ae3fd[_0x3912d5(0x15c)](dbu[_0x3912d5(0x104)]);_0x237a0d?console['log'](_0x3912d5(0x10b),_0x3912d5(0x142)+_0x237a0d+':'+_0xcf0ad9):console['log']('HTTPS\x20服务运行端口[HTTPS\x20server\x20running\x20on\x20port]:',_0xcf0ad9);},0x3a98));}catch(_0xe19bdf){console[_0x58ebdc(0x183)](_0xe19bdf);}}function _0x36bf97(_0x1bc5ed){const _0x10c27f=_0x289cce;_0x4016a1(),setTimeout(()=>{_0x248ec0();},0x1388);!_0x3f8187&&(_0x3f8187=!![],setTimeout(()=>{const _0x3a830c=_0x2885;let _0x54da23=require(_0x3a830c(0x114)),_0x502635=_0x54da23['getIpv4Address'](dbu[_0x3a830c(0x104)]);_0x502635?console[_0x3a830c(0x183)]('HTTP\x20服务正在运行[HTTP\x20server\x20is\x20running]\x20:',_0x3a830c(0x144)+_0x502635+':'+_0x1bc5ed):console[_0x3a830c(0x183)](_0x3a830c(0x111),_0x1bc5ed);},0x3a98));_0x1a87f4[_0x10c27f(0x11c)](dbu[_0x10c27f(0x104)],{'title':_0x10c27f(0x197),'value':JSON[_0x10c27f(0xf2)]({'state':_0x10c27f(0x126),'port':_0x1bc5ed})});if(!_0x42599f){_0x42599f=!![];if(app){app[_0x10c27f(0x16d)]?loadUrl=_0x1bc5ed=='80'?_0x10c27f(0x10e):_0x10c27f(0xf1)+_0x1bc5ed+_0x10c27f(0x12c):loadUrl=_0x10c27f(0x13d);let _0x2bb1be=_0x1a87f4[_0x10c27f(0x18a)](dbu['dbOther'],_0x10c27f(0x112));if(!_0x2bb1be||_0x2bb1be['value']=='1'){let _0x5e66ce=dbUserTable[_0x10c27f(0x14a)](dbu[_0x10c27f(0x104)]);if(_0x5e66ce){let _0x1a04ec=sha256(new Date()[_0x10c27f(0x122)]()+_0x5e66ce[_0x10c27f(0x13e)]);dbUserTable[_0x10c27f(0x115)](dbu[_0x10c27f(0x104)],_0x5e66ce['id'],_0x1a04ec,_0x10c27f(0x168)),loadUrl+='?token='+_0x1a04ec;}}_0x4b16de[_0x10c27f(0x17f)](loadUrl),_0x4b16de['webContents']['on'](_0x10c27f(0x119),function(){const _0x53c840=_0x10c27f;console[_0x53c840(0x183)]('页面加载失败',loadUrl);}),ipcMain['on'](_0x10c27f(0x16b),(_0xe4c88d,_0x3224b8)=>{const _0x241eaf=_0x10c27f;console[_0x241eaf(0x183)]('刷新页面',loadUrl),loadUrl&&_0x4b16de['loadURL'](loadUrl);});}workerSendMsg(_0x2ce03b,{'type':_0x10c27f(0x15e)});}}let _0x491493=_0xeb75a7[_0x289cce(0x123)]();console['log']('NasCab\x20Api\x20进程数量\x20[NasCab\x20api\x20thread\x20count]:',_0x491493),_0x1e75f3[_0x289cce(0x180)]({'exec':_0x4f572e['resolve'](__dirname,_0x289cce(0x15d))}),_0x1e75f3['on'](_0x289cce(0xf5),function(_0x4fe7f3,_0x42796c,_0x2a3839){const _0xdcf077=_0x289cce;console[_0xdcf077(0x183)]('NasCab\x20api\x20server\x20restarting\x20',_0x42796c,_0x2a3839),setTimeout(()=>{_0x4a9391();},0x1388);});for(let _0x1ca7a4=0x0;_0x1ca7a4<_0x491493;_0x1ca7a4++){_0x4a9391();}function _0x3d14fb(_0x543787){const _0x3c48ea=_0x289cce;if(_0x543787[_0x3c48ea(0x159)]==_0x3c48ea(0x150))_0x4c2361();else{if(_0x543787['source_type']==_0x3c48ea(0x177))_0x529a44();else{if(_0x543787[_0x3c48ea(0x159)]==_0x3c48ea(0x173))_0x1e5637();else _0x543787[_0x3c48ea(0x159)]==_0x3c48ea(0x17d)&&_0x5bbdca();}}_0x543787[_0x3c48ea(0x178)]&&(_0x5a676d(),workerSendMsg(_0x1d873e,_0x543787));}function _0x4a9391(){const _0x4df5e4=_0x289cce,_0x2fdfdb=_0x1e75f3[_0x4df5e4(0x108)]({'usePort':_0x598053,'userDataFolder':_0x292448,'appRootPath':_0x30d039});_0x2fdfdb['on'](_0x4df5e4(0x11a),function(_0x1a8cc6){const _0x400186=_0x4df5e4;try{switch(_0x1a8cc6['type']){case _0x400186(0x158):let _0x45a41c=_0x209355('myWorkers/bg/fileOperationWorker.js');workerSendMsg(_0x45a41c,_0x1a8cc6);break;case'START_WORKER_BG_TASK':if(!bgTaskWorkerIsRunning){bgTaskWorkerIsRunning=!![];let _0x5c7c11=_0x209355('myWorkers/bg/bgTaskWorker.js');_0x5c7c11['on']('message',function(_0x4e3b1a){const _0x1312b7=_0x400186;_0x4e3b1a[_0x1312b7(0x176)]==_0x1312b7(0xee)&&(bgTaskWorkerIsRunning=![]);});}break;case _0x400186(0x100):_0x45dd5a();break;case _0x400186(0x140):_0x3e151a();break;case'M3u8Transcode':_0x5d150d(),workerSendMsg(_0x330ea4,_0x1a8cc6);break;case _0x400186(0x14f):_0x2c1ce6(),workerSendMsg(_0x2ce03b,{'type':'reset','msg':_0x1a8cc6});break;case'nasCabLogout':_0x2c1ce6(),workerSendMsg(_0x2ce03b,{'type':_0x400186(0x199)}),setTimeout(()=>{_0x59839f(()=>{_0x45dd5a();});},0x3e8);break;case _0x400186(0x18f):_0x49072c(),workerSendMsg(_0x55389a,_0x1a8cc6);break;case _0x400186(0x107):console[_0x400186(0x183)](_0x400186(0x13c)),_0xeb75a7[_0x400186(0x107)]();break;case _0x400186(0x127):_0x1708d5();break;case'stopIndexWorker':if(_0x1a8cc6[_0x400186(0x159)]==_0x400186(0x177))_0x34a7a2&&(_0x34a7a2['kill'](),_0x34a7a2=null,photoIndexWorkerIsRunning=![]);else{if(_0x1a8cc6['source_type']=='movie')_0x4245d7&&(_0x4245d7[_0x400186(0x14c)](),_0x4245d7=null,movieIndexWorkerIsRunning=![]);else{if(_0x1a8cc6[_0x400186(0x159)]=='music')_0x5e7dd9&&(_0x5e7dd9[_0x400186(0x14c)](),_0x5e7dd9=null,musicIndexWorkerIsRunning=![]);else _0x1a8cc6[_0x400186(0x159)]=='book'&&(_0x5eaaa1&&(_0x5eaaa1[_0x400186(0x14c)](),_0x5eaaa1=null,bookIndexWorkerIsRunning=![]));}}break;case _0x400186(0x139):_0x3d14fb(_0x1a8cc6);break;case _0x400186(0x193):if(_0x1a8cc6[_0x400186(0x113)]==_0x400186(0x164))_0x4016a1(),workerSendMsg(_0x4843e2,_0x1a8cc6);else _0x1a8cc6[_0x400186(0x113)]=='FTP'&&(_0x248ec0(),workerSendMsg(_0x40ead4,_0x1a8cc6));break;case _0x400186(0x13a):_0x5d159f(),workerSendMsg(_0x5afb9f,{'type':'start','force':0x1});break;case _0x400186(0x170):_0x5d159f(),setTimeout(()=>{_0x59839f(()=>{_0x45dd5a();});},0x3e8);break;case _0x400186(0x191):_0x2c1ce6(),workerSendMsg(_0x2ce03b,{'type':'reset'}),_0x5d159f(),setTimeout(()=>{_0x59839f(()=>{_0x45dd5a();});},0x3e8);break;case'createUserFolder':_0xeb75a7[_0x400186(0x11d)]();break;case _0x400186(0xfe):_0x75897f();break;case _0x400186(0x15a):_0x31b8d5();break;case _0x400186(0xfa):_0x1f63f4();break;case'expressStarted':_0x36bf97(_0x1a8cc6[_0x400186(0x169)]);break;case _0x400186(0x157):_0x1d21b3(_0x1a8cc6[_0x400186(0x169)]);break;case _0x400186(0x143):console[_0x400186(0x183)](_0x400186(0x182));if(app)app[_0x400186(0x153)]();_0xeb75a7[_0x400186(0x16e)](dbu);break;case _0x400186(0x18c):break;case _0x400186(0x161):if(shell){if(_0x1a8cc6[_0x400186(0x186)]==_0x400186(0x145))_0x1a8cc6[_0x400186(0x154)]&&shell[_0x400186(0x145)](_0x1a8cc6[_0x400186(0x154)]);else{if(_0x1a8cc6[_0x400186(0x186)]==_0x400186(0x171))_0x1a8cc6[_0x400186(0x154)]&&shell[_0x400186(0x171)](_0x1a8cc6[_0x400186(0x154)])[_0x400186(0x18b)](_0x121f60=>{const _0x31c1e9=_0x400186;console[_0x31c1e9(0x183)](_0x31c1e9(0x11e));})[_0x400186(0x179)](_0x23acab=>{const _0x2d4b60=_0x400186;console[_0x2d4b60(0x183)]('打开路径失败',_0x23acab);});else _0x1a8cc6['shellType']==_0x400186(0x13f)&&(_0x1a8cc6[_0x400186(0x154)]&&shell['trashItem'](_0x1a8cc6[_0x400186(0x154)])[_0x400186(0x18b)](_0x3536ae=>{const _0x1af60f=_0x400186;console[_0x1af60f(0x183)](_0x1af60f(0x14e));})[_0x400186(0x179)](_0x5b2973=>{const _0x155aa9=_0x400186;console[_0x155aa9(0x183)](_0x155aa9(0x110),_0x5b2973);}));}}break;case _0x400186(0x162):}}catch(_0x46570e){console[_0x400186(0x183)](_0x400186(0xf8),_0x46570e);}});}});});}function _0x1fe9(){const _0x319a69=['myWorkers/shareFolder/shareWebDav.js','SELECT\x20count(*)\x20as\x20count\x20FROM\x20backup_task','run','initBackupWorker','requestSingleInstanceLock','isVip','272848qvCkhm','7894481LVvMJE','/#/','615012xzXZmi','checkWebClientAutoUpdate','addScanTaskWhenStart','NEW_MOVIE_INDEX','myWorkers/index/bookIndexWorker.js','./utils/messageUtil','./db/dbUserTable','myWorkers/ai/aiFaceUtil.js','nasDdnsState','openDev','myWorkers/subtitlesGenWorker.js','quit','startScanPath','nasDdnsRestart','show','Start\x20checking\x20for\x20updates','http://localhost:8081/#/','username','trash','START_PRE_GEN_SUBTITLE','get','https://','Relaunch','http://','showItemInFolder','FRP\x20OFF','ddnsIpv6Address','worker\x20send\x20msg\x20error','启用\x20frp','getAdmin','nasRemoteState','kill','launchWithSys','已经放入回收站','nasProxyRestart','movie','341532BgBmFs','./utils/initUtil','relaunch','path','myWorkers/ai/aiClassify.js','关闭\x20proxyWorker','expressStartedHttps','START_WORKER_FILE_OPERATION','source_type','startFaceAiWork','myWorkers/globalInfoWorker.js','getIpv4Address','myWorkers/expressWorker.js','start','8mOsXFm','saveMsg','shell','downloadTaskChange','myWorkers/tinyImgWorker.js','WebDav','电影索引线程已退出[Movies\x20indexing\x20worker\x20exited]','./express-server/utils/nasAccountUtils','./db/dbConfigTable','localhost','exressPort','434335GbgaGR','refresh','myWorkers/index/musicIndexWorker.js','isPackaged','exitApp','isMinimized','nasCabLogout','openPath','------Watch\x20worker\x20is\x20stopped------','music','main\x20error:','图书索引线程已退出[Books\x20indexing\x20worker\x20exited]','type','photo','restartWatcher','catch','3408246KkBSpG','Ftp\x20worker\x20is\x20stopped','Webdav\x20worker\x20is\x20stopped','book','error','loadURL','setupPrimary','Clientless\x20service\x20mode','Relaunch\x20Restart','log','SIGTERM','myWorkers/m3u8Worker.js','shellType','electron','myWorkers/index/photoIndexWorker.js','ipcMain','findByTitle','then','expressEnded','ready','send','getGlobalInfo','进程出错了','nasAccountLogin','child_process','fileShareRestart','prepare','\x20server_type=\x27FTP\x27','cluster','apiServer','focus','stop','restore','initTray','ddnsIpv4Address','setLanguage','createMainWindow','close','proxyWorker\x20exit','aiClassesEnable','http://localhost:','stringify','initWindowEventAndLoadLoading','deleteByTitle','exit','myWorkers/ddnsWorker.js','fail','main\x20err','getAllByWhere','startSimilarPhotoWork','./db/dbFileShare','myWorkers/index/fileWatcherWorker.js','webDavServer','startClassesAiWork','NEW_PHOTO_INDEX','SWITCH_MOVIE_INFO','myWorkers/proxy/proxyWorker.js','stack','\x20server_type=\x27WebDav\x27','dbOther','length','getConfigApiPort','startUpdate','fork','runNewVersionTask','getRootPath','HTTPS\x20服务正在运行[HTTPS\x20server\x20is\x20running]\x20:','Closing\x20FTP','isVisible','http://localhost/#/','count','放入回收站失败','HTTP\x20服务运行端口[HTTP\x20server\x20running\x20on\x20port]:','autoLoginClient','shareType','./utils/globalInfoUtil','createToken','nasDdnsEnable','value','push','did-fail-load','message','照片索引线程已退出[Photos\x20indexing\x20worker\x20exited]','create','createUserFolder','已打开路径','myWorkers/index/movieIndexWorker.js','1741520WpdkBz','sha256','getTime','getExpressApiCount'];_0x1fe9=function(){return _0x319a69;};return _0x1fe9();}function _0x2885(_0xb0af7b,_0xb6fd04){const _0x1fe94e=_0x1fe9();return _0x2885=function(_0x288574,_0x1c9c11){_0x288574=_0x288574-0xea;let _0x401c9b=_0x1fe94e[_0x288574];return _0x401c9b;},_0x2885(_0xb0af7b,_0xb6fd04);}if(app){const gotTheLock=app[_0x1a5d27(0x128)]();!gotTheLock?(app[_0x1a5d27(0x138)](),process['kill'](process['pid'],_0x1a5d27(0x184))):(app['on']('second-instance',(_0x2c99cd,_0x1b3739,_0x535bcf)=>{const _0x4d84c0=_0x1a5d27;if(mainWindow){if(mainWindow[_0x4d84c0(0x16f)]())mainWindow[_0x4d84c0(0x19a)]();!mainWindow[_0x4d84c0(0x10d)]()&&mainWindow[_0x4d84c0(0x13b)](),mainWindow[_0x4d84c0(0x198)]();}}),init());}else init();process['on']('uncaughtException',(_0x43d674,_0x29bb0f)=>{const _0x1f8d97=_0x1a5d27;console[_0x1f8d97(0x183)](_0x1f8d97(0x174),_0x43d674),dbu&&messageUtil[_0x1f8d97(0x160)](dbu[_0x1f8d97(0x104)],'Error\x20occurred\x20in\x20main\x20process','error',_0x43d674[_0x1f8d97(0x102)]||_0x43d674[_0x1f8d97(0x11a)]);});