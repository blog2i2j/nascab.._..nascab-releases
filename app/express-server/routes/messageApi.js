function _0x5c6c(_0xd3b858,_0x23665b){const _0x32c695=_0x32c6();return _0x5c6c=function(_0x5c6c95,_0x8e96de){_0x5c6c95=_0x5c6c95-0xf1;let _0xca0c8=_0x32c695[_0x5c6c95];return _0xca0c8;},_0x5c6c(_0xd3b858,_0x23665b);}const _0x5af0a5=_0x5c6c;function _0x32c6(){const _0x24c82c=['isAll','delete','1936yuHaOS','operationFail','refreshRead','2343BgRPYF','148XherxJ','is_admin','14KIqfEU','28986ixrwKI','count','post','level','returnErrMsg','body','306232mKPhfZ','getUnReadCount','app','2108zfeYxW','info','push','exports','../../myConfig/config','json','391424LbnFiX','currentUser','error','dbOther','Router','559yWqXqz','234nhFjWH','3876Isqkiy','includes','getByWhere','8200zGbFjX','/delete','630czPQyT'];_0x32c6=function(){return _0x24c82c;};return _0x32c6();}(function(_0x4570c4,_0x207637){const _0x4a2464=_0x5c6c,_0xc12f7e=_0x4570c4();while(!![]){try{const _0x16f2ad=parseInt(_0x4a2464(0x106))/0x1*(parseInt(_0x4a2464(0xfa))/0x2)+parseInt(_0x4a2464(0xf9))/0x3*(-parseInt(_0x4a2464(0xf6))/0x4)+-parseInt(_0x4a2464(0xf3))/0x5*(-parseInt(_0x4a2464(0xfd))/0x6)+parseInt(_0x4a2464(0xfc))/0x7*(-parseInt(_0x4a2464(0x103))/0x8)+-parseInt(_0x4a2464(0x112))/0x9*(-parseInt(_0x4a2464(0xf1))/0xa)+parseInt(_0x4a2464(0x10c))/0xb+-parseInt(_0x4a2464(0x113))/0xc*(parseInt(_0x4a2464(0x111))/0xd);if(_0x16f2ad===_0x207637)break;else _0xc12f7e['push'](_0xc12f7e['shift']());}catch(_0x506b48){_0xc12f7e['push'](_0xc12f7e['shift']());}}}(_0x32c6,0x5637f));var express=require('express'),router=express[_0x5af0a5(0x110)]();let config=require(_0x5af0a5(0x10a)),dbNoticeCenterTable=require('../../db/dbNoticeCenterTable');router[_0x5af0a5(0xff)]('/getMessage',(_0x6e03b3,_0x375978,_0x26fc74)=>{const _0x3b6ea9=_0x5af0a5;let _0x4aea8d=_0x6e03b3['body']['id'],_0x582961=_0x6e03b3['body'][_0x3b6ea9(0xfe)],_0x499a74=_0x6e03b3[_0x3b6ea9(0x102)]['msgType'];!_0x4aea8d&&(_0x4aea8d=0x9184e729fff);let _0xe237ad=[_0x3b6ea9(0x107),_0x3b6ea9(0x10e)];if(!_0x499a74||!_0xe237ad[_0x3b6ea9(0x114)](_0x499a74))return _0x6e03b3[_0x3b6ea9(0x105)][_0x3b6ea9(0x101)](_0x375978,_0x375978['__'](_0x3b6ea9(0xf7)));let _0x3a7119='',_0x497636=[];_0x3a7119+='\x20level=?\x20AND\x20id\x20<\x20?\x20ORDER\x20BY\x20create_time\x20DESC\x20LIMIT\x20?\x20',_0x497636[_0x3b6ea9(0x108)](_0x499a74),_0x497636[_0x3b6ea9(0x108)](_0x4aea8d),_0x497636[_0x3b6ea9(0x108)](_0x582961);let _0x344514=dbNoticeCenterTable[_0x3b6ea9(0x115)](_0x6e03b3['app']['dbOther'],_0x3a7119,_0x497636),_0x4c5a84=dbNoticeCenterTable['getUnReadCount'](_0x6e03b3[_0x3b6ea9(0x105)][_0x3b6ea9(0x10f)],_0x3b6ea9(0x107)),_0xb6e486=dbNoticeCenterTable[_0x3b6ea9(0x104)](_0x6e03b3['app']['dbOther'],_0x3b6ea9(0x10e));_0x375978['json']({'code':0x0,'data':_0x344514,'infoUnReadCount':_0x4c5a84['count'],'errorUnReadCount':_0xb6e486[_0x3b6ea9(0xfe)]});}),router[_0x5af0a5(0xff)]('/getUnReadCount',(_0x5334de,_0x53f2cb,_0x5b5dbb)=>{const _0x53e04d=_0x5af0a5;let _0x5703c1=_0x5334de[_0x53e04d(0x102)]['level'],_0x4f7914=dbNoticeCenterTable['getUnReadCount'](_0x5334de[_0x53e04d(0x105)][_0x53e04d(0x10f)],_0x5703c1);_0x53f2cb[_0x53e04d(0x10b)]({'code':0x0,'unReadCount':_0x4f7914[_0x53e04d(0xfe)]});}),router['post']('/read',(_0x586f35,_0x58cdef,_0x5273fd)=>{const _0x406b7d=_0x5af0a5;let _0x31fa09=_0x586f35[_0x406b7d(0x102)]['id'],_0x13c17b=_0x586f35[_0x406b7d(0x102)][_0x406b7d(0xf4)],_0x4ac5e8=_0x586f35[_0x406b7d(0x102)]['level'];_0x13c17b?dbNoticeCenterTable[_0x406b7d(0xf8)](_0x586f35[_0x406b7d(0x105)]['dbOther'],_0x4ac5e8):dbNoticeCenterTable['refreshReadById'](_0x586f35[_0x406b7d(0x105)][_0x406b7d(0x10f)],_0x31fa09),_0x58cdef['json']({'code':0x0});}),router['post'](_0x5af0a5(0xf2),(_0x47e1ab,_0x574705,_0x896c60)=>{const _0x16b4bb=_0x5af0a5;if(_0x47e1ab[_0x16b4bb(0x10d)][_0x16b4bb(0xfb)]!=0x1)return _0x574705[_0x16b4bb(0x10b)]({'code':0x66});let _0x54ed1f=_0x47e1ab[_0x16b4bb(0x102)]['id'],_0x13c566=_0x47e1ab[_0x16b4bb(0x102)]['isAll'],_0x447512=_0x47e1ab[_0x16b4bb(0x102)][_0x16b4bb(0x100)];_0x13c566?dbNoticeCenterTable['clearAllByLevel'](_0x47e1ab[_0x16b4bb(0x105)][_0x16b4bb(0x10f)],_0x447512):dbNoticeCenterTable[_0x16b4bb(0xf5)](_0x47e1ab['app']['dbOther'],_0x54ed1f),_0x574705['json']({'code':0x0});}),module[_0x5af0a5(0x109)]=router;