const _0x107e16=_0xcd26;(function(_0x1f205c,_0x14c56d){const _0x581df0=_0xcd26,_0xad424=_0x1f205c();while(!![]){try{const _0x2ddf79=-parseInt(_0x581df0(0x108))/0x1*(parseInt(_0x581df0(0x137))/0x2)+-parseInt(_0x581df0(0xf1))/0x3+-parseInt(_0x581df0(0x10e))/0x4+-parseInt(_0x581df0(0xf5))/0x5*(parseInt(_0x581df0(0x115))/0x6)+parseInt(_0x581df0(0x12c))/0x7+-parseInt(_0x581df0(0xeb))/0x8*(parseInt(_0x581df0(0xee))/0x9)+parseInt(_0x581df0(0xfa))/0xa;if(_0x2ddf79===_0x14c56d)break;else _0xad424['push'](_0xad424['shift']());}catch(_0x2497da){_0xad424['push'](_0xad424['shift']());}}}(_0x1cb1,0x8ce6c));function _0xcd26(_0x3ef674,_0x7b6156){const _0x1cb1b1=_0x1cb1();return _0xcd26=function(_0xcd263c,_0x2d3734){_0xcd263c=_0xcd263c-0xe8;let _0x9a45d=_0x1cb1b1[_0xcd263c];return _0x9a45d;},_0xcd26(_0x3ef674,_0x7b6156);}let photoApiUtil={};function _0x1cb1(){const _0x3869d7=['excludeIdsJson','\x20GROUP\x20BY\x20f.id','getPathWhere','timestamp','4131poftMP','body','INDEX_TABLE_NAME_PHOTO','ordinaryAlbumId','getAllByWhereAndField','SELECT\x20*\x20FROM\x20photo_library\x20WHERE\x20id=?','4448924FDHyEU','count','asc','../../db/dbFileIndexTable','is_raw','\x20>\x200','../../db/dbUserTable','6vbACWj','libraryId','>=?','exports','livephotoIndex','../utils/checkUtil','faceId','trash','\x20AND\x20f.id\x20NOT\x20IN\x20(','parse','dbOther','Params\x20error\x20:\x20albumId','\x20AND\x20','aiClassId','albumId','checkOrderParams','../../db/dbSourceFolderTable','photo','\x20AND\x20is_show=1','timeType','path','getLivePhotoIndex','push','8013558XgjfYl','prepare','\x20AND\x20(filename\x20LIKE\x20?\x20OR\x20mode\x20\x20LIKE\x20?)','fileType','app','rawImageIndex','getExcludePathWhereStr','\x20AND\x20(type=?\x20\x20and\x20is_livephoto!=1)','\x20AND\x20in_trash=1','getAllByWhereAndFieldFromOrdinaryAlbum','path_list','314rIpcZF','\x20AND\x20in_trash=0','arrayInCheck','../../db/dbAlbumTable','excludeFilenamePhoto','\x20\x20AND\x20is_file=1\x20\x20','3608UZAjlV','getAllByWhereAndFieldFromAiClassesToIndex','sourceFolderList','8757dSLLCz','desc','excludeIds','1310151VZwfVK','\x20AND\x20geohash\x20LIKE\x20?\x20','log','geohash','2089475vVTwzR','doUserCanGet','sortType','length','get','24865710JkmaYQ','Params\x20error\x20:\x20fileType','getAlbumWhereStr','searchStr','isNumber','getPhotoByParams','sortField','\x20AND\x20(type=1\x20or\x20type=2)','dbFileIndex','\x20ORDER\x20BY\x20'];_0x1cb1=function(){return _0x3869d7;};return _0x1cb1();}const dbFileIndexTable=require(_0x107e16(0x111)),dbSourceFolderTable=require(_0x107e16(0x125));let checkUtil=require(_0x107e16(0x11a));const dbUserTable=require(_0x107e16(0x114)),dbAlbumTable=require(_0x107e16(0xe8));photoApiUtil[_0x107e16(0xff)]=function(_0x2416f9,_0x3ac28c){const _0x4b614f=_0x107e16;if(dbUserTable[_0x4b614f(0xf6)](_0x2416f9,_0x3ac28c,_0x4b614f(0x126),'power_get','',!![])!=!![])return[];let _0x3c9e68=_0x2416f9['body'][_0x4b614f(0xed)],_0x5399e6=dbUserTable['getUserPathWhere'](_0x2416f9,_0x4b614f(0x126),'power_get',!![],_0x3c9e68),_0x4290ad='\x20f.id,path,is_livephoto,is_raw,raw_filename,check_time,original_time,in_trash_time,original_date,filename,ext,type,f.width,f.height,duration,size,latitude,longitude,geohash,mode,tiny_path',_0x110e0c=_0x2416f9[_0x4b614f(0x109)][_0x4b614f(0x107)],_0x4cd4d0=_0x2416f9[_0x4b614f(0x109)][_0x4b614f(0x128)],_0x4e771d=_0x2416f9['body'][_0x4b614f(0x10f)],_0x35b101=_0x2416f9[_0x4b614f(0x109)][_0x4b614f(0x12f)],_0x405993=_0x2416f9['body'][_0x4b614f(0x11c)],_0xbfb08b=_0x2416f9[_0x4b614f(0x109)][_0x4b614f(0x100)],_0x8bf322=_0x2416f9[_0x4b614f(0x109)][_0x4b614f(0xf7)],_0xcdf854=_0x2416f9[_0x4b614f(0x109)][_0x4b614f(0xf4)],_0x56f7ea=_0x2416f9[_0x4b614f(0x109)][_0x4b614f(0xfd)],_0x48c26b=_0x2416f9[_0x4b614f(0x109)][_0x4b614f(0x116)];if(dbFileIndexTable[_0x4b614f(0x124)](_0x2416f9,_0x3ac28c,_0xbfb08b,_0x8bf322)!==!![])return[];if(!checkUtil[_0x4b614f(0x139)]([_0x4b614f(0x110),_0x4b614f(0xef)],_0x8bf322))return console['log']('Params\x20error\x20:\x20sortType'),[];if(!checkUtil[_0x4b614f(0xfe)](_0x110e0c)||!checkUtil[_0x4b614f(0xfe)](_0x4cd4d0))return console['log']('Params\x20error\x20:\x20timestamp\x20/\x20timeType'),[];let _0x1441aa=_0x2416f9['body'][_0x4b614f(0xf0)];if(!_0x4cd4d0||!_0x110e0c)return[];let _0x1eabfc='',_0x4bd85d=[];_0x4cd4d0==0x1?(_0x1eabfc+='\x20'+_0xbfb08b+'<=?\x20AND\x20'+_0xbfb08b+_0x4b614f(0x113),_0x4bd85d['push'](_0x110e0c)):(_0x1eabfc+='\x20'+_0xbfb08b+_0x4b614f(0x117),_0x4bd85d[_0x4b614f(0x12b)](_0x110e0c));let _0x12b54d=_0x2416f9[_0x4b614f(0x109)][_0x4b614f(0x104)];if(_0x12b54d)try{_0x1441aa=JSON[_0x4b614f(0x11e)](_0x12b54d);}catch(_0x32b3e5){console[_0x4b614f(0xf3)](_0x32b3e5);}if(_0x1441aa&&_0x1441aa[_0x4b614f(0xf8)]>0x0){_0x1eabfc+=_0x4b614f(0x11d);for(let _0x23880b=0x0;_0x23880b<_0x1441aa[_0x4b614f(0xf8)];_0x23880b++){_0x1eabfc+=_0x1441aa[_0x23880b],_0x23880b!=_0x1441aa['length']-0x1&&(_0x1eabfc+=',');}_0x1eabfc+=')';}_0xcdf854&&(_0x1eabfc+=_0x4b614f(0xf2),_0x4bd85d['push'](_0xcdf854+'%'));let _0x494177=dbSourceFolderTable[_0x4b614f(0x132)](_0x2416f9[_0x4b614f(0x130)][_0x4b614f(0x11f)],_0x4b614f(0x129),'excludePathPhoto');_0x494177&&(_0x1eabfc+=_0x4b614f(0x121)+_0x494177);let _0x3547ba=dbSourceFolderTable[_0x4b614f(0x132)](_0x2416f9[_0x4b614f(0x130)][_0x4b614f(0x11f)],'filename',_0x4b614f(0xe9));_0x3547ba&&(_0x1eabfc+='\x20AND\x20'+_0x3547ba);if(_0x35b101==0x0||!_0x35b101)_0x1eabfc+=_0x4b614f(0x101);else{if(_0x35b101==0x1||_0x35b101==0x2){if(!checkUtil[_0x4b614f(0xfe)](_0x35b101))return console[_0x4b614f(0xf3)](_0x4b614f(0xfb)),[];_0x1eabfc+=_0x4b614f(0x133),_0x4bd85d[_0x4b614f(0x12b)](_0x35b101);}else _0x35b101==0x3&&(_0x1eabfc+='\x20AND\x20is_livephoto=1');}_0x56f7ea&&(_0x1eabfc+=_0x4b614f(0x12e),_0x4bd85d[_0x4b614f(0x12b)]('%'+_0x56f7ea+'%'),_0x4bd85d[_0x4b614f(0x12b)]('%'+_0x56f7ea+'%'));!_0x405993||_0x405993==0x0?(_0x1eabfc+=_0x4b614f(0x138),_0x1eabfc+=_0x4b614f(0x127)):_0x1eabfc+=_0x4b614f(0x134);if(_0x48c26b){let _0x28ca98=_0x2416f9[_0x4b614f(0x130)][_0x4b614f(0x102)][_0x4b614f(0x12d)](_0x4b614f(0x10d))[_0x4b614f(0xf9)](_0x48c26b);if(_0x28ca98)try{let _0x5e15e0=JSON[_0x4b614f(0x11e)](_0x28ca98[_0x4b614f(0x136)]),_0x8ab5c6=dbUserTable[_0x4b614f(0x106)](!![],_0x5e15e0);_0x1eabfc+=_0x8ab5c6;}catch(_0x5d618a){console['log'](_0x5d618a);}}if(_0x2416f9[_0x4b614f(0x109)]['albumId']){if(!checkUtil[_0x4b614f(0xfe)](_0x2416f9[_0x4b614f(0x109)]['albumId']))return console[_0x4b614f(0xf3)](_0x4b614f(0x120)),[];let _0x2bf972=dbAlbumTable[_0x4b614f(0xfc)](_0x2416f9['app'][_0x4b614f(0x11f)],_0x2416f9[_0x4b614f(0x109)][_0x4b614f(0x123)]);_0x2bf972&&(_0x1eabfc+=_0x4b614f(0x121)+_0x2bf972);}_0x1eabfc+=_0x5399e6,_0x1eabfc+=_0x4b614f(0xea);(_0x2416f9['body']['aiClassId']||_0x2416f9['body'][_0x4b614f(0x11b)])&&(_0x1eabfc+=_0x4b614f(0x105));_0x1eabfc+=_0x4b614f(0x103)+_0xbfb08b+'\x20'+_0x8bf322;!_0x4e771d&&(_0x4e771d=0x32);if(!checkUtil['isNumber'](_0x4e771d))return console['log']('Params\x20error\x20:\x20count'),[];_0x1eabfc+='\x20LIMIT\x20?',_0x4bd85d[_0x4b614f(0x12b)](_0x4e771d);let _0x75b076=[];if(_0x2416f9[_0x4b614f(0x109)][_0x4b614f(0x10b)])_0x75b076=dbFileIndexTable[_0x4b614f(0x135)](_0x2416f9[_0x4b614f(0x130)][_0x4b614f(0x102)],_0x2416f9['body'][_0x4b614f(0x10b)],_0x1eabfc,_0x4290ad,_0x4bd85d);else{if(_0x2416f9['body'][_0x4b614f(0x122)])_0x75b076=dbFileIndexTable[_0x4b614f(0xec)](_0x2416f9['app'][_0x4b614f(0x102)],_0x2416f9[_0x4b614f(0x109)][_0x4b614f(0x122)],_0x1eabfc,_0x4290ad,_0x4bd85d);else _0x2416f9['body'][_0x4b614f(0x11b)]?_0x75b076=dbFileIndexTable['getAllByWhereAndFieldFromFaceIndex'](_0x2416f9[_0x4b614f(0x130)]['dbFileIndex'],_0x2416f9['body'][_0x4b614f(0x11b)],_0x1eabfc,_0x4290ad,_0x4bd85d):_0x75b076=dbFileIndexTable[_0x4b614f(0x10c)](_0x2416f9[_0x4b614f(0x130)]['dbFileIndex'],_0x1eabfc,_0x4290ad,dbFileIndexTable[_0x4b614f(0x10a)],_0x4bd85d);}if(_0x75b076&&_0x75b076[_0x4b614f(0xf8)]>0x0)for(let _0x23412d in _0x75b076){_0x75b076[_0x23412d]['is_livephoto']==0x1&&(_0x75b076[_0x23412d][_0x4b614f(0x119)]=dbFileIndexTable[_0x4b614f(0x12a)](_0x2416f9[_0x4b614f(0x130)][_0x4b614f(0x102)],_0x75b076[_0x23412d],_0x4290ad));if(_0x75b076[_0x23412d][_0x4b614f(0x112)]==0x0&&_0x75b076[_0x23412d]['raw_filename']!=null&&_0x75b076[_0x23412d]['raw_filename']!=''){let _0x1a1e05=dbFileIndexTable['getRawImageIndex'](_0x2416f9['app'][_0x4b614f(0x102)],_0x75b076[_0x23412d],_0x4290ad);_0x1a1e05&&(_0x75b076[_0x23412d][_0x4b614f(0x131)]=_0x1a1e05);}}return _0x75b076;},module[_0x107e16(0x118)]=photoApiUtil;