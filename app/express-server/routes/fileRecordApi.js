const _0x24e1d7=_0x3dc0;function _0x2d48(){const _0x102070=['../../db/dbFileRecord','1197171cSZiwl','/deleteFileRecord','PARAMS\x20IS\x20INVALID','delete','currentUser','deleteAllByType','exports','path','existsSync','app','count','2102682AYCiuh','/addFileRecord','259iXFuQm','Router','../../myConfig/config','deleteAll','../utils/fileUtils','type','push','join','express','parent','7318016JPqxQA','130722oeFfWo','1024740apYhqt','dbOther','platform','13470111roKSGz','/getFileRecord','50MQeUQW','name','post','create','body','json','190336SMOVbY'];_0x2d48=function(){return _0x102070;};return _0x2d48();}(function(_0x37b555,_0x311101){const _0x4601f4=_0x3dc0,_0x3e4d04=_0x37b555();while(!![]){try{const _0x384bd4=parseInt(_0x4601f4(0x162))/0x1+parseInt(_0x4601f4(0x154))/0x2+parseInt(_0x4601f4(0x149))/0x3+-parseInt(_0x4601f4(0x16d))/0x4*(parseInt(_0x4601f4(0x167))/0x5)+parseInt(_0x4601f4(0x161))/0x6*(-parseInt(_0x4601f4(0x156))/0x7)+parseInt(_0x4601f4(0x160))/0x8+-parseInt(_0x4601f4(0x165))/0x9;if(_0x384bd4===_0x311101)break;else _0x3e4d04['push'](_0x3e4d04['shift']());}catch(_0x3fff48){_0x3e4d04['push'](_0x3e4d04['shift']());}}}(_0x2d48,0x953b4));function _0x3dc0(_0x76b581,_0x409026){const _0x2d4816=_0x2d48();return _0x3dc0=function(_0x3dc06d,_0x1b8ee8){_0x3dc06d=_0x3dc06d-0x149;let _0x58d521=_0x2d4816[_0x3dc06d];return _0x58d521;},_0x3dc0(_0x76b581,_0x409026);}let express=require(_0x24e1d7(0x15e)),router=express[_0x24e1d7(0x157)](),path=require(_0x24e1d7(0x150)),fs=require('fs'),fileUtil=require(_0x24e1d7(0x15a));const os=require('os'),config=require(_0x24e1d7(0x158)),dbFileRecord=require(_0x24e1d7(0x16e));let platform=os[_0x24e1d7(0x164)]();router['post'](_0x24e1d7(0x166),(_0x10be2e,_0xb092ab,_0x2262c5)=>{const _0x174603=_0x24e1d7;let _0x4283a7=_0x10be2e[_0x174603(0x16b)][_0x174603(0x15b)],_0x36bd47=_0x10be2e[_0x174603(0x16b)][_0x174603(0x153)],_0x371352=dbFileRecord['getAllByUid'](_0x10be2e[_0x174603(0x152)][_0x174603(0x163)],_0x10be2e['currentUser']['id'],_0x4283a7,_0x36bd47),_0xe9e60=[];for(const _0x745575 of _0x371352){let _0x30c9c2=path[_0x174603(0x15d)](_0x745575[_0x174603(0x15f)],_0x745575[_0x174603(0x168)]);fs[_0x174603(0x151)](_0x30c9c2)?_0xe9e60[_0x174603(0x15c)](_0x745575):dbFileRecord[_0x174603(0x14c)](_0x10be2e[_0x174603(0x152)][_0x174603(0x163)],_0x745575['id'],_0x10be2e[_0x174603(0x14d)]['id']);}return _0xb092ab[_0x174603(0x16c)]({'code':0x0,'data':_0xe9e60,'platform':platform});}),router['post'](_0x24e1d7(0x155),(_0x25c5d5,_0x551922,_0x4f558e)=>{const _0x286131=_0x24e1d7;return dbFileRecord[_0x286131(0x16a)](_0x25c5d5[_0x286131(0x152)][_0x286131(0x163)],_0x25c5d5[_0x286131(0x14d)]['id'],_0x25c5d5[_0x286131(0x16b)]),_0x551922['json']({'code':0x0});}),router[_0x24e1d7(0x169)](_0x24e1d7(0x14a),(_0x56f6f3,_0x6f8621,_0x427ddf)=>{const _0x1de917=_0x24e1d7;let _0x55e0fa=_0x56f6f3[_0x1de917(0x16b)][_0x1de917(0x159)],_0x55ef9c=_0x56f6f3['body']['id'],_0x9ce845=_0x56f6f3['body'][_0x1de917(0x15b)];if(_0x55e0fa&&_0x9ce845)dbFileRecord[_0x1de917(0x14e)](_0x56f6f3[_0x1de917(0x152)][_0x1de917(0x163)],_0x9ce845,_0x56f6f3[_0x1de917(0x14d)]['id']);else{if(_0x55ef9c)dbFileRecord['delete'](_0x56f6f3[_0x1de917(0x152)]['dbOther'],_0x55ef9c,_0x56f6f3[_0x1de917(0x14d)]['id']);else return _0x6f8621[_0x1de917(0x16c)]({'code':0x1,'message':_0x1de917(0x14b)});}return _0x6f8621[_0x1de917(0x16c)]({'code':0x0});}),module[_0x24e1d7(0x14f)]=router;