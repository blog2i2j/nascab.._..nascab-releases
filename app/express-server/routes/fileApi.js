function _0x2ff0(_0x31624a,_0x1e83cc){const _0x448c32=_0x448c();return _0x2ff0=function(_0x2ff015,_0x525ca9){_0x2ff015=_0x2ff015-0x9c;let _0x2863ea=_0x448c32[_0x2ff015];return _0x2863ea;},_0x2ff0(_0x31624a,_0x1e83cc);}const _0xde79d0=_0x2ff0;(function(_0x152ae6,_0xdb94ce){const _0x455139=_0x2ff0,_0x3cf11f=_0x152ae6();while(!![]){try{const _0x5e364d=parseInt(_0x455139(0x104))/0x1+-parseInt(_0x455139(0x115))/0x2*(parseInt(_0x455139(0x10a))/0x3)+parseInt(_0x455139(0xfc))/0x4*(-parseInt(_0x455139(0xc7))/0x5)+-parseInt(_0x455139(0xcd))/0x6*(-parseInt(_0x455139(0xbe))/0x7)+-parseInt(_0x455139(0xbb))/0x8*(parseInt(_0x455139(0xa3))/0x9)+-parseInt(_0x455139(0xa7))/0xa*(-parseInt(_0x455139(0x101))/0xb)+parseInt(_0x455139(0x11a))/0xc;if(_0x5e364d===_0xdb94ce)break;else _0x3cf11f['push'](_0x3cf11f['shift']());}catch(_0x39987b){_0x3cf11f['push'](_0x3cf11f['shift']());}}}(_0x448c,0x7df89));let express=require('express'),router=express['Router'](),path=require('path'),fs=require('fs');const sharp=require(_0xde79d0(0xa9));function _0x448c(){const _0x16cba3=['dbFileIndex','exifInfo','increasePlayCount','prepare','indexId','sep','filename','toUpperCase','.JPG','quality','.txt','serverType','video','../../myConfig/config','8VCOhMD','/inOutTrash','parse','7NqfChM','getTime','/clearTinyImg','/rawFile*','deletePathAll','trash','updateById','audio/mpeg','fullPath','80ePJtgk','getFileHashNameByPathAndStat','username','push','../../db/dbUserTable','length','6102156mgcwwh','operation\x20fail','run','replace','genTinyFile','Unable\x20to\x20read\x20file','getIndexTableNameByType','TYPE_DELETE','tiny_path','transToMp3','.MOV','UPDATE\x20file_index_photo\x20SET\x20is_show=0\x20WHERE\x20path=?\x20AND\x20filename\x20=?','../../db/dbFileOperationRecord','get','json','stat','.HEIC','exifr','query','deleteIndexFolder','raw','updatePlayTime','ids','basename','sendStatus','isFile','LEVEL_MAIN_OPERATION','size','check_time','raw_filename','dirname','setHeader','body','path','app','doUserCanGet','code','power_get','dbOther','returnFileError','Content-Disposition','catch','image','includes','sendFile','decodePath','addFileOperationRecord','95624TPOjXM','photo','join','post','power_delete','9449GHnEwt','videoTypeList','params\x20is\x20not\x20valid','10194Mofwtt','end','STATE_SUC','status','bytes=0-1','pipe','3UPyosD','getFileHashName','download','file\x20not\x20found','music','headers','inOutTrash','log','.MP4','putInSystemTrash','../utils/sharpUtils','793330LbykAl','utf8','extname','Content-Type','set','9423156nspLms','UPDATE\x20file_index_photo\x20SET\x20is_show=1\x20WHERE\x20path=?\x20AND\x20filename\x20=?','/tinyImgByPath*','returnErrMsg','getById','delete','cachePath','then','is_file','currentUser','6604317kjlRsi','../utils/fileUtils','Convert\x20to\x20utf8\x20','../../db/dbMusicIndexTable','2520tfbmOH','attachment;\x20filename*=UTF-8\x27\x27','sharp','toLowerCase','returnDealedFile','../../db/dbFileIndexTable'];_0x448c=function(){return _0x16cba3;};return _0x448c();}let sharpUtil=require(_0xde79d0(0x114)),exifUtil=require(_0xde79d0(0xde)),fileUtil=require(_0xde79d0(0xa4));const config=require(_0xde79d0(0xba)),dbFileIndexTable=require(_0xde79d0(0xac)),dbFileOperationRecord=require(_0xde79d0(0xd9)),dbUserTable=require(_0xde79d0(0xcb)),dbMusicIndexTable=require(_0xde79d0(0xa6));let musicTransCodeUtil=require('../../utils/musicTransCodeUtil');const encodingUtil=require('../../utils/encodingUtil');function getIndexTableName(_0x206f77){const _0x332290=_0xde79d0;let _0xdaa733=dbFileIndexTable[_0x332290(0xd3)](_0x206f77);return _0xdaa733;}function getIndexObj(_0x54ec5e,_0x2ac6cd){const _0x14b8c5=_0xde79d0;let _0x5c3ec6=_0x54ec5e[_0x14b8c5(0xed)]['serverType']||_0x54ec5e[_0x14b8c5(0xdf)][_0x14b8c5(0xb8)],_0x454ea9=getIndexTableName(_0x5c3ec6);return dbFileIndexTable[_0x14b8c5(0x9d)](_0x54ec5e[_0x14b8c5(0xef)][_0x14b8c5(0xad)],_0x2ac6cd,_0x454ea9);}router[_0xde79d0(0xff)](_0xde79d0(0xbc),(_0x101b00,_0x248652,_0xf928a8)=>{const _0x6caa90=_0xde79d0;let _0x494144=_0x101b00[_0x6caa90(0xed)][_0x6caa90(0xe3)],_0x3a0265=_0x101b00['body']['trash'];if(dbUserTable[_0x6caa90(0xf0)](_0x101b00,_0x248652,_0x6caa90(0xfd),_0x6caa90(0x100))==!![]){if(_0x494144&&_0x494144['length']>0x0){let _0x830c27='(';for(let _0x10a3b4=0x0;_0x10a3b4<_0x494144[_0x6caa90(0xcc)];_0x10a3b4++){let _0x4bc41e=getIndexObj(_0x101b00,_0x494144[_0x10a3b4]);if(!_0x4bc41e)continue;_0x4bc41e[_0x6caa90(0xea)]!=null&&_0x4bc41e[_0x6caa90(0xea)]!=''&&_0x4bc41e[_0x6caa90(0xa1)]&&(_0x3a0265==0x1?_0x101b00['app'][_0x6caa90(0xad)][_0x6caa90(0xb0)](_0x6caa90(0x11b))[_0x6caa90(0xcf)](_0x4bc41e[_0x6caa90(0xee)],_0x4bc41e[_0x6caa90(0xea)]):_0x101b00[_0x6caa90(0xef)]['dbFileIndex'][_0x6caa90(0xb0)](_0x6caa90(0xd8))[_0x6caa90(0xcf)](_0x4bc41e['path'],_0x4bc41e[_0x6caa90(0xea)])),_0x830c27+=_0x494144[_0x10a3b4],_0x10a3b4!=_0x494144[_0x6caa90(0xcc)]-0x1&&(_0x830c27+=',');}_0x830c27+=')';let _0x12dc84=dbFileIndexTable[_0x6caa90(0x110)](_0x101b00[_0x6caa90(0xef)]['dbFileIndex'],_0x830c27,_0x3a0265,getIndexTableName(_0x101b00[_0x6caa90(0xed)][_0x6caa90(0xb8)]));_0x12dc84['changes']>0x0&&_0x248652[_0x6caa90(0xdb)]({'code':0x0,'count':_0x12dc84['changes']});}else{_0x248652['json']({'code':0x1,'message':'params\x20is\x20not\x20valid'});return;}}}),router[_0xde79d0(0xff)]('/deleteFromDisk',(_0x2da743,_0x5c8030,_0x4ffaf9)=>{const _0x2c8d39=_0xde79d0;let _0x22f786=_0x2da743[_0x2c8d39(0xed)]['ids'],_0x42868d=_0x2da743['body'][_0x2c8d39(0xb8)],_0x3b617c=_0x2da743[_0x2c8d39(0xed)][_0x2c8d39(0xe0)]==0x1,_0x35271e=_0x2da743['body']['ignoreLivephoto']==0x1,_0x4bb952=_0x2da743[_0x2c8d39(0xed)][_0x2c8d39(0x113)],_0x8e31e2=getIndexTableName(_0x42868d);function _0x59fba0(_0x5d597c,_0x32b6b0){const _0x3430e6=_0x2c8d39;dbFileOperationRecord[_0x3430e6(0xfb)](_0x2da743['app'][_0x3430e6(0xf3)],{'username':_0x2da743[_0x3430e6(0xa2)][_0x3430e6(0xc9)],'targetPath':_0x5d597c,'level':dbFileOperationRecord[_0x3430e6(0xe7)],'type':dbFileOperationRecord[_0x3430e6(0xd4)],'state':_0x32b6b0?dbFileOperationRecord[_0x3430e6(0x106)]:dbFileOperationRecord['STATE_FAIL']});}function _0x525944(_0x8b3e6e){const _0x420bf8=_0x2c8d39;if(_0x8b3e6e[_0x420bf8(0xa1)]==0x1&&_0x8b3e6e['is_livephoto']==0x1){let _0x233e94=path['join'](_0x8b3e6e['path'],_0x8b3e6e[_0x420bf8(0xb3)][_0x420bf8(0xd0)](_0x420bf8(0xd7),'')+_0x420bf8(0xdd));_0x8b3e6e[_0x420bf8(0xb3)]['endsWith']('.MP4')&&(_0x233e94=path['join'](_0x8b3e6e[_0x420bf8(0xee)],_0x8b3e6e[_0x420bf8(0xb3)][_0x420bf8(0xd0)](_0x420bf8(0x112),'')+_0x420bf8(0xb5))),fs['existsSync'](_0x233e94)&&_0xf23772(_0x8b3e6e,_0x233e94,![]);}}function _0xf23772(_0x215b43,_0x4a24d,_0x333e7d){const _0x3fe5d5=_0x2c8d39;_0x4bb952==0x1?(process['send']({'type':'shell','shellType':_0x3fe5d5(0xc3),'path':_0x4a24d}),_0x59fba0(_0x4a24d,!![])):fs['rm'](_0x4a24d,{'recursive':!![]},_0x3002dd=>{_0x3002dd?_0x59fba0(_0x4a24d,![]):_0x59fba0(_0x4a24d,!![]);}),_0x333e7d&&_0x525944(_0x215b43);}function _0x2e7b17(_0x562f21){const _0x4ab056=_0x2c8d39;dbFileIndexTable[_0x4ab056(0x9e)](_0x2da743[_0x4ab056(0xef)][_0x4ab056(0xad)],_0x562f21,_0x8e31e2);}function _0x2aab57(_0x3636f8,_0x373d7b){const _0x4f3527=_0x2c8d39;if(!_0x373d7b)return;dbFileIndexTable[_0x4f3527(0x9e)](_0x2da743[_0x4f3527(0xef)][_0x4f3527(0xad)],_0x3636f8,_0x8e31e2);let _0x5f13a7=dbFileIndexTable[_0x4f3527(0xc2)](_0x2da743[_0x4f3527(0xef)][_0x4f3527(0xad)],_0x373d7b,_0x8e31e2);}if(_0x22f786&&_0x22f786[_0x2c8d39(0xcc)]>0x0){let _0x1f5ae5=0x0,_0x4060fe=0x0,_0x144353=[];for(let _0x598b97=0x0;_0x598b97<_0x22f786[_0x2c8d39(0xcc)];_0x598b97++){let _0x581d3c=_0x22f786[_0x598b97],_0xde5e5c=getIndexObj(_0x2da743,_0x581d3c,_0x8e31e2);if(_0xde5e5c){if(dbUserTable[_0x2c8d39(0xf0)](_0x2da743,_0x5c8030,_0x42868d,_0x2c8d39(0x100),_0xde5e5c[_0x2c8d39(0xee)])==!![]){_0x1f5ae5+=0x1,_0x144353[_0x2c8d39(0xca)](_0x581d3c);let _0x464f25=path['join'](_0xde5e5c[_0x2c8d39(0xee)],path[_0x2c8d39(0xb2)],_0xde5e5c[_0x2c8d39(0xb3)]),_0x11deec=_0xde5e5c['is_file']==0x0;_0x3b617c&&(_0x464f25=_0xde5e5c[_0x2c8d39(0xee)],_0x11deec=!![]),_0x11deec?_0x2aab57(_0x581d3c,_0x464f25):_0x2e7b17(_0x581d3c),_0xf23772(_0xde5e5c,_0x464f25,!_0x35271e);}else _0x4060fe+=0x1;}}return _0x5c8030[_0x2c8d39(0xdb)]({'code':0x0,'deletedIds':_0x144353,'deleteCount':_0x1f5ae5,'errCount':_0x4060fe});}else return _0x2da743[_0x2c8d39(0xef)][_0x2c8d39(0x9c)](_0x5c8030,_0x2c8d39(0x103));});function genTinyForFilePath(_0x52f613,_0x54a80f,_0x217b73,_0x5992e3){const _0x52deef=_0xde79d0;let _0x44e9a9=path[_0x52deef(0x117)](_0x54a80f)?path['extname'](_0x54a80f)[_0x52deef(0xaa)]():null,_0x4ec589=![];if(config['imgTypeList'][_0x52deef(0xf8)](_0x44e9a9)||config['rawImgTypeList'][_0x52deef(0xf8)](_0x44e9a9[_0x52deef(0xaa)]()))_0x4ec589=_0x52deef(0xf7);else{if(config[_0x52deef(0x102)][_0x52deef(0xf8)](_0x44e9a9))_0x4ec589=_0x52deef(0xb9);else return _0x52f613[_0x52deef(0x107)](0x194)['end']();}sharpUtil[_0x52deef(0xd1)](_0x54a80f,path[_0x52deef(0xeb)](_0x217b73),path[_0x52deef(0xe4)](_0x217b73),_0x4ec589,null,_0x33cc3c=>{const _0x3945cc=_0x52deef;_0x52f613[_0x3945cc(0xf9)](_0x33cc3c);},_0x475928=>{const _0x340ee6=_0x52deef;return _0x52f613[_0x340ee6(0x107)](0x194)[_0x340ee6(0x105)]();},_0x5992e3);}function genTiny(_0x248082,_0x39389b,_0x4b5c64,_0x1590a0,_0x226917,_0x144558){const _0x5f16e1=_0xde79d0;let _0x5dac6f=_0x5f16e1(0xf7);_0x1590a0['type']==0x2&&(_0x5dac6f=_0x5f16e1(0xb9)),sharpUtil[_0x5f16e1(0xd1)](_0x4b5c64,path[_0x5f16e1(0xeb)](_0x144558),path[_0x5f16e1(0xe4)](_0x144558),_0x5dac6f,_0x1590a0,_0x5ed49b=>{const _0x568f4f=_0x5f16e1;dbFileIndexTable[_0x568f4f(0xc4)](_0x39389b,_0x1590a0['id'],_0x568f4f(0xd5),_0x5ed49b,_0x226917),_0x248082[_0x568f4f(0xf9)](_0x5ed49b);},_0x2b4dae=>{return _0x248082['status'](0x194)['end']();});}router['get']('/rawFileByPath*',(_0x34aeaa,_0x2412fb,_0x526576)=>{const _0x53be22=_0xde79d0;let _0x5f5bb1=_0x34aeaa[_0x53be22(0xdf)][_0x53be22(0xc6)];_0x5f5bb1=fileUtil[_0x53be22(0xfa)](_0x5f5bb1);let _0x4330e2=_0x34aeaa[_0x53be22(0xdf)][_0x53be22(0x10c)]==0x1,_0x2716af=_0x34aeaa[_0x53be22(0xdf)][_0x53be22(0xe8)],_0xd03f47=_0x34aeaa[_0x53be22(0xdf)][_0x53be22(0xb6)];fs[_0x53be22(0xdc)](_0x5f5bb1,(_0x3cb02e,_0x3f50dd)=>{const _0x4b0186=_0x53be22;if(_0x3cb02e)return _0x2412fb[_0x4b0186(0xe5)](0x194);if(dbUserTable[_0x4b0186(0xf0)](_0x34aeaa,_0x2412fb,'','power_get',_0x5f5bb1)==!![])try{let _0x230c68=_0x34aeaa['query'][_0x4b0186(0xe1)];if(_0x230c68&&_0x230c68==0x1){if(_0x4330e2){const _0x1fd2f0=encodeURIComponent(path[_0x4b0186(0xe4)](_0x5f5bb1))[_0x4b0186(0xd0)](/%([0-9A-F]{2})/g,(_0xfd7d27,_0x4b3b13)=>'%'+_0x4b3b13[_0x4b0186(0xb4)]());_0x2412fb[_0x4b0186(0xec)](_0x4b0186(0xf5),_0x4b0186(0xa8)+_0x1fd2f0);}return _0x2412fb[_0x4b0186(0xf9)](_0x5f5bb1);}sharpUtil['returnDealedFile'](_0x2412fb,_0x5f5bb1,_0x4330e2,_0x2716af,_0xd03f47);}catch(_0x483b5c){return _0x2412fb['status'](0x194)[_0x4b0186(0x105)]();}});}),router[_0xde79d0(0xda)](_0xde79d0(0x11c),(_0xa9369,_0x3e9a04,_0x531c1d)=>{const _0x2e66d3=_0xde79d0;let _0x4cf5b7=_0xa9369['query'][_0x2e66d3(0xc6)];_0x4cf5b7=fileUtil[_0x2e66d3(0xfa)](_0x4cf5b7);let _0x5e334d=_0xa9369[_0x2e66d3(0xdf)][_0x2e66d3(0xe8)];fs['stat'](_0x4cf5b7,(_0x1c3d1c,_0x98d1c0)=>{const _0x3c87c8=_0x2e66d3;if(_0x1c3d1c)return _0x3e9a04['sendStatus'](0x194);config[_0x3c87c8(0xc8)](_0x5e334d,_0x4cf5b7,_0x2fe24a=>{const _0x2ed8d=_0x3c87c8;if(!_0x2fe24a)return _0x3e9a04[_0x2ed8d(0xe5)](0x194);let _0x1cbec7=path[_0x2ed8d(0xfe)](config[_0x2ed8d(0x9f)],_0x2fe24a);dbUserTable[_0x2ed8d(0xf0)](_0xa9369,_0x3e9a04,'',_0x2ed8d(0xf2),_0x4cf5b7,!![])==!![]&&fs[_0x2ed8d(0xdc)](_0x1cbec7,(_0x28875e,_0x4bb9fe)=>{const _0x46f997=_0x2ed8d;if(_0x28875e)return genTinyForFilePath(_0x3e9a04,_0x4cf5b7,_0x1cbec7,_0x5e334d);return _0x4bb9fe[_0x46f997(0xe6)]()?_0x3e9a04[_0x46f997(0xf9)](_0x1cbec7):genTinyForFilePath(_0x3e9a04,_0x4cf5b7,_0x1cbec7,_0x5e334d);});});});}),router['get']('/tinyImg*',(_0x39e375,_0x1b1bbd,_0x5cc375)=>{const _0x5a6603=_0xde79d0;let _0x29be4b=_0x39e375[_0x5a6603(0xdf)][_0x5a6603(0xb1)],_0x59c3b8=_0x39e375['query'][_0x5a6603(0xb8)],_0x1aab84=getIndexTableName(_0x59c3b8),_0x1d74e7=getIndexObj(_0x39e375,_0x29be4b);if(!_0x1d74e7)return _0x1b1bbd[_0x5a6603(0x107)](0x194)[_0x5a6603(0x105)]();let _0x47f684=config[_0x5a6603(0x10b)](_0x1d74e7),_0x3967f5=path[_0x5a6603(0xfe)](config[_0x5a6603(0x9f)],_0x47f684);if(dbUserTable[_0x5a6603(0xf0)](_0x39e375,_0x1b1bbd,_0x59c3b8,'power_get',_0x1d74e7[_0x5a6603(0xee)])==!![]){let _0x384bc5=path[_0x5a6603(0xfe)](_0x1d74e7[_0x5a6603(0xee)],path[_0x5a6603(0xb2)],_0x1d74e7[_0x5a6603(0xb3)]);fs[_0x5a6603(0xdc)](_0x384bc5,(_0x19f1dd,_0x455d3c)=>{const _0x2e90a3=_0x5a6603;if(_0x19f1dd)return!_0x1d74e7[_0x2e90a3(0xd5)]?_0x1b1bbd[_0x2e90a3(0x107)](0x194)[_0x2e90a3(0x105)]():fs[_0x2e90a3(0xdc)](_0x1d74e7[_0x2e90a3(0xd5)],(_0xe90050,_0x2eb99e)=>{const _0x1d0e73=_0x2e90a3;return _0xe90050||_0x2eb99e&&!_0x2eb99e[_0x1d0e73(0xe6)]()?_0x1b1bbd[_0x1d0e73(0x107)](0x194)['end']():_0x1b1bbd[_0x1d0e73(0xf9)](_0x1d74e7[_0x1d0e73(0xd5)]);});if(!_0x455d3c['isFile']())return _0x1b1bbd[_0x2e90a3(0x107)](0x194)[_0x2e90a3(0x105)]();!_0x1d74e7['tiny_path']?fs[_0x2e90a3(0xdc)](_0x3967f5,(_0x144162,_0x446a50)=>{const _0x23211e=_0x2e90a3;if(_0x144162)return genTiny(_0x1b1bbd,_0x39e375[_0x23211e(0xef)][_0x23211e(0xad)],_0x384bc5,_0x1d74e7,_0x1aab84,_0x3967f5);return _0x446a50[_0x23211e(0xe6)]()&&_0x446a50[_0x23211e(0xe8)]>0x7d0?(dbFileIndexTable['updateById'](_0x39e375[_0x23211e(0xef)][_0x23211e(0xad)],_0x1d74e7['id'],_0x23211e(0xd5),_0x3967f5,_0x1aab84),_0x1b1bbd['sendFile'](_0x3967f5)):genTiny(_0x1b1bbd,_0x39e375[_0x23211e(0xef)]['dbFileIndex'],_0x384bc5,_0x1d74e7,_0x1aab84,_0x3967f5);}):fs['stat'](_0x1d74e7['tiny_path'],(_0x301349,_0x46d833)=>{const _0x569b53=_0x2e90a3;return _0x301349||!_0x46d833[_0x569b53(0xe6)]()?genTiny(_0x1b1bbd,_0x39e375[_0x569b53(0xef)][_0x569b53(0xad)],_0x384bc5,_0x1d74e7,_0x1aab84,_0x3967f5):_0x1b1bbd[_0x569b53(0xf9)](_0x1d74e7[_0x569b53(0xd5)]);});});}}),router[_0xde79d0(0xda)](_0xde79d0(0xc1),(_0x4186ff,_0x4a0726,_0x116b7f)=>{const _0x4db34d=_0xde79d0;let _0x25b870=_0x4186ff[_0x4db34d(0xdf)][_0x4db34d(0xb1)],_0x3546b0=_0x4186ff[_0x4db34d(0xdf)][_0x4db34d(0xb8)],_0x54af86=getIndexObj(_0x4186ff,_0x25b870),_0x5994b1=getIndexTableName(_0x3546b0),_0x5ad423=_0x4186ff['query'][_0x4db34d(0x10c)]==0x1,_0x2eeec7=_0x4186ff[_0x4db34d(0xdf)]['size'],_0x1d629b=_0x4186ff['query']['quality'];if(!_0x54af86)return _0x4a0726[_0x4db34d(0x107)](0x194)[_0x4db34d(0x105)]();if(dbUserTable[_0x4db34d(0xf0)](_0x4186ff,_0x4a0726,_0x3546b0,'power_get',_0x54af86[_0x4db34d(0xee)])==!![]){_0x3546b0==_0x4db34d(0x10e)&&(dbMusicIndexTable[_0x4db34d(0xaf)](_0x4186ff[_0x4db34d(0xef)]['dbFileIndex'],_0x25b870),dbMusicIndexTable[_0x4db34d(0xe2)](_0x4186ff['app'][_0x4db34d(0xad)],_0x25b870));dbFileIndexTable[_0x4db34d(0xc4)](_0x4186ff[_0x4db34d(0xef)]['dbFileIndex'],_0x25b870,_0x4db34d(0xe9),new Date()[_0x4db34d(0xbf)](),_0x5994b1);let _0x4daeb1=_0x54af86[_0x4db34d(0xee)]+path[_0x4db34d(0xb2)]+_0x54af86['filename'];fs[_0x4db34d(0xdc)](_0x4daeb1,(_0x45b88e,_0x1348a0)=>{const _0x40a515=_0x4db34d;if(_0x45b88e||!_0x1348a0[_0x40a515(0xe6)]())return _0x4a0726['status'](0x194)[_0x40a515(0x105)]();let _0x268cff=_0x4186ff[_0x40a515(0xdf)]['raw'];if(_0x268cff&&_0x268cff==0x1){if(_0x5ad423){const _0x6f3921=encodeURIComponent(path['basename'](_0x4daeb1))[_0x40a515(0xd0)](/%([0-9A-F]{2})/g,(_0x447f1c,_0x3134a1)=>'%'+_0x3134a1[_0x40a515(0xb4)]());_0x4a0726[_0x40a515(0xec)](_0x40a515(0xf5),_0x40a515(0xa8)+_0x6f3921);}return _0x4a0726[_0x40a515(0xf9)](_0x4daeb1);}if(_0x4186ff['query']['transToMp3']==0x1){_0x4a0726[_0x40a515(0x119)](_0x40a515(0x118),_0x40a515(0xc5));const _0x2ee903=_0x4186ff[_0x40a515(0x10f)]['range'];if(_0x40a515(0x108)==_0x2ee903)return _0x4a0726[_0x40a515(0xf9)](_0x4daeb1);return musicTransCodeUtil[_0x40a515(0xd6)](_0x4a0726,_0x4daeb1);}else _0x4186ff[_0x40a515(0xdf)][_0x40a515(0xf1)]&&_0x4186ff[_0x40a515(0xdf)][_0x40a515(0xf1)]==_0x40a515(0x116)&&path[_0x40a515(0x117)](_0x4daeb1)&&path[_0x40a515(0x117)](_0x4daeb1)[_0x40a515(0xaa)]()==_0x40a515(0xb7)?(console[_0x40a515(0x111)](_0x40a515(0xa5),_0x4daeb1),encodingUtil['getUtf8FileStream'](_0x4daeb1)[_0x40a515(0xa0)](_0x204452=>{const _0x236c08=_0x40a515;return _0x204452?_0x204452[_0x236c08(0x109)](_0x4a0726):(console[_0x236c08(0x111)](_0x236c08(0xd2),_0x4daeb1),_0x4a0726[_0x236c08(0xf9)](_0x4daeb1));})):sharpUtil[_0x40a515(0xab)](_0x4a0726,_0x4daeb1,_0x5ad423,_0x2eeec7,_0x1d629b);});}}),router[_0xde79d0(0xff)]('/getInfo',(_0x4de7e0,_0x4cb132,_0x261471)=>{const _0xce74a9=_0xde79d0;let _0x5712a4=_0x4de7e0[_0xce74a9(0xed)]['indexId'],_0x3dcc9e=getIndexObj(_0x4de7e0,_0x5712a4);if(!_0x3dcc9e)return _0x4cb132['status'](0x194)[_0xce74a9(0x105)]();if(dbUserTable[_0xce74a9(0xf0)](_0x4de7e0,_0x4cb132,'',_0xce74a9(0xf2),_0x3dcc9e[_0xce74a9(0xee)])==!![]){let _0x673b76=_0x3dcc9e[_0xce74a9(0xee)]+path[_0xce74a9(0xb2)]+_0x3dcc9e[_0xce74a9(0xb3)];exifUtil[_0xce74a9(0xbd)](_0x673b76)[_0xce74a9(0xa0)](_0x3aa7ed=>{const _0x26c10e=_0xce74a9;_0x3dcc9e[_0x26c10e(0xae)]=_0x3aa7ed,_0x4cb132[_0x26c10e(0xdb)]({'code':0x0,'data':_0x3dcc9e});})[_0xce74a9(0xf6)](_0x35adfe=>{const _0x3a6cb5=_0xce74a9;_0x3dcc9e['exifInfo']=![],_0x4cb132[_0x3a6cb5(0xdb)]({'code':0x0,'data':_0x3dcc9e});});}}),router[_0xde79d0(0xff)](_0xde79d0(0xc0),(_0x2b23f5,_0x3f7779,_0x1a684b)=>{const _0x43259d=_0xde79d0;let _0x1f62fc=_0x2b23f5[_0x43259d(0xed)][_0x43259d(0xb1)],_0xea034=getIndexObj(_0x2b23f5,_0x1f62fc),_0x3adc59=getIndexTableName(_0x2b23f5['query']['serverType']);if(!_0xea034)return _0x3f7779[_0x43259d(0xdb)]({'code':0x2,'message':_0x43259d(0x10d)});try{fs['rm'](_0xea034['tiny_path'],_0x3ff1bf=>{const _0x509e4f=_0x43259d;return _0x3ff1bf?fileUtil[_0x509e4f(0xf4)](_0x3f7779,_0x3ff1bf):(dbFileIndexTable[_0x509e4f(0xc4)](_0x2b23f5['app'][_0x509e4f(0xad)],_0x1f62fc,_0x509e4f(0xd5),'',_0x3adc59),_0x3f7779[_0x509e4f(0xdb)]({'code':0x0}));});}catch(_0x3471ea){return _0x3f7779[_0x43259d(0xdb)]({'code':0x2,'message':_0x43259d(0xce)});}}),module['exports']=router;