const _0x42f60e=_0x17ac;(function(_0x54ad62,_0x3e7b8f){const _0x2ab3a0=_0x17ac,_0x523687=_0x54ad62();while(!![]){try{const _0x54b776=parseInt(_0x2ab3a0(0x16a))/0x1*(-parseInt(_0x2ab3a0(0x1d5))/0x2)+parseInt(_0x2ab3a0(0x26e))/0x3+-parseInt(_0x2ab3a0(0x264))/0x4*(parseInt(_0x2ab3a0(0x23a))/0x5)+parseInt(_0x2ab3a0(0x1af))/0x6+-parseInt(_0x2ab3a0(0x1f6))/0x7*(parseInt(_0x2ab3a0(0x1b0))/0x8)+-parseInt(_0x2ab3a0(0x259))/0x9*(parseInt(_0x2ab3a0(0x254))/0xa)+parseInt(_0x2ab3a0(0x223))/0xb*(parseInt(_0x2ab3a0(0x178))/0xc);if(_0x54b776===_0x3e7b8f)break;else _0x523687['push'](_0x523687['shift']());}catch(_0x1e3aa3){_0x523687['push'](_0x523687['shift']());}}}(_0x4777,0x52c7e));var express=require(_0x42f60e(0x1cb)),router=express[_0x42f60e(0x207)]();let config=require('../../myConfig/config'),dbFileIndexTable=require(_0x42f60e(0x18e)),dbConfigTable=require(_0x42f60e(0x25b)),dbSourceTable=require(_0x42f60e(0x22f)),dbNoticeCenterTable=require(_0x42f60e(0x220)),netUtils=require('../utils/netUtils');const dbUserTable=require(_0x42f60e(0x1a2)),dbBackupTask=require('../../db/dbBackupTask'),OS=require('os');function _0x4777(){const _0x40d2af=['existsSync','httpsKey','type\x20is\x20invalid','../../db/dbNoticeCenterTable','\x20title\x20in\x20(\x27globalCpuInfo\x27,\x27globalMemInfo\x27,\x27','useFolderPictureAsPoster','44EvrXSe','unreadMsgCount','defaultTranscodeResolution','tokenKeepHour','music','httpsCertError','transCodeReadRate','count','ip\x20not\x20allow','taskId','imgFolderUsable','threadCount','../../db/dbSourceFolderTable','notSupportForAutoUpdate','systeminformation','defaultFTPPort','exec','globalIpList','/saveConfigPhoto','ipBan','transCodeCoderNameHevc','INDEX_TABLE_NAME_BOOK','apiServerHttps','5aSakUL','apiServer','INDEX_TABLE_NAME_MOVIE','cpu','shell','apiPortHttps','access','movieHomeShowLibrary','R_OK','need\x20path','cacheParentPath','getClientIp','moviePlaylongPressRate','custom','toUpperCase','/clearCache','/saveConfigCustom','startClassesAiWork','userDataFolder','defaultWebDavPortHttps','serverType','excludePathPhoto','value','cpus','\x27,\x27','INDEX_TABLE_NAME_MUSIC','24880ajiDbR','\x20title\x20in\x20(\x27apiServer\x27,\x27apiServerHttps\x27,\x27webDavServer\x27,\x27FTPServer\x27,\x27globalIpList\x27)','.webp','clearTable','transcodeSpeed','855ydgMbz','twoStepLogin','../../db/dbConfigTable','/setLanguage','bios','getAll','all','startsWith','push','slow','/deleteBgTask','2320852LTOyzw','autoLaunch','upload','battery','findByTitleArr','refreshIpList','title','notSupport','pragma','subtitlePreGen','1515489oSAOJh','stat','/openInSystem','returnFileError','140577MDECYS','length','operationFail','aiFaceEnable','movieDatabaseType','useNasCabCerts','total_size','medium','join','/getLanguage','excludeFilenamePhoto','doUserCanGet','serverName','error\x20keys','2201388KnWDHf','/resetIndex','baseboard','subtitle','autoShowWindow','audio','excludePathFolderBrowser','ipDetection','page','webDavHttpsKey','aiClassesEnable','hostname','autoScanSource','diskLayout','defaultWebDavPort','localhost','databaseFolder','platform','sharp','rotate','imgFolder','/changeCachePath','../../db/dbFileIndexTable','getUnReadCount','showMenuArr','../utils/nasAccountUtils','/saveConfig','cachePath','allConfig','body','constants','filename','/saveConfigMovie','dbOther','/getAllConfig','httpsCert','exports','crf','music-TitleType','get','version','toFile','../../db/dbUserTable','customHomeBgImage','then','id3tag','appRootPath','START_PRE_GEN_SUBTITLE','/relaunch','customLoginImage','stringify','excludePathMovie','tmdbProxyUrl','darwin','getDiskInfo','3363090adntEx','444200QAPndn','photo','apiPort','offset','movieHomeShowMyMedia','customLogoImage','webDavHttpsCert','/getServerState','power_get','movieTmdbApiUrl','../utils/sqliteUtil','isAdmin','prepare','../utils/fileUtils','defaultThreadCount','getIpList','webp','wifiNetworks','transCodeParams-CoderNameH264','startSimilarPhotoWork','globalIndexInfo','photoPreviewType','setting.portInvalid','task_id','language','log','send','express','getAllIndexInfo','getGlobalInfo','webDavPort','cacheImageInfo','memLayout','isWinDisk','\x20status=\x27running\x27\x20or\x20status=\x27waiting\x27','autoHardAccDecode','copy_size','6PDdFRv','ipMode','region','movieTmdbApiKey','deleteByTitle','keys','mkdir','catch','create','parse','graphics','vacuum','folderNotExist','bluetoothDevices','defaultMoviePlay','W_OK','isVip','force','post','networkInterfaces','/getSystemState','app','subtitleSize','SELECT\x20*\x20FROM\x20bg_task\x20WHERE\x20task_state=?\x20order\x20by\x20id\x20desc\x20limit\x20?\x20offset\x20?','getAllByWhere','SELECT\x20*\x20from\x20tour_record\x20where\x20page=?\x20and\x20version=?\x20and\x20username=?','aiFaceMinPhotoCount','totalmem','transCodeParams-CoderNameHevc','customShareUrl','json','currentUser','autoLoginClient','28RxSqrL','ultrafast','webDavPortHttps','movie','memTooLess','createSecureContext','book','port:\x20256-65500','/getServerIpAndSign','cpuTemperature','/getVersionInfo','movieShowMatchName','-----','movieHomeShowHistory','INDEX_TABLE_NAME_PHOTO','wal_checkpoint(RESTART)','tmdbProxyEnable','Router','cache','onlySupportOnServerApp','run','is_admin','FTPPort','includes','/getSystemInfomation','CRF:\x201-51','dbFileIndex','DELETE\x20FROM\x20bg_task\x20WHERE\x20id=?','transcodePath','usb','folder','returnErrMsg','REPLACE\x20INTO\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20tour_record(page,version,username)\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20VALUES(?,\x20?,?)','openPath','mem','getById','maxThreadCountIs','findByTitle','resize'];_0x4777=function(){return _0x40d2af;};return _0x4777();}let path=require('path'),fs=require('fs'),fileUtil=require(_0x42f60e(0x1bd));var package=require('../../../package.json');const sqliteUtil=require(_0x42f60e(0x1ba));let nasAccountUtil=require(_0x42f60e(0x191));function _0x17ac(_0x4863fb,_0x3d75fc){const _0x4777ed=_0x4777();return _0x17ac=function(_0x17acf9,_0x3e462d){_0x17acf9=_0x17acf9-0x167;let _0xa480f7=_0x4777ed[_0x17acf9];return _0xa480f7;},_0x17ac(_0x4863fb,_0x3d75fc);}const sharp=require(_0x42f60e(0x18a)),si=require(_0x42f60e(0x231));let tls=require('tls');function testCertAndKeyMatch(_0x3f6965,_0x131947){const _0x58099c=_0x42f60e;try{return tls[_0x58099c(0x1fb)]({'cert':_0x3f6965,'key':_0x131947}),!![];}catch(_0x53500e){return![];}}router[_0x42f60e(0x1e7)](_0x42f60e(0x200),(_0x526ed4,_0x12f291,_0x10eb41)=>{const _0x48415d=_0x42f60e;let _0x50a2a2=package[_0x48415d(0x1a0)],_0x4d5fc6=dbConfigTable['findByTitle'](_0x526ed4['app'][_0x48415d(0x199)],'versionInfo'),_0x2c68d5=dbConfigTable[_0x48415d(0x21b)](_0x526ed4['app'][_0x48415d(0x199)],_0x48415d(0x190));process[_0x48415d(0x1ca)]({'type':_0x48415d(0x1cd),'func':'getUpdateInfo'}),_0x12f291[_0x48415d(0x1f3)]({'code':0x0,'showMenuArr':_0x2c68d5?JSON['parse'](_0x2c68d5[_0x48415d(0x250)]):'','versionInfo':_0x4d5fc6?JSON['parse'](_0x4d5fc6['value']):'','currentVersion':_0x50a2a2});}),router[_0x42f60e(0x1e7)]('/updateNewVersion',(_0xe2c742,_0x199e91,_0x49109f)=>{const _0xac8afb=_0x42f60e;if(OS[_0xac8afb(0x189)]()!='win32'&&OS[_0xac8afb(0x189)]()!='darwin')return _0xe2c742[_0xac8afb(0x1ea)][_0xac8afb(0x215)](_0x199e91,_0x199e91['__'](_0xac8afb(0x230)));return process[_0xac8afb(0x1ca)]({'type':'startUpdate'}),_0x199e91['json']({'code':0x0});}),router[_0x42f60e(0x1e7)]('/getBgTask',(_0x2ab953,_0x1da992,_0x2000e9)=>{const _0x64abf2=_0x42f60e;let _0x304c37=netUtils[_0x64abf2(0x245)](_0x2ab953),_0x5aaba5=_0x2ab953['body']['taskState'],_0x5e6592=_0x2ab953[_0x64abf2(0x195)][_0x64abf2(0x22a)],_0x1f79d3=_0x2ab953[_0x64abf2(0x195)][_0x64abf2(0x1b3)],_0xae1cd3=[];if(_0x2ab953[_0x64abf2(0x1f4)]['is_admin']==0x1){_0xae1cd3=_0x2ab953[_0x64abf2(0x1ea)][_0x64abf2(0x199)]['prepare'](_0x64abf2(0x1ec))[_0x64abf2(0x25f)](_0x5aaba5,_0x5e6592,_0x1f79d3);let _0xe21bd6=dbBackupTask['getAllRecordByWhere'](_0x2ab953[_0x64abf2(0x1ea)][_0x64abf2(0x199)],_0x64abf2(0x1d2),[]);for(let _0x4f2774 in _0xe21bd6){let _0x36cfea=_0xe21bd6[_0x4f2774],_0x2fa02e=dbBackupTask[_0x64abf2(0x219)](_0x2ab953['app'][_0x64abf2(0x199)],_0x36cfea[_0x64abf2(0x1c7)]);_0xae1cd3[_0x64abf2(0x261)]({'task_type':'BACKUP','task_name':_0x2fa02e?_0x2fa02e['task_name']:'','size_current':_0x36cfea[_0x64abf2(0x1d4)],'size_all':_0x36cfea[_0x64abf2(0x170)]});}}let _0x13e542={'code':0x0,'data':_0xae1cd3,'reqIp':_0x304c37};return _0x1da992[_0x64abf2(0x1f3)](_0x13e542);}),router[_0x42f60e(0x1e7)](_0x42f60e(0x263),(_0xf5d491,_0x3edb77,_0x935675)=>{const _0x1a09d5=_0x42f60e;let _0x43bf3b=_0xf5d491[_0x1a09d5(0x195)][_0x1a09d5(0x22c)];dbUserTable[_0x1a09d5(0x1bb)](_0xf5d491,_0x3edb77)===!![]&&_0xf5d491[_0x1a09d5(0x1ea)][_0x1a09d5(0x199)][_0x1a09d5(0x1bc)](_0x1a09d5(0x211))[_0x1a09d5(0x20a)](_0x43bf3b);let _0x3fe92c={'code':0x0};return _0x3edb77[_0x1a09d5(0x1f3)](_0x3fe92c);}),router[_0x42f60e(0x1e7)]('/vaccumDb',(_0x541ceb,_0x42456e,_0x3d510e)=>{const _0x579b52=_0x42f60e;try{return _0x541ceb['app']['dbOther']['exec'](_0x579b52(0x1e0)),_0x541ceb[_0x579b52(0x1ea)][_0x579b52(0x210)][_0x579b52(0x233)](_0x579b52(0x1e0)),_0x541ceb[_0x579b52(0x1ea)][_0x579b52(0x199)][_0x579b52(0x26c)]('wal_checkpoint(RESTART)'),_0x541ceb[_0x579b52(0x1ea)][_0x579b52(0x210)]['pragma'](_0x579b52(0x205)),_0x42456e[_0x579b52(0x1f3)]({'code':0x0});}catch(_0x383b9a){return _0x541ceb[_0x579b52(0x1ea)][_0x579b52(0x215)](_0x42456e,_0x42456e['__'](_0x579b52(0x16c)));}}),router[_0x42f60e(0x1e7)](_0x42f60e(0x179),(_0x224fc3,_0x5c6a77,_0x33fdcd)=>{const _0x12dc39=_0x42f60e;if(_0x224fc3['currentUser']['is_admin']!=0x1)return _0x5c6a77[_0x12dc39(0x1f3)]({'code':0x66});let _0x2c47dd=_0x224fc3[_0x12dc39(0x195)][_0x12dc39(0x24e)];dbSourceTable['clearTable'](_0x224fc3[_0x12dc39(0x1ea)]['dbOther'],_0x2c47dd);if(_0x2c47dd==_0x12dc39(0x1f9))dbFileIndexTable[_0x12dc39(0x257)](_0x224fc3[_0x12dc39(0x1ea)][_0x12dc39(0x210)],dbFileIndexTable[_0x12dc39(0x23c)]);else{if(_0x2c47dd==_0x12dc39(0x1b1))dbFileIndexTable[_0x12dc39(0x257)](_0x224fc3[_0x12dc39(0x1ea)][_0x12dc39(0x210)],dbFileIndexTable['INDEX_TABLE_NAME_PHOTO']);else{if(_0x2c47dd==_0x12dc39(0x227))dbFileIndexTable[_0x12dc39(0x257)](_0x224fc3['app'][_0x12dc39(0x210)],dbFileIndexTable[_0x12dc39(0x253)]);else _0x2c47dd==_0x12dc39(0x1fc)&&dbFileIndexTable['clearTable'](_0x224fc3[_0x12dc39(0x1ea)][_0x12dc39(0x210)],dbFileIndexTable[_0x12dc39(0x238)]);}}_0x5c6a77[_0x12dc39(0x1f3)]({'code':0x0});}),router[_0x42f60e(0x1e7)](_0x42f60e(0x1fe),(_0x271510,_0x20d324,_0x4a1b30)=>{const _0x22f64b=_0x42f60e;process[_0x22f64b(0x1ca)]({'type':'getGlobalInfo','func':_0x22f64b(0x1bf)});let _0x5e3151=dbConfigTable[_0x22f64b(0x21b)](_0x271510[_0x22f64b(0x1ea)][_0x22f64b(0x199)],_0x22f64b(0x234)),_0x270662=dbConfigTable['findByTitle'](_0x271510[_0x22f64b(0x1ea)][_0x22f64b(0x199)],_0x22f64b(0x23b)),_0x5db454=dbConfigTable[_0x22f64b(0x21b)](_0x271510[_0x22f64b(0x1ea)][_0x22f64b(0x199)],_0x22f64b(0x239)),_0x4d7ea8={'code':0x0,'ipList':_0x5e3151,'apiServer':_0x270662,'apiServerHttps':_0x5db454,'hostName':OS[_0x22f64b(0x183)]()};return _0x20d324[_0x22f64b(0x1f3)](_0x4d7ea8);}),router[_0x42f60e(0x1e7)](_0x42f60e(0x1b7),(_0x32cafd,_0x46dd36,_0x5db559)=>{const _0x26da63=_0x42f60e;let _0x106c0e=netUtils[_0x26da63(0x245)](_0x32cafd),_0x408705=_0x32cafd[_0x26da63(0x195)][_0x26da63(0x176)],_0x277599;_0x408705==_0x26da63(0x25f)?(process['send']({'type':_0x26da63(0x1cd),'func':_0x26da63(0x1bf)}),_0x277599=dbConfigTable[_0x26da63(0x1ed)](_0x32cafd['app'][_0x26da63(0x199)],_0x26da63(0x255))):_0x277599=dbConfigTable[_0x26da63(0x21b)](_0x32cafd[_0x26da63(0x1ea)][_0x26da63(0x199)],_0x408705);let _0x8b033c=dbConfigTable[_0x26da63(0x21b)](_0x32cafd[_0x26da63(0x1ea)][_0x26da63(0x199)],'ddnsIpv6Address'),_0x3b8354={'code':0x0,'data':_0x277599,'hostName':OS[_0x26da63(0x183)](),'reqIp':_0x106c0e};_0x8b033c&&_0x8b033c[_0x26da63(0x250)]&&(_0x3b8354['ddnsIpv6Address']=_0x8b033c[_0x26da63(0x250)]);let _0xe55cf6=dbNoticeCenterTable[_0x26da63(0x18f)](_0x32cafd['app'][_0x26da63(0x199)]);return _0x3b8354[_0x26da63(0x224)]=_0xe55cf6['count'],_0x46dd36[_0x26da63(0x1f3)](_0x3b8354);}),router[_0x42f60e(0x1e7)](_0x42f60e(0x1e9),(_0x3d1035,_0x5366aa,_0x4ada3a)=>{const _0x5b3df5=_0x42f60e;let _0x4f67bf=netUtils['getClientIp'](_0x3d1035),_0x282221=_0x3d1035[_0x5b3df5(0x195)][_0x5b3df5(0x1e6)],_0x5edc55=_0x5b3df5(0x1c4)+dbFileIndexTable[_0x5b3df5(0x23c)],_0x339034='globalIndexInfo'+dbFileIndexTable[_0x5b3df5(0x204)];process[_0x5b3df5(0x1ca)]({'type':_0x5b3df5(0x1cd),'func':_0x5b3df5(0x1cc)}),process['send']({'type':_0x5b3df5(0x1cd),'func':_0x5b3df5(0x1ae),'force':_0x282221}),fs['stat'](config[_0x5b3df5(0x244)],_0x368520=>{const _0x5ce29f=_0x5b3df5;if(_0x368520)return _0x3d1035[_0x5ce29f(0x1ea)][_0x5ce29f(0x215)](_0x5366aa,_0x5366aa['__']('cachePathInvalid'));else{let _0x5f0502=dbConfigTable['getAllByWhere'](_0x3d1035['app'][_0x5ce29f(0x199)],_0x5ce29f(0x221)+_0x5edc55+_0x5ce29f(0x252)+_0x339034+'\x27,\x27globalDiskInfo\x27)');return _0x5366aa['json']({'code':0x0,'data':_0x5f0502,'version':package['version'],'reqIp':_0x4f67bf,'platform':OS[_0x5ce29f(0x189)]()});}});}),router['post']('/shouldShowTour',(_0x51faca,_0x5b0ce3,_0x3e0e08)=>{const _0x41b087=_0x42f60e;let _0x29945b=_0x51faca['body'][_0x41b087(0x180)],_0x151a53=package['version'],_0x7ee72f=_0x51faca[_0x41b087(0x1f4)]['username'],_0x338289=_0x51faca[_0x41b087(0x1ea)]['dbOther'][_0x41b087(0x1bc)](_0x41b087(0x1ee))[_0x41b087(0x19f)](_0x29945b,_0x151a53,_0x7ee72f);if(!_0x338289){const _0x16cca2=_0x41b087(0x216);_0x51faca[_0x41b087(0x1ea)][_0x41b087(0x199)]['prepare'](_0x16cca2)[_0x41b087(0x20a)](_0x29945b,_0x151a53,_0x7ee72f);}return _0x5b0ce3[_0x41b087(0x1f3)]({'code':0x0,'show':_0x338289?0x0:0x1});}),router['post'](_0x42f60e(0x19a),(_0x5ae58e,_0x4d6829,_0x2f889d)=>{const _0x30f89c=_0x42f60e;let _0x481fce=_0x5ae58e[_0x30f89c(0x195)][_0x30f89c(0x1da)],_0x117bfc;if(_0x481fce&&_0x481fce[_0x30f89c(0x16b)]>0x0){if(sqliteUtil['checkSqlInjection'](_0x481fce)==!![])return _0x5ae58e[_0x30f89c(0x1ea)][_0x30f89c(0x215)](_0x4d6829,_0x30f89c(0x177));_0x117bfc=dbConfigTable[_0x30f89c(0x268)](_0x5ae58e[_0x30f89c(0x1ea)]['dbOther'],_0x481fce);}else _0x117bfc=dbConfigTable[_0x30f89c(0x25e)](_0x5ae58e[_0x30f89c(0x1ea)][_0x30f89c(0x199)]);for(let _0x5ac7f4 in _0x117bfc){let _0x1936ff=_0x117bfc[_0x5ac7f4];(_0x1936ff['title']==_0x30f89c(0x19b)||_0x1936ff[_0x30f89c(0x26a)]==_0x30f89c(0x21e))&&(!_0x1936ff[_0x30f89c(0x250)][_0x30f89c(0x260)](_0x30f89c(0x202))&&(_0x1936ff[_0x30f89c(0x250)]=''));}let _0x22bef9={};_0x22bef9['defaultApiPort']=config[_0x30f89c(0x1b2)],_0x22bef9['defaultApiPortHttps']=config[_0x30f89c(0x23f)],_0x22bef9[_0x30f89c(0x186)]=config[_0x30f89c(0x1ce)],_0x22bef9[_0x30f89c(0x24d)]=config[_0x30f89c(0x1f8)],_0x22bef9[_0x30f89c(0x232)]=config[_0x30f89c(0x20c)],_0x22bef9[_0x30f89c(0x1be)]=0x2,_0x22bef9[_0x30f89c(0x194)]=_0x117bfc,nasAccountUtil[_0x30f89c(0x1e5)](null,_0x5ae58e[_0x30f89c(0x1ea)][_0x30f89c(0x199)])[_0x30f89c(0x1a4)](_0x537f38=>{const _0x135196=_0x30f89c;_0x4d6829[_0x135196(0x1f3)]({'code':0x0,'data':_0x22bef9,'isVip':_0x537f38});});}),router[_0x42f60e(0x1e7)](_0x42f60e(0x173),(_0x498cf0,_0x1ffe12,_0x458b68)=>{const _0x33f9f6=_0x42f60e;let _0x3167=dbConfigTable[_0x33f9f6(0x21b)](_0x498cf0[_0x33f9f6(0x1ea)][_0x33f9f6(0x199)],_0x33f9f6(0x1c8)),_0x180aa6='';_0x3167&&(_0x180aa6=_0x3167[_0x33f9f6(0x250)]),_0x1ffe12[_0x33f9f6(0x1f3)]({'code':0x0,'data':_0x180aa6});}),router[_0x42f60e(0x1e7)](_0x42f60e(0x25c),(_0x4d437b,_0xc71949,_0x2cb8c7)=>{const _0xe75be2=_0x42f60e;let _0x75a14=netUtils['getClientIp'](_0x4d437b);if(_0x75a14!=_0xe75be2(0x187))return _0xe75be2(0x22b);let _0x1bf77e=_0x4d437b[_0xe75be2(0x195)]['language'],_0xeb6708=_0x4d437b[_0xe75be2(0x195)]['region'];return _0x1bf77e&&dbConfigTable[_0xe75be2(0x1dd)](_0x4d437b['app'][_0xe75be2(0x199)],{'title':'language','value':_0x1bf77e}),_0xeb6708&&dbConfigTable[_0xe75be2(0x1dd)](_0x4d437b[_0xe75be2(0x1ea)][_0xe75be2(0x199)],{'title':_0xe75be2(0x1d7),'value':_0xeb6708}),_0xc71949[_0xe75be2(0x1f3)]({'code':0x0});});function saveConfig(_0x5014a4,_0xca277,_0x31cdb5){const _0x38d69d=_0x42f60e;dbConfigTable[_0x38d69d(0x1dd)](_0x5014a4,{'title':_0xca277,'value':_0x31cdb5+''});}router[_0x42f60e(0x1e7)](_0x42f60e(0x18d),(_0x4a30c5,_0x179f55,_0x4cee7b)=>{const _0xa5e408=_0x42f60e;let _0x46f48f=_0x4a30c5['body'][_0xa5e408(0x193)];if(_0x4a30c5[_0xa5e408(0x1f4)][_0xa5e408(0x20b)]!=0x1)return _0x179f55[_0xa5e408(0x1f3)]({'code':0x66});if(_0x46f48f)fs[_0xa5e408(0x240)](_0x46f48f,fs[_0xa5e408(0x196)]['W_OK']|fs[_0xa5e408(0x196)][_0xa5e408(0x242)],_0x132f17=>{const _0x18aa68=_0xa5e408;return!_0x132f17?(saveConfig(_0x4a30c5[_0x18aa68(0x1ea)][_0x18aa68(0x199)],_0x18aa68(0x244),_0x46f48f),_0x179f55[_0x18aa68(0x1f3)]({'code':0x0})):fileUtil['returnFileError'](_0x179f55,_0x132f17);});else return dbConfigTable[_0xa5e408(0x1d9)](_0x4a30c5[_0xa5e408(0x1ea)][_0xa5e408(0x199)],_0xa5e408(0x244)),_0x179f55['json']({'code':0x0});});let forbiddenPorts=[0x1,0x7,0x9,0xb,0xd,0xf,0x11,0x13,0x14,0x15,0x16,0x17,0x19,0x25,0x2a,0x2b,0x35,0x4d,0x4f,0x57,0x5f,0x65,0x66,0x67,0x68,0x6d,0x6e,0x6f,0x71,0x73,0x75,0x77,0x7b,0x87,0x8b,0x8f,0xb3,0x185,0x1d1,0x200,0x201,0x202,0x203,0x20e,0x212,0x213,0x214,0x21c,0x22c,0x233,0x24b,0x259,0x27c,0x3e1,0x3e3,0x801,0xe4b,0xfcd,0x1770,0x1a09,0x1a0a,0x1a0b,0x1a0c,0x1a0d,0xd3d];router[_0x42f60e(0x1e7)](_0x42f60e(0x192),(_0x22a6a1,_0x22c67a,_0x65fd4a)=>{const _0x35e377=_0x42f60e;let _0x4546d2=_0x22a6a1[_0x35e377(0x195)][_0x35e377(0x1b2)],_0x372d7f=_0x22a6a1[_0x35e377(0x195)]['apiPortHttps'],_0x4d0712=_0x22a6a1[_0x35e377(0x195)][_0x35e377(0x1ce)],_0x43bd06=_0x22a6a1[_0x35e377(0x195)][_0x35e377(0x1f8)],_0x382f25=_0x22a6a1['body'][_0x35e377(0x20c)],_0x1ca51a=_0x22a6a1[_0x35e377(0x195)][_0x35e377(0x265)],_0x582f05=_0x22a6a1[_0x35e377(0x195)][_0x35e377(0x1f5)],_0xf9ec5d=_0x22a6a1[_0x35e377(0x195)]['autoShowWindow'],_0x1825dc=_0x22a6a1[_0x35e377(0x195)][_0x35e377(0x184)],_0x121ee1=_0x22a6a1[_0x35e377(0x195)][_0x35e377(0x21e)],_0x279bbf=_0x22a6a1[_0x35e377(0x195)][_0x35e377(0x19b)],_0x19d495=_0x22a6a1[_0x35e377(0x195)][_0x35e377(0x181)],_0x2ea206=_0x22a6a1[_0x35e377(0x195)][_0x35e377(0x1b6)],_0x3da93a=_0x22a6a1['body'][_0x35e377(0x1c8)],_0x2a1de3=_0x22a6a1[_0x35e377(0x195)][_0x35e377(0x1d7)],_0x55014e=_0x22a6a1[_0x35e377(0x195)][_0x35e377(0x22e)],_0x3c94a6=_0x22a6a1['body'][_0x35e377(0x1ab)],_0xd8a3a=_0x22a6a1[_0x35e377(0x195)][_0x35e377(0x24f)],_0x28207c=_0x22a6a1['body'][_0x35e377(0x17e)],_0x275db1=_0x22a6a1[_0x35e377(0x195)]['excludeFilenameMovie'],_0x46930a=_0x22a6a1[_0x35e377(0x195)]['excludeFilenamePhoto'],_0x19a5a9=_0x22a6a1[_0x35e377(0x195)][_0x35e377(0x190)],_0x3b395a=_0x22a6a1[_0x35e377(0x195)][_0x35e377(0x226)],_0x3d82e7=_0x22a6a1['body'][_0x35e377(0x1f2)],_0x17f996=_0x22a6a1[_0x35e377(0x195)]['webDavUseApiCert'];if(_0x22a6a1[_0x35e377(0x1f4)][_0x35e377(0x20b)]!=0x1)return _0x22c67a[_0x35e377(0x1f3)]({'code':0x66});let _0x335927=0xffdc;if(_0x4546d2>_0x335927||_0x4d0712>_0x335927||_0x382f25>_0x335927||_0x43bd06>_0x335927)return _0x22c67a['json']({'code':0x1,'message':_0x35e377(0x1fd)});let _0x4b1282=_0x22a6a1['app'][_0x35e377(0x199)];_0x19a5a9&&saveConfig(_0x4b1282,_0x35e377(0x190),JSON[_0x35e377(0x1aa)](_0x19a5a9));_0x3d82e7&&saveConfig(_0x4b1282,_0x35e377(0x1f2),_0x3d82e7);_0x3c94a6&&saveConfig(_0x4b1282,_0x35e377(0x1ab),JSON[_0x35e377(0x1aa)](_0x3c94a6));_0x3b395a&&parseInt(_0x3b395a)!=NaN&&_0x3b395a>0x0&&_0x3b395a<0x5f5e0ff&&saveConfig(_0x4b1282,_0x35e377(0x226),_0x3b395a);_0xd8a3a&&saveConfig(_0x4b1282,_0x35e377(0x24f),JSON['stringify'](_0xd8a3a));_0x2a1de3&&saveConfig(_0x4b1282,_0x35e377(0x1d7),_0x2a1de3);if(_0x28207c){let _0x22d7bc=netUtils[_0x35e377(0x245)](_0x22a6a1);if(_0x22d7bc=='localhost'){for(let _0x1577a7 in _0x28207c){let _0x340efb=_0x28207c[_0x1577a7],_0x262726=fs[_0x35e377(0x21d)](_0x340efb);if(!_0x262726)return _0x22a6a1['app'][_0x35e377(0x215)](_0x22c67a,_0x22c67a['__']('folderNotExist')+':'+_0x340efb);fileUtil[_0x35e377(0x1d1)](_0x340efb)&&(_0x28207c[_0x1577a7]=_0x340efb[_0x35e377(0x248)]());}saveConfig(_0x4b1282,'excludePathFolderBrowser',JSON[_0x35e377(0x1aa)](_0x28207c));}else return _0x22a6a1[_0x35e377(0x1ea)][_0x35e377(0x215)](_0x22c67a,_0x22c67a['__'](_0x35e377(0x209)));}_0x275db1&&saveConfig(_0x4b1282,'excludeFilenameMovie',JSON[_0x35e377(0x1aa)](_0x275db1));_0x46930a&&saveConfig(_0x4b1282,_0x35e377(0x174),JSON['stringify'](_0x46930a));if(_0x4546d2){if(forbiddenPorts['includes'](parseInt(_0x4546d2)))return _0x22a6a1[_0x35e377(0x1ea)][_0x35e377(0x215)](_0x22c67a,_0x22c67a['__'](_0x35e377(0x1c6))+':http');saveConfig(_0x4b1282,'apiPort',parseInt(_0x4546d2));}if(_0x372d7f){if(forbiddenPorts[_0x35e377(0x20d)](parseInt(_0x372d7f))||_0x372d7f==_0x4546d2)return _0x22a6a1[_0x35e377(0x1ea)][_0x35e377(0x215)](_0x22c67a,_0x22c67a['__'](_0x35e377(0x1c6))+':https');saveConfig(_0x4b1282,_0x35e377(0x23f),parseInt(_0x372d7f));}_0x22a6a1[_0x35e377(0x195)][_0x35e377(0x236)]&&saveConfig(_0x4b1282,'ipBan',_0x22a6a1[_0x35e377(0x195)][_0x35e377(0x236)]);_0x22a6a1[_0x35e377(0x195)]['ipMode']&&(saveConfig(_0x4b1282,'ipMode',_0x22a6a1[_0x35e377(0x195)][_0x35e377(0x1d6)]),_0x22a6a1['app'][_0x35e377(0x269)]());_0x22a6a1['body'][_0x35e377(0x17f)]&&saveConfig(_0x4b1282,_0x35e377(0x17f),_0x22a6a1[_0x35e377(0x195)][_0x35e377(0x17f)]);_0x22a6a1[_0x35e377(0x195)]['twoStepLogin']&&saveConfig(_0x4b1282,_0x35e377(0x25a),_0x22a6a1[_0x35e377(0x195)][_0x35e377(0x25a)]);_0x4d0712&&saveConfig(_0x4b1282,_0x35e377(0x1ce),parseInt(_0x4d0712));_0x43bd06&&saveConfig(_0x4b1282,'webDavPortHttps',parseInt(_0x43bd06));_0x382f25&&saveConfig(_0x4b1282,_0x35e377(0x20c),parseInt(_0x382f25));_0x1ca51a&&saveConfig(_0x4b1282,_0x35e377(0x265),_0x1ca51a);_0x582f05&&saveConfig(_0x4b1282,_0x35e377(0x1f5),_0x582f05);_0xf9ec5d&&saveConfig(_0x4b1282,_0x35e377(0x17c),_0xf9ec5d);_0x1825dc&&saveConfig(_0x4b1282,_0x35e377(0x184),_0x1825dc);let _0x382d34=dbConfigTable[_0x35e377(0x21b)](_0x22a6a1[_0x35e377(0x1ea)][_0x35e377(0x199)],_0x35e377(0x16f));if(!_0x382d34||_0x382d34[_0x35e377(0x250)]==0x0){if(_0x121ee1!='*'&&_0x279bbf!='*'){if(_0x121ee1&&_0x279bbf){if(!_0x121ee1[_0x35e377(0x260)]('-----')||!_0x279bbf[_0x35e377(0x260)]('-----'))return _0x22a6a1[_0x35e377(0x1ea)][_0x35e377(0x215)](_0x22c67a,_0x22c67a['__'](_0x35e377(0x228)));const _0x2b4d90=testCertAndKeyMatch(_0x279bbf,_0x121ee1);if(!_0x2b4d90)return _0x22a6a1[_0x35e377(0x1ea)][_0x35e377(0x215)](_0x22c67a,_0x22c67a['__'](_0x35e377(0x228)));saveConfig(_0x4b1282,_0x35e377(0x21e),_0x121ee1),saveConfig(_0x4b1282,_0x35e377(0x19b),_0x279bbf);}else saveConfig(_0x4b1282,_0x35e377(0x21e),''),saveConfig(_0x4b1282,_0x35e377(0x19b),'');}}_0x17f996&&saveConfig(_0x4b1282,'webDavUseApiCert',_0x17f996);_0x17f996=dbConfigTable[_0x35e377(0x21b)](_0x22a6a1[_0x35e377(0x1ea)][_0x35e377(0x199)],'webDavUseApiCert');if(!_0x17f996||_0x17f996[_0x35e377(0x250)]==0x0){if(_0x19d495!='*'&&_0x2ea206!='*'){if(_0x19d495&&_0x2ea206){if(!_0x19d495['startsWith']('-----')||!_0x2ea206[_0x35e377(0x260)]('-----'))return _0x22a6a1[_0x35e377(0x1ea)]['returnErrMsg'](_0x22c67a,_0x22c67a['__']('httpsCertError'));const _0x4f9b4f=testCertAndKeyMatch(_0x19d495,_0x2ea206);if(!_0x4f9b4f)return _0x22a6a1[_0x35e377(0x1ea)]['returnErrMsg'](_0x22c67a,_0x22c67a['__'](_0x35e377(0x228)));saveConfig(_0x4b1282,_0x35e377(0x181),_0x19d495),saveConfig(_0x4b1282,'webDavHttpsCert',_0x2ea206);}else saveConfig(_0x4b1282,'webDavHttpsKey',''),saveConfig(_0x4b1282,_0x35e377(0x1b6),'');}}_0x3da93a&&saveConfig(_0x4b1282,'language',_0x3da93a);if(_0x55014e){if(_0x55014e>OS['cpus']()[_0x35e377(0x16b)])return _0x22a6a1[_0x35e377(0x1ea)][_0x35e377(0x215)](_0x22c67a,_0x22c67a['__'](_0x35e377(0x21a))+OS[_0x35e377(0x251)]()[_0x35e377(0x16b)]);saveConfig(_0x4b1282,_0x35e377(0x22e),_0x55014e);}return _0x22c67a[_0x35e377(0x1f3)]({'code':0x0});}),router[_0x42f60e(0x1e7)](_0x42f60e(0x235),(_0xa297f3,_0xa7fb13,_0x3670f0)=>{const _0x5d5537=_0x42f60e;if(_0xa297f3[_0x5d5537(0x1f4)][_0x5d5537(0x20b)]!=0x1)return _0xa7fb13['json']({'code':0x66});let _0x3c6cb4=_0xa297f3['app'][_0x5d5537(0x199)],_0x193fda=_0xa297f3[_0x5d5537(0x195)][_0x5d5537(0x182)],_0x4839f1=_0xa297f3[_0x5d5537(0x195)][_0x5d5537(0x16d)],_0x46690b=_0xa297f3[_0x5d5537(0x195)]['aiSimilarPhotoEnable'],_0x5d14f7=_0xa297f3['body'][_0x5d5537(0x1ef)],_0x3d5d47=_0xa297f3[_0x5d5537(0x195)][_0x5d5537(0x1c5)],_0x37dec4=_0xa297f3[_0x5d5537(0x195)]['photoPreviewSize'];_0x3d5d47&&saveConfig(_0x3c6cb4,'photoPreviewType',_0x3d5d47);_0x37dec4&&saveConfig(_0x3c6cb4,'photoPreviewSize',_0x37dec4);if(_0x193fda){if(_0x193fda==0x1){if(OS[_0x5d5537(0x1f0)]()/0x400/0x400/0x400<0x3)return _0xa297f3[_0x5d5537(0x1ea)][_0x5d5537(0x215)](_0xa7fb13,_0xa7fb13['__'](_0x5d5537(0x1fa)));}saveConfig(_0x3c6cb4,_0x5d5537(0x182),_0x193fda);if(_0x193fda==0x1)process[_0x5d5537(0x1ca)]({'type':_0x5d5537(0x24b)});}_0x5d14f7&&saveConfig(_0x3c6cb4,_0x5d5537(0x1ef),_0x5d14f7);if(_0x4839f1){if(_0x4839f1==0x1){if(OS[_0x5d5537(0x1f0)]()/0x400/0x400/0x400<0x3)return _0xa297f3[_0x5d5537(0x1ea)][_0x5d5537(0x215)](_0xa7fb13,_0xa7fb13['__'](_0x5d5537(0x1fa)));}saveConfig(_0x3c6cb4,'aiFaceEnable',_0x4839f1);if(_0x4839f1==0x1)process[_0x5d5537(0x1ca)]({'type':'startFaceAiWork'});}if(_0x46690b){saveConfig(_0x3c6cb4,'aiSimilarPhotoEnable',_0x46690b);if(_0x46690b==0x1)process['send']({'type':_0x5d5537(0x1c3)});}return _0xa7fb13[_0x5d5537(0x1f3)]({'code':0x0});}),router['post'](_0x42f60e(0x24a),(_0x115265,_0x9f734a,_0x3f6a28)=>{const _0x35243f=_0x42f60e;if(_0x115265[_0x35243f(0x1f4)][_0x35243f(0x20b)]!=0x1)return _0x9f734a['json']({'code':0x66});let _0x200530=_0x115265[_0x35243f(0x1ea)]['dbOther'],_0x223a3a=_0x115265[_0x35243f(0x195)]['customLoginTitle'],_0x1a8aa1=_0x115265[_0x35243f(0x195)]['customLogoImage'],_0x32682b=_0x115265['body'][_0x35243f(0x1a9)],_0x2ef9c3=_0x115265[_0x35243f(0x195)]['customHomeBgImage'];function _0x35d4dc(_0x3d7789,_0x35547a,_0x3e61c5){const _0x3ca43d=_0x35243f;nasAccountUtil[_0x3ca43d(0x1e5)](null,_0x115265[_0x3ca43d(0x1ea)][_0x3ca43d(0x199)])[_0x3ca43d(0x1a4)](_0x3ef348=>{const _0x414423=_0x3ca43d;if(_0x35547a=='-')return saveConfig(_0x200530,_0x3d7789,'-'),_0x9f734a[_0x414423(0x1f3)]({'code':0x0});if(!_0x3ef348)return _0x115265['app'][_0x414423(0x215)](_0x9f734a,_0x9f734a['__']('proxy.isntVip'));if(fs[_0x414423(0x21d)](_0x35547a)){let _0x5a899e=path[_0x414423(0x172)](config['userDataFolder'],_0x414423(0x247));function _0xf8bbe1(){const _0x15cd86=_0x414423;let _0x2d38ad=path[_0x15cd86(0x172)](_0x5a899e,_0x3d7789+_0x15cd86(0x256));sharp(path[_0x15cd86(0x172)](_0x35547a))[_0x15cd86(0x21c)]({'width':_0x3e61c5,'withoutEnlargement':!![]})[_0x15cd86(0x18b)]()[_0x15cd86(0x1c0)]()[_0x15cd86(0x1a1)](_0x2d38ad)[_0x15cd86(0x1a4)](()=>{const _0x1a4e5c=_0x15cd86;return saveConfig(_0x200530,_0x3d7789,_0x2d38ad),_0x9f734a[_0x1a4e5c(0x1f3)]({'code':0x0});})[_0x15cd86(0x1dc)](()=>{const _0x4ed0cc=_0x15cd86;return _0x115265[_0x4ed0cc(0x1ea)][_0x4ed0cc(0x215)](_0x9f734a,_0x9f734a['__'](_0x4ed0cc(0x16c)));});}!fs['existsSync'](_0x5a899e)?fs['mkdir'](_0x5a899e,{'recursive':!![]},_0x18e65d=>{const _0x5bf9a1=_0x414423;if(_0x18e65d)return _0x115265[_0x5bf9a1(0x1ea)][_0x5bf9a1(0x215)](_0x9f734a,_0x9f734a['__']('operationFail'));_0xf8bbe1();}):_0xf8bbe1();}else return _0x115265[_0x414423(0x1ea)][_0x414423(0x215)](_0x9f734a,_0x9f734a['__'](_0x414423(0x1e1))+_0x35547a);});}_0x223a3a&&nasAccountUtil[_0x35243f(0x1e5)](null,_0x115265[_0x35243f(0x1ea)][_0x35243f(0x199)])['then'](_0x396794=>{const _0x422c48=_0x35243f;if(!_0x396794&&_0x223a3a!='-')return _0x115265[_0x422c48(0x1ea)]['returnErrMsg'](_0x9f734a,_0x9f734a['__']('proxy.isntVip'));return saveConfig(_0x200530,'customLoginTitle',_0x223a3a),_0x9f734a[_0x422c48(0x1f3)]({'code':0x0});}),_0x1a8aa1&&_0x35d4dc(_0x35243f(0x1b5),_0x1a8aa1,0xc8),_0x32682b&&_0x35d4dc('customLoginImage',_0x32682b,0x3e8),_0x2ef9c3&&_0x35d4dc(_0x35243f(0x1a3),_0x2ef9c3,0xf14);}),router[_0x42f60e(0x1e7)](_0x42f60e(0x198),(_0xba706,_0x3e5916,_0x57bf5f)=>{const _0x397c40=_0x42f60e;let _0x4e3379=_0xba706[_0x397c40(0x1ea)][_0x397c40(0x199)],_0x2d17ed=_0xba706['body'][_0x397c40(0x1eb)],_0x5053f9=_0xba706[_0x397c40(0x195)]['autoHardAccDecode'],_0xc2541a=_0xba706[_0x397c40(0x195)][_0x397c40(0x237)],_0x6a2b12=_0xba706[_0x397c40(0x195)]['transCodeCoderNameH264'],_0x1e90ae=_0xba706['body'][_0x397c40(0x229)],_0x1f3183=_0xba706['body'][_0x397c40(0x212)],_0x34a383=_0xba706[_0x397c40(0x195)][_0x397c40(0x201)],_0x15e6d7=_0xba706[_0x397c40(0x195)][_0x397c40(0x222)],_0x5e6b50=_0xba706['body'][_0x397c40(0x26d)],_0x20497a=_0xba706[_0x397c40(0x195)][_0x397c40(0x258)],_0x26bdc0=_0xba706[_0x397c40(0x195)]['moviePreferLanguage'],_0x57d458=_0xba706[_0x397c40(0x195)][_0x397c40(0x246)],_0x3774ad=_0xba706[_0x397c40(0x195)]['movieTmdbLanguage'],_0x521f1e=_0xba706[_0x397c40(0x195)][_0x397c40(0x1b9)],_0xe538fd=_0xba706[_0x397c40(0x195)][_0x397c40(0x1d8)],_0x39fca6=_0xba706['body'][_0x397c40(0x16e)],_0x59ac30=_0xba706[_0x397c40(0x195)][_0x397c40(0x225)],_0x1cdcd4=_0xba706[_0x397c40(0x195)][_0x397c40(0x206)],_0x1046bc=_0xba706['body'][_0x397c40(0x1ac)],_0x4f37e6=_0xba706[_0x397c40(0x195)]['defaultMoviePlay'];if(_0xba706[_0x397c40(0x1f4)][_0x397c40(0x20b)]!=0x1)return _0x3e5916[_0x397c40(0x1f3)]({'code':0x66});_0x3774ad&&saveConfig(_0x4e3379,'movieTmdbLanguage',_0x3774ad);(_0x1cdcd4==0x1||_0x1cdcd4==0x0)&&saveConfig(_0x4e3379,_0x397c40(0x206),_0x1cdcd4);_0x1046bc&&saveConfig(_0x4e3379,_0x397c40(0x1ac),_0x1046bc?_0x1046bc:'');_0x521f1e!=null&&saveConfig(_0x4e3379,'movieTmdbApiUrl',_0x521f1e?_0x521f1e:'');_0xe538fd!=null&&saveConfig(_0x4e3379,'movieTmdbApiKey',_0xe538fd?_0xe538fd:'');_0x39fca6&&saveConfig(_0x4e3379,_0x397c40(0x16e),_0x39fca6);_0x57d458&&saveConfig(_0x4e3379,'moviePlaylongPressRate',_0x57d458);_0x59ac30&&saveConfig(_0x4e3379,_0x397c40(0x225),_0x59ac30);_0x4f37e6&&saveConfig(_0x4e3379,_0x397c40(0x1e3),_0x4f37e6);let _0x6dd422=_0xba706[_0x397c40(0x195)][_0x397c40(0x1b4)],_0x1fc65b=_0xba706[_0x397c40(0x195)]['movieHomeShowHistory'],_0x543c2a=_0xba706['body'][_0x397c40(0x241)];(_0x6dd422==0x1||_0x6dd422==0x0)&&saveConfig(_0x4e3379,'movieHomeShowMyMedia',_0x6dd422);(_0x1fc65b==0x1||_0x1fc65b==0x0)&&saveConfig(_0x4e3379,_0x397c40(0x203),_0x1fc65b);(_0x543c2a==0x1||_0x543c2a==0x0)&&saveConfig(_0x4e3379,_0x397c40(0x241),_0x543c2a);let _0x3ecb0e=_0xba706[_0x397c40(0x195)]['crf'];if(_0x3ecb0e&&(_0x3ecb0e<0x1||_0x3ecb0e>0x33))return _0x3e5916['json']({'code':0x1,'message':_0x397c40(0x20f)});let _0x125550=[_0x397c40(0x1f7),'fast',_0x397c40(0x171),_0x397c40(0x262)];_0x20497a&&_0x125550[_0x397c40(0x20d)](_0x20497a)&&saveConfig(_0x4e3379,_0x397c40(0x258),_0x20497a);_0x34a383&&saveConfig(_0x4e3379,'movieShowMatchName',_0x34a383);_0x15e6d7&&saveConfig(_0x4e3379,'useFolderPictureAsPoster',_0x15e6d7);_0x3ecb0e&&saveConfig(_0x4e3379,_0x397c40(0x19d),parseInt(_0x3ecb0e));_0x2d17ed&&saveConfig(_0x4e3379,_0x397c40(0x1eb),_0x2d17ed);_0x26bdc0&&saveConfig(_0x4e3379,'moviePreferLanguage',_0x26bdc0);_0x5053f9&&saveConfig(_0x4e3379,_0x397c40(0x1d3),_0x5053f9);_0xc2541a&&saveConfig(_0x4e3379,_0x397c40(0x1f1),_0xc2541a);_0x6a2b12&&saveConfig(_0x4e3379,_0x397c40(0x1c2),_0x6a2b12);if(_0x1e90ae){try{_0x1e90ae=parseInt(_0x1e90ae);if(_0x1e90ae>0x1e)_0x1e90ae=0x1e;if(_0x1e90ae<0x2)_0x1e90ae=0x2;}catch(_0x324548){_0x1e90ae=0x5;}saveConfig(_0x4e3379,'transCodeParams-readrate',_0x1e90ae);}return _0x5e6b50&&(saveConfig(_0x4e3379,_0x397c40(0x26d),_0x5e6b50),_0x5e6b50=='1'&&process[_0x397c40(0x1ca)]({'type':_0x397c40(0x1a7)})),_0x1f3183?saveConfig(_0x4e3379,_0x397c40(0x212),_0x1f3183):dbConfigTable[_0x397c40(0x1d9)](_0x4e3379,_0x397c40(0x212)),_0x3e5916['json']({'code':0x0});}),router[_0x42f60e(0x1e7)]('/saveConfigMusic',(_0x3c053d,_0x26273f,_0x5d0974)=>{const _0x2bd257=_0x42f60e;let _0xcc32ea=_0x3c053d[_0x2bd257(0x1ea)][_0x2bd257(0x199)];if(_0x3c053d[_0x2bd257(0x1f4)][_0x2bd257(0x20b)]!=0x1)return _0x26273f[_0x2bd257(0x1f3)]({'code':0x66});function _0x21a654(){const _0x35d954=_0x2bd257;let _0x56ad7f=_0x3c053d[_0x35d954(0x195)]['musicTitleType']||_0x35d954(0x197),_0x5c1d10=['filename',_0x35d954(0x1a5)];return _0x5c1d10[_0x35d954(0x20d)](_0x56ad7f)&&saveConfig(_0xcc32ea,_0x35d954(0x19e),_0x56ad7f),_0x26273f[_0x35d954(0x1f3)]({'code':0x0});}_0x21a654();}),router[_0x42f60e(0x1e7)]('/getSystemInfo',(_0x4c0c7c,_0x478c20,_0xa06ee8)=>{const _0x25d120=_0x42f60e;let _0x49f1b8={};_0x49f1b8[_0x25d120(0x188)]=path[_0x25d120(0x172)](config[_0x25d120(0x24c)],'database'),_0x49f1b8[_0x25d120(0x18c)]=config[_0x25d120(0x244)],fs[_0x25d120(0x240)](_0x49f1b8['imgFolder'],fs[_0x25d120(0x196)][_0x25d120(0x242)]|fs[_0x25d120(0x196)][_0x25d120(0x1e4)],_0x409dba=>{const _0x553228=_0x25d120;_0x49f1b8[_0x553228(0x22d)]=0x1;_0x409dba&&(_0x49f1b8[_0x553228(0x22d)]=0x0);let _0x3ba937=dbConfigTable[_0x553228(0x21b)](_0x4c0c7c[_0x553228(0x1ea)][_0x553228(0x199)],_0x553228(0x1cf));return _0x3ba937?_0x49f1b8[_0x553228(0x1cf)]=JSON[_0x553228(0x1de)](_0x3ba937[_0x553228(0x250)]):_0x49f1b8[_0x553228(0x1cf)]=![],_0x49f1b8['appRootPath']=config[_0x553228(0x1a6)],_0x478c20[_0x553228(0x1f3)]({'code':0x0,'data':_0x49f1b8});});}),router['post'](_0x42f60e(0x1a8),(_0x3039ef,_0x25cd83,_0x58d7ff)=>{const _0x437020=_0x42f60e;if(dbUserTable['isAdmin'](_0x3039ef,_0x25cd83)!==!![])return;if(OS[_0x437020(0x189)]()!='win32'&&OS[_0x437020(0x189)]()!=_0x437020(0x1ad))return _0x3039ef[_0x437020(0x1ea)][_0x437020(0x215)](_0x25cd83,_0x25cd83['__'](_0x437020(0x26b)));return process[_0x437020(0x1ca)]({'type':'Relaunch'}),_0x25cd83[_0x437020(0x1f3)]({'code':0x0});}),router[_0x42f60e(0x1e7)](_0x42f60e(0x249),(_0x1e2217,_0x11e2b4,_0x31f54f)=>{const _0x146255=_0x42f60e;if(_0x1e2217[_0x146255(0x1f4)]['is_admin']!=0x1)return _0x11e2b4[_0x146255(0x1f3)]({'code':0x66});let _0xadda2c=path[_0x146255(0x172)](config[_0x146255(0x244)],_0x146255(0x208));fs[_0x146255(0x167)](_0xadda2c,(_0x1707d7,_0xdc258f)=>{if(_0x1707d7)return;fs['rm'](_0xadda2c,{'recursive':!![]},_0xa89681=>{const _0x2954d0=_0x17ac;fs[_0x2954d0(0x1db)](_0xadda2c,{'recursive':!![]},_0x2b0c0c=>{const _0x531698=_0x2954d0;console[_0x531698(0x1c9)](_0x2b0c0c);});if(_0xa89681)return fileUtil[_0x2954d0(0x169)](_0x11e2b4,_0xa89681);return dbConfigTable['deleteByTitle'](_0x1e2217[_0x2954d0(0x1ea)][_0x2954d0(0x199)],_0x2954d0(0x1cf)),_0x11e2b4['json']({'code':0x0});});});let _0x919665=path[_0x146255(0x172)](config[_0x146255(0x244)],_0x146255(0x17b)),_0x18f3fe=path['join'](config[_0x146255(0x244)],_0x146255(0x17b),_0x146255(0x266));fs[_0x146255(0x167)](_0x919665,(_0x3ac63f,_0x2236e6)=>{if(_0x3ac63f)return;fs['rm'](_0x919665,{'recursive':!![]},_0xdb9134=>{fs['mkdir'](_0x18f3fe,{'recursive':!![]},_0x2cfd5c=>{console['log'](_0x2cfd5c);});if(_0xdb9134)return fileUtil['returnFileError'](_0x11e2b4,_0xdb9134);});});}),router[_0x42f60e(0x1e7)](_0x42f60e(0x20e),(_0x398221,_0x10bfc5,_0x5d3cfb)=>{const _0x16470f=_0x42f60e;if(dbUserTable[_0x16470f(0x1bb)](_0x398221,_0x10bfc5)!==!![])return;let _0xf1bc3d=_0x398221[_0x16470f(0x195)]['type'],_0x21696a=['system',_0x16470f(0x25d),_0x16470f(0x17a),'chassis',_0x16470f(0x23d),_0x16470f(0x1ff),_0x16470f(0x218),_0x16470f(0x1d0),_0x16470f(0x267),_0x16470f(0x1df),'osInfo',_0x16470f(0x185),_0x16470f(0x213),_0x16470f(0x17d),_0x16470f(0x1e8),_0x16470f(0x1c1),_0x16470f(0x1e2)];if(!_0x21696a['includes'](_0xf1bc3d))return _0x398221[_0x16470f(0x1ea)]['returnErrMsg'](_0x10bfc5,_0x16470f(0x21f));si[_0xf1bc3d](_0x468970=>{const _0x177d51=_0x16470f;try{return _0x10bfc5['json']({'code':0x0,'data':_0x468970});}catch(_0x304e25){console[_0x177d51(0x1c9)]('err',_0x304e25);}});}),router[_0x42f60e(0x1e7)](_0x42f60e(0x168),(_0x279c74,_0x25e798,_0x2fc76e)=>{const _0x1e8ede=_0x42f60e;let _0x495caa=netUtils[_0x1e8ede(0x245)](_0x279c74);if(_0x495caa!='localhost')return _0x279c74[_0x1e8ede(0x1ea)][_0x1e8ede(0x215)](_0x25e798,_0x25e798['__'](_0x1e8ede(0x16c)));let _0x10b0d7=_0x279c74['body'][_0x1e8ede(0x214)],_0x43e715=_0x279c74['body'][_0x1e8ede(0x197)],_0x40b25b=_0x279c74[_0x1e8ede(0x195)]['fullPath'];if(!_0x40b25b)try{_0x40b25b=path[_0x1e8ede(0x172)](_0x10b0d7,_0x43e715);}catch(_0x56818d){console['log'](_0x56818d);}if(!_0x40b25b)return _0x279c74[_0x1e8ede(0x1ea)][_0x1e8ede(0x215)](_0x25e798,_0x1e8ede(0x243));if(dbUserTable[_0x1e8ede(0x175)](_0x279c74,_0x25e798,_0x1e8ede(0x214),_0x1e8ede(0x1b8),'')==!![]){let _0x280669=_0x279c74[_0x1e8ede(0x195)]['openType']||_0x1e8ede(0x217);process[_0x1e8ede(0x1ca)]({'type':_0x1e8ede(0x23e),'shellType':_0x280669,'path':_0x40b25b});let _0x79df72={'code':0x0};return _0x25e798[_0x1e8ede(0x1f3)](_0x79df72);}}),module[_0x42f60e(0x19c)]=router;