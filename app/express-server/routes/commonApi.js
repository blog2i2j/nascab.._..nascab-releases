const _0x3599bb=_0x3d1f;(function(_0x4e63ac,_0x250c5b){const _0x188956=_0x3d1f,_0xb1334a=_0x4e63ac();while(!![]){try{const _0x92d6bc=parseInt(_0x188956(0x243))/0x1*(parseInt(_0x188956(0x185))/0x2)+-parseInt(_0x188956(0x156))/0x3*(parseInt(_0x188956(0x1c5))/0x4)+parseInt(_0x188956(0x1f5))/0x5*(-parseInt(_0x188956(0x19d))/0x6)+parseInt(_0x188956(0x1b5))/0x7*(-parseInt(_0x188956(0x232))/0x8)+-parseInt(_0x188956(0x1dd))/0x9+parseInt(_0x188956(0x1ef))/0xa+-parseInt(_0x188956(0x1f6))/0xb*(-parseInt(_0x188956(0x21f))/0xc);if(_0x92d6bc===_0x250c5b)break;else _0xb1334a['push'](_0xb1334a['shift']());}catch(_0x38213c){_0xb1334a['push'](_0xb1334a['shift']());}}}(_0x593b,0xa3702));var express=require(_0x3599bb(0x24e)),router=express[_0x3599bb(0x1d7)]();let config=require(_0x3599bb(0x1eb)),dbFileIndexTable=require('../../db/dbFileIndexTable'),dbConfigTable=require(_0x3599bb(0x1bf)),dbSourceTable=require(_0x3599bb(0x14e)),dbNoticeCenterTable=require(_0x3599bb(0x24a)),netUtils=require(_0x3599bb(0x1fa));const dbUserTable=require(_0x3599bb(0x22b)),dbBackupTask=require('../../db/dbBackupTask'),OS=require('os');let path=require(_0x3599bb(0x197)),fs=require('fs'),fileUtil=require(_0x3599bb(0x1ae));var package=require(_0x3599bb(0x187));const sqliteUtil=require(_0x3599bb(0x170));let nasAccountUtil=require('../utils/nasAccountUtils');const sharp=require('sharp'),si=require('systeminformation');function _0x593b(){const _0x388da9=['fast','ipDetection','INDEX_TABLE_NAME_MOVIE','defaultWebDavPort','diskLayout','parse','/clearCache','send','tls','createSecureContext','transCodeReadRate','getById','error\x20keys','checkSqlInjection','stat','startUpdate','apiPortHttps','prepare','type\x20is\x20invalid','/updateNewVersion','threadCount','resize','../utils/sqliteUtil','returnErrMsg','autoLoginClient','moviePreferLanguage','movieTmdbApiKey','startFaceAiWork','log','/getLanguage','getGlobalInfo','movieHomeShowHistory','databaseFolder','dbOther','movieHomeShowLibrary','ipMode','dbFileIndex','then','apiServer','aiFaceEnable','platform','FTPPort','networkInterfaces','20thlQUH','webDavPortHttps','../../../package.json','/saveConfigMusic','customHomeBgImage','movieHomeShowMyMedia','/changeCachePath','book','subtitlePreGen','ddnsIpv6Address','excludePathMovie','excludeFilenameMovie','task_id','customLogoImage','startsWith','chassis','CRF:\x201-51','isWinDisk','path','autoLaunch','count','pragma','subtitleSize','movieTmdbApiUrl','4206ylFRks','operationFail','imgFolder','excludeFilenamePhoto','all','Relaunch','err','battery','\x20status=\x27running\x27\x20or\x20status=\x27waiting\x27','custom','defaultFTPPort','userDataFolder',':https','autoHardAccDecode','/openInSystem','totalmem','usb','../utils/fileUtils','transCodeCoderNameH264','aiSimilarPhotoEnable','cachePath','/shouldShowTour','taskId','create','28YMTmRb','twoStepLogin','excludePathPhoto','defaultWebDavPortHttps','medium','mem','cpus','includes','openPath','ipBan','../../db/dbConfigTable','wifiNetworks','INDEX_TABLE_NAME_PHOTO','/vaccumDb','bluetoothDevices','ip\x20not\x20allow','64972tBVQhW','transCodeParams-CoderNameH264','defaultThreadCount','toUpperCase','customLoginImage','deleteByTitle','fullPath','catch','aiFaceMinPhotoCount','.webp','httpsCertError','cacheParentPath','subtitle','customShareUrl','getUnReadCount','/getVersionInfo','username','DELETE\x20FROM\x20bg_task\x20WHERE\x20id=?','Router','ultrafast','apiPort','folderNotExist','run','task_name','5246829JOCeOT','aiClassesEnable','SELECT\x20*\x20from\x20tour_record\x20where\x20page=?\x20and\x20version=?\x20and\x20username=?','power_get','useNasCabCerts','excludePathFolderBrowser','showMenuArr','/getSystemState','access','get','appRootPath','body','app','osInfo','../../myConfig/config','join','constants','webDavUseApiCert','1116110ZAEnTQ','getClientIp','transcodePath','getUpdateInfo','hostname','currentUser','3695PeGhJr','12221NrKsyp','serverType','getAllByWhere','musicTitleType','../utils/netUtils','force','toFile','keys','allConfig','INDEX_TABLE_NAME_BOOK','\x20title\x20in\x20(\x27globalCpuInfo\x27,\x27globalMemInfo\x27,\x27','/saveConfigMovie','R_OK','W_OK','version','json','/resetIndex','START_PRE_GEN_SUBTITLE','baseboard','movieDatabaseType','customLoginTitle','localhost','movieTmdbLanguage','isVip','globalIndexInfo','apiServerHttps','doUserCanGet','id3tag','memTooLess','darwin','returnFileError','isAdmin','status','cachePathInvalid','is_admin','transcodeSpeed','stringify','webDavPort','unreadMsgCount','proxy.isntVip','findByTitle','31908YWALds','music','SELECT\x20*\x20FROM\x20bg_task\x20WHERE\x20task_state=?\x20order\x20by\x20id\x20desc\x20limit\x20?\x20offset\x20?','title','page','/setLanguage','crf','type','clearTable','cache','length','transCodeParams-CoderNameHevc','../../db/dbUserTable','total_size','vacuum','database','win32','defaultApiPort','findByTitleArr','2466680PJlawY','moviePlaylongPressRate','wal_checkpoint(RESTART)','imgFolderUsable','language','bios','autoShowWindow','value','startClassesAiWork','maxThreadCountIs','INDEX_TABLE_NAME_MUSIC','copy_size','/getServerIpAndSign','getDiskInfo','exec','-----','cpu','117251EykRbj','webDavHttpsKey','movieShowMatchName','post','upload','REPLACE\x20INTO\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20tour_record(page,version,username)\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20VALUES(?,\x20?,?)','httpsCert','../../db/dbNoticeCenterTable','useFolderPictureAsPoster','/getAllConfig','cpuTemperature','express','/getSystemInfomation','/getBgTask','versionInfo','setting.portInvalid','need\x20path','mkdir','existsSync','../../db/dbSourceFolderTable','/relaunch','filename','webDavHttpsCert','cacheImageInfo','tmdbProxyUrl','serverName','autoScanSource','228KAXxqm','getIpList','webp','httpsKey'];_0x593b=function(){return _0x388da9;};return _0x593b();}let tls=require(_0x3599bb(0x162));function testCertAndKeyMatch(_0x589d57,_0x3f2723){const _0x5c8851=_0x3599bb;try{return tls[_0x5c8851(0x163)]({'cert':_0x589d57,'key':_0x3f2723}),!![];}catch(_0x2c9c25){return![];}}function _0x3d1f(_0x223d6a,_0x5ad34a){const _0x593bd2=_0x593b();return _0x3d1f=function(_0x3d1f47,_0x24d0a4){_0x3d1f47=_0x3d1f47-0x14d;let _0x671807=_0x593bd2[_0x3d1f47];return _0x671807;},_0x3d1f(_0x223d6a,_0x5ad34a);}router['post'](_0x3599bb(0x1d4),(_0x19e76f,_0x21296f,_0x235ac1)=>{const _0x43ab68=_0x3599bb;let _0x186f5d=package['version'],_0x1d17a0=dbConfigTable[_0x43ab68(0x21e)](_0x19e76f[_0x43ab68(0x1e9)][_0x43ab68(0x17b)],_0x43ab68(0x251)),_0x301464=dbConfigTable['findByTitle'](_0x19e76f['app'][_0x43ab68(0x17b)],_0x43ab68(0x1e3));process[_0x43ab68(0x161)]({'type':'getGlobalInfo','func':_0x43ab68(0x1f2)}),_0x21296f[_0x43ab68(0x205)]({'code':0x0,'showMenuArr':_0x301464?JSON[_0x43ab68(0x15f)](_0x301464['value']):'','versionInfo':_0x1d17a0?JSON[_0x43ab68(0x15f)](_0x1d17a0['value']):'','currentVersion':_0x186f5d});}),router[_0x3599bb(0x246)](_0x3599bb(0x16d),(_0x2dc723,_0x136305,_0x44b65f)=>{const _0x5b7c2a=_0x3599bb;if(OS[_0x5b7c2a(0x182)]()!=_0x5b7c2a(0x22f)&&OS[_0x5b7c2a(0x182)]()!=_0x5b7c2a(0x213))return _0x2dc723[_0x5b7c2a(0x1e9)][_0x5b7c2a(0x171)](_0x136305,_0x136305['__']('notSupportForAutoUpdate'));return process['send']({'type':_0x5b7c2a(0x169)}),_0x136305['json']({'code':0x0});}),router['post'](_0x3599bb(0x250),(_0x5e65a7,_0x40f9f0,_0x920078)=>{const _0xcdbd1f=_0x3599bb;let _0x1e564b=netUtils['getClientIp'](_0x5e65a7),_0x3e8809=_0x5e65a7[_0xcdbd1f(0x1e8)]['taskState'],_0x219470=_0x5e65a7[_0xcdbd1f(0x1e8)][_0xcdbd1f(0x199)],_0x3eacde=_0x5e65a7[_0xcdbd1f(0x1e8)]['offset'],_0x4e0cf1=[];if(_0x5e65a7['currentUser'][_0xcdbd1f(0x218)]==0x1){_0x4e0cf1=_0x5e65a7['app'][_0xcdbd1f(0x17b)][_0xcdbd1f(0x16b)](_0xcdbd1f(0x221))['all'](_0x3e8809,_0x219470,_0x3eacde);let _0x2ad1b4=dbBackupTask['getAllRecordByWhere'](_0x5e65a7[_0xcdbd1f(0x1e9)]['dbOther'],_0xcdbd1f(0x1a5),[]);for(let _0x229c04 in _0x2ad1b4){let _0x24c456=_0x2ad1b4[_0x229c04],_0x20b061=dbBackupTask[_0xcdbd1f(0x165)](_0x5e65a7[_0xcdbd1f(0x1e9)][_0xcdbd1f(0x17b)],_0x24c456[_0xcdbd1f(0x191)]);_0x4e0cf1['push']({'task_type':'BACKUP','task_name':_0x20b061?_0x20b061[_0xcdbd1f(0x1dc)]:'','size_current':_0x24c456[_0xcdbd1f(0x23d)],'size_all':_0x24c456[_0xcdbd1f(0x22c)]});}}let _0xf1b483={'code':0x0,'data':_0x4e0cf1,'reqIp':_0x1e564b};return _0x40f9f0[_0xcdbd1f(0x205)](_0xf1b483);}),router[_0x3599bb(0x246)]('/deleteBgTask',(_0x51c16f,_0x2b6236,_0x214c1e)=>{const _0x297449=_0x3599bb;let _0x194a76=_0x51c16f[_0x297449(0x1e8)][_0x297449(0x1b3)];dbUserTable[_0x297449(0x215)](_0x51c16f,_0x2b6236)===!![]&&_0x51c16f['app'][_0x297449(0x17b)]['prepare'](_0x297449(0x1d6))[_0x297449(0x1db)](_0x194a76);let _0x29ab22={'code':0x0};return _0x2b6236['json'](_0x29ab22);}),router[_0x3599bb(0x246)](_0x3599bb(0x1c2),(_0x5ec1b9,_0x1504ff,_0x53d1e3)=>{const _0x1d69df=_0x3599bb;try{return _0x5ec1b9[_0x1d69df(0x1e9)]['dbOther'][_0x1d69df(0x240)](_0x1d69df(0x22d)),_0x5ec1b9[_0x1d69df(0x1e9)][_0x1d69df(0x17e)][_0x1d69df(0x240)](_0x1d69df(0x22d)),_0x5ec1b9[_0x1d69df(0x1e9)][_0x1d69df(0x17b)][_0x1d69df(0x19a)](_0x1d69df(0x234)),_0x5ec1b9[_0x1d69df(0x1e9)]['dbFileIndex'][_0x1d69df(0x19a)](_0x1d69df(0x234)),_0x1504ff[_0x1d69df(0x205)]({'code':0x0});}catch(_0x4ad335){return _0x5ec1b9[_0x1d69df(0x1e9)][_0x1d69df(0x171)](_0x1504ff,_0x1504ff['__'](_0x1d69df(0x19e)));}}),router[_0x3599bb(0x246)](_0x3599bb(0x206),(_0x49710e,_0x39e23c,_0x522e98)=>{const _0x5bba6f=_0x3599bb;if(_0x49710e['currentUser'][_0x5bba6f(0x218)]!=0x1)return _0x39e23c[_0x5bba6f(0x205)]({'code':0x66});let _0x25c49c=_0x49710e['body'][_0x5bba6f(0x1f7)];dbSourceTable[_0x5bba6f(0x227)](_0x49710e[_0x5bba6f(0x1e9)][_0x5bba6f(0x17b)],_0x25c49c);if(_0x25c49c=='movie')dbFileIndexTable['clearTable'](_0x49710e[_0x5bba6f(0x1e9)]['dbFileIndex'],dbFileIndexTable[_0x5bba6f(0x15c)]);else{if(_0x25c49c=='photo')dbFileIndexTable[_0x5bba6f(0x227)](_0x49710e[_0x5bba6f(0x1e9)][_0x5bba6f(0x17e)],dbFileIndexTable[_0x5bba6f(0x1c1)]);else{if(_0x25c49c==_0x5bba6f(0x220))dbFileIndexTable['clearTable'](_0x49710e[_0x5bba6f(0x1e9)][_0x5bba6f(0x17e)],dbFileIndexTable[_0x5bba6f(0x23c)]);else _0x25c49c==_0x5bba6f(0x18c)&&dbFileIndexTable[_0x5bba6f(0x227)](_0x49710e[_0x5bba6f(0x1e9)][_0x5bba6f(0x17e)],dbFileIndexTable[_0x5bba6f(0x1ff)]);}}_0x39e23c[_0x5bba6f(0x205)]({'code':0x0});}),router[_0x3599bb(0x246)](_0x3599bb(0x23e),(_0x546237,_0x5e8aa4,_0x57e770)=>{const _0x41a976=_0x3599bb;process[_0x41a976(0x161)]({'type':_0x41a976(0x178),'func':_0x41a976(0x157)});let _0x16b4f2=dbConfigTable['findByTitle'](_0x546237[_0x41a976(0x1e9)][_0x41a976(0x17b)],'globalIpList'),_0x2f0da3=dbConfigTable[_0x41a976(0x21e)](_0x546237['app'][_0x41a976(0x17b)],_0x41a976(0x180)),_0x46a3af=dbConfigTable[_0x41a976(0x21e)](_0x546237[_0x41a976(0x1e9)]['dbOther'],_0x41a976(0x20f)),_0x5af796={'code':0x0,'ipList':_0x16b4f2,'apiServer':_0x2f0da3,'apiServerHttps':_0x46a3af,'hostName':OS[_0x41a976(0x1f3)]()};return _0x5e8aa4[_0x41a976(0x205)](_0x5af796);}),router[_0x3599bb(0x246)]('/getServerState',(_0x30fde3,_0x49fd24,_0x1f7391)=>{const _0x59c3db=_0x3599bb;let _0x668666=netUtils[_0x59c3db(0x1f0)](_0x30fde3),_0x30fe11=_0x30fde3[_0x59c3db(0x1e8)][_0x59c3db(0x154)],_0x27743e;_0x30fe11==_0x59c3db(0x1a1)?(process[_0x59c3db(0x161)]({'type':_0x59c3db(0x178),'func':'getIpList'}),_0x27743e=dbConfigTable[_0x59c3db(0x1f8)](_0x30fde3[_0x59c3db(0x1e9)][_0x59c3db(0x17b)],'\x20title\x20in\x20(\x27apiServer\x27,\x27apiServerHttps\x27,\x27webDavServer\x27,\x27FTPServer\x27,\x27globalIpList\x27)')):_0x27743e=dbConfigTable[_0x59c3db(0x21e)](_0x30fde3['app'][_0x59c3db(0x17b)],_0x30fe11);let _0x7dbabf=dbConfigTable[_0x59c3db(0x21e)](_0x30fde3[_0x59c3db(0x1e9)][_0x59c3db(0x17b)],'ddnsIpv6Address'),_0x21a4e0={'code':0x0,'data':_0x27743e,'hostName':OS['hostname'](),'reqIp':_0x668666};_0x7dbabf&&_0x7dbabf['value']&&(_0x21a4e0[_0x59c3db(0x18e)]=_0x7dbabf['value']);let _0x53ccd2=dbNoticeCenterTable[_0x59c3db(0x1d3)](_0x30fde3[_0x59c3db(0x1e9)][_0x59c3db(0x17b)]);return _0x21a4e0[_0x59c3db(0x21c)]=_0x53ccd2[_0x59c3db(0x199)],_0x49fd24[_0x59c3db(0x205)](_0x21a4e0);}),router[_0x3599bb(0x246)](_0x3599bb(0x1e4),(_0xcca426,_0x2f3fba,_0x408205)=>{const _0x4b6894=_0x3599bb;let _0x1a46f3=netUtils[_0x4b6894(0x1f0)](_0xcca426),_0x1fa3b7=_0xcca426[_0x4b6894(0x1e8)][_0x4b6894(0x1fb)],_0x456530=_0x4b6894(0x20e)+dbFileIndexTable[_0x4b6894(0x15c)],_0x968392=_0x4b6894(0x20e)+dbFileIndexTable['INDEX_TABLE_NAME_PHOTO'];process['send']({'type':_0x4b6894(0x178),'func':'getAllIndexInfo'}),process[_0x4b6894(0x161)]({'type':_0x4b6894(0x178),'func':_0x4b6894(0x23f),'force':_0x1fa3b7}),fs['stat'](config[_0x4b6894(0x1d0)],_0x1eca66=>{const _0xbb766d=_0x4b6894;if(_0x1eca66)return _0xcca426['app'][_0xbb766d(0x171)](_0x2f3fba,_0x2f3fba['__'](_0xbb766d(0x217)));else{let _0x1e35db=dbConfigTable[_0xbb766d(0x1f8)](_0xcca426[_0xbb766d(0x1e9)]['dbOther'],_0xbb766d(0x200)+_0x456530+'\x27,\x27'+_0x968392+'\x27,\x27globalDiskInfo\x27)');return _0x2f3fba[_0xbb766d(0x205)]({'code':0x0,'data':_0x1e35db,'version':package[_0xbb766d(0x204)],'reqIp':_0x1a46f3,'platform':OS[_0xbb766d(0x182)]()});}});}),router['post'](_0x3599bb(0x1b2),(_0x4ad34a,_0xc01858,_0x447e2a)=>{const _0x456a55=_0x3599bb;let _0x1336f8=_0x4ad34a[_0x456a55(0x1e8)][_0x456a55(0x223)],_0x24b1f1=package[_0x456a55(0x204)],_0x21c27c=_0x4ad34a[_0x456a55(0x1f4)][_0x456a55(0x1d5)],_0x4ef12e=_0x4ad34a[_0x456a55(0x1e9)][_0x456a55(0x17b)][_0x456a55(0x16b)](_0x456a55(0x1df))[_0x456a55(0x1e6)](_0x1336f8,_0x24b1f1,_0x21c27c);if(!_0x4ef12e){const _0x5c2e10=_0x456a55(0x248);_0x4ad34a['app'][_0x456a55(0x17b)][_0x456a55(0x16b)](_0x5c2e10)['run'](_0x1336f8,_0x24b1f1,_0x21c27c);}return _0xc01858['json']({'code':0x0,'show':_0x4ef12e?0x0:0x1});}),router[_0x3599bb(0x246)](_0x3599bb(0x24c),(_0x1679c3,_0x7293c7,_0x50f038)=>{const _0x553256=_0x3599bb;let _0x4c7949=_0x1679c3[_0x553256(0x1e8)][_0x553256(0x1fd)],_0x5141c4;if(_0x4c7949&&_0x4c7949[_0x553256(0x229)]>0x0){if(sqliteUtil[_0x553256(0x167)](_0x4c7949)==!![])return _0x1679c3['app'][_0x553256(0x171)](_0x7293c7,_0x553256(0x166));_0x5141c4=dbConfigTable[_0x553256(0x231)](_0x1679c3[_0x553256(0x1e9)][_0x553256(0x17b)],_0x4c7949);}else _0x5141c4=dbConfigTable['getAll'](_0x1679c3[_0x553256(0x1e9)][_0x553256(0x17b)]);for(let _0x5c9d83 in _0x5141c4){let _0x1ff5f3=_0x5141c4[_0x5c9d83];(_0x1ff5f3[_0x553256(0x222)]==_0x553256(0x249)||_0x1ff5f3['title']==_0x553256(0x159))&&(!_0x1ff5f3[_0x553256(0x239)][_0x553256(0x193)](_0x553256(0x241))&&(_0x1ff5f3[_0x553256(0x239)]=''));}let _0x56f1aa={};_0x56f1aa[_0x553256(0x230)]=config[_0x553256(0x1d9)],_0x56f1aa['defaultApiPortHttps']=config[_0x553256(0x16a)],_0x56f1aa[_0x553256(0x15d)]=config['webDavPort'],_0x56f1aa[_0x553256(0x1b8)]=config[_0x553256(0x186)],_0x56f1aa[_0x553256(0x1a7)]=config[_0x553256(0x183)],_0x56f1aa[_0x553256(0x1c7)]=0x2,_0x56f1aa[_0x553256(0x1fe)]=_0x5141c4,nasAccountUtil[_0x553256(0x20d)](null,_0x1679c3[_0x553256(0x1e9)][_0x553256(0x17b)])[_0x553256(0x17f)](_0x11427d=>{const _0x342473=_0x553256;_0x7293c7[_0x342473(0x205)]({'code':0x0,'data':_0x56f1aa,'isVip':_0x11427d});});}),router[_0x3599bb(0x246)](_0x3599bb(0x177),(_0x17cd72,_0x2f25ff,_0x144b78)=>{const _0x35ad71=_0x3599bb;let _0xf2c814=dbConfigTable[_0x35ad71(0x21e)](_0x17cd72[_0x35ad71(0x1e9)]['dbOther'],_0x35ad71(0x236)),_0xc7e621='';_0xf2c814&&(_0xc7e621=_0xf2c814[_0x35ad71(0x239)]),_0x2f25ff[_0x35ad71(0x205)]({'code':0x0,'data':_0xc7e621});}),router[_0x3599bb(0x246)](_0x3599bb(0x224),(_0x48b899,_0x50d22c,_0x3b7350)=>{const _0x320bfc=_0x3599bb;let _0x5b8d02=netUtils[_0x320bfc(0x1f0)](_0x48b899);if(_0x5b8d02!='localhost')return _0x320bfc(0x1c4);let _0x5401cb=_0x48b899[_0x320bfc(0x1e8)][_0x320bfc(0x236)];if(!_0x5401cb)return _0x50d22c[_0x320bfc(0x216)](0x194)['end']();return dbConfigTable[_0x320bfc(0x1b4)](_0x48b899['app'][_0x320bfc(0x17b)],{'title':_0x320bfc(0x236),'value':_0x5401cb}),_0x50d22c[_0x320bfc(0x205)]({'code':0x0});});function saveConfig(_0x39d4cb,_0x3898d3,_0x207ce5){const _0x1893e3=_0x3599bb;dbConfigTable[_0x1893e3(0x1b4)](_0x39d4cb,{'title':_0x3898d3,'value':_0x207ce5+''});}router['post'](_0x3599bb(0x18b),(_0x3adb15,_0x2f8fc6,_0x28121f)=>{const _0x5d5b5b=_0x3599bb;let _0x4fa8cb=_0x3adb15[_0x5d5b5b(0x1e8)][_0x5d5b5b(0x1b1)];if(_0x3adb15['currentUser']['is_admin']!=0x1)return _0x2f8fc6['json']({'code':0x66});if(_0x4fa8cb)fs[_0x5d5b5b(0x1e5)](_0x4fa8cb,fs['constants'][_0x5d5b5b(0x203)]|fs[_0x5d5b5b(0x1ed)][_0x5d5b5b(0x202)],_0x37881f=>{const _0x55af63=_0x5d5b5b;return!_0x37881f?(saveConfig(_0x3adb15[_0x55af63(0x1e9)][_0x55af63(0x17b)],_0x55af63(0x1d0),_0x4fa8cb),_0x2f8fc6[_0x55af63(0x205)]({'code':0x0})):fileUtil['returnFileError'](_0x2f8fc6,_0x37881f);});else return dbConfigTable[_0x5d5b5b(0x1ca)](_0x3adb15[_0x5d5b5b(0x1e9)][_0x5d5b5b(0x17b)],_0x5d5b5b(0x1d0)),_0x2f8fc6[_0x5d5b5b(0x205)]({'code':0x0});});let forbiddenPorts=[0x1,0x7,0x9,0xb,0xd,0xf,0x11,0x13,0x14,0x15,0x16,0x17,0x19,0x25,0x2a,0x2b,0x35,0x4d,0x4f,0x57,0x5f,0x65,0x66,0x67,0x68,0x6d,0x6e,0x6f,0x71,0x73,0x75,0x77,0x7b,0x87,0x8b,0x8f,0xb3,0x185,0x1d1,0x200,0x201,0x202,0x203,0x20e,0x212,0x213,0x214,0x21c,0x22c,0x233,0x24b,0x259,0x27c,0x3e1,0x3e3,0x801,0xe4b,0xfcd,0x1770,0x1a09,0x1a0a,0x1a0b,0x1a0c,0x1a0d,0xd3d];router[_0x3599bb(0x246)]('/saveConfig',(_0x441cf4,_0x125930,_0x5ed484)=>{const _0x4d765b=_0x3599bb;let _0x9e7a18=_0x441cf4[_0x4d765b(0x1e8)][_0x4d765b(0x1d9)],_0x27bae8=_0x441cf4['body'][_0x4d765b(0x16a)],_0x18edf9=_0x441cf4['body']['webDavPort'],_0x547af5=_0x441cf4[_0x4d765b(0x1e8)][_0x4d765b(0x186)],_0x204db0=_0x441cf4[_0x4d765b(0x1e8)][_0x4d765b(0x183)],_0x3888f5=_0x441cf4[_0x4d765b(0x1e8)][_0x4d765b(0x198)],_0x22a903=_0x441cf4[_0x4d765b(0x1e8)][_0x4d765b(0x172)],_0xce5a87=_0x441cf4[_0x4d765b(0x1e8)][_0x4d765b(0x238)],_0x26efb8=_0x441cf4[_0x4d765b(0x1e8)][_0x4d765b(0x155)],_0x498fc9=_0x441cf4[_0x4d765b(0x1e8)][_0x4d765b(0x159)],_0x699ee4=_0x441cf4[_0x4d765b(0x1e8)][_0x4d765b(0x249)],_0xf3907e=_0x441cf4[_0x4d765b(0x1e8)][_0x4d765b(0x244)],_0x8c83a5=_0x441cf4['body'][_0x4d765b(0x151)],_0x14f950=_0x441cf4[_0x4d765b(0x1e8)][_0x4d765b(0x236)],_0x9eb9f0=_0x441cf4[_0x4d765b(0x1e8)][_0x4d765b(0x16e)],_0x222eaf=_0x441cf4[_0x4d765b(0x1e8)][_0x4d765b(0x18f)],_0x43a12e=_0x441cf4['body'][_0x4d765b(0x1b7)],_0x5642b1=_0x441cf4[_0x4d765b(0x1e8)][_0x4d765b(0x1e2)],_0x33a7ac=_0x441cf4[_0x4d765b(0x1e8)][_0x4d765b(0x190)],_0x1e563a=_0x441cf4['body']['excludeFilenamePhoto'],_0x15269e=_0x441cf4['body'][_0x4d765b(0x1e3)],_0x164733=_0x441cf4[_0x4d765b(0x1e8)]['tokenKeepHour'],_0x179f38=_0x441cf4[_0x4d765b(0x1e8)][_0x4d765b(0x1d2)],_0x328352=_0x441cf4[_0x4d765b(0x1e8)]['webDavUseApiCert'];if(_0x441cf4[_0x4d765b(0x1f4)]['is_admin']!=0x1)return _0x125930['json']({'code':0x66});let _0x803b8f=0xffdc;if(_0x9e7a18>_0x803b8f||_0x18edf9>_0x803b8f||_0x204db0>_0x803b8f||_0x547af5>_0x803b8f)return _0x125930['json']({'code':0x1,'message':'port:\x20256-65500'});let _0x3ed7d8=_0x441cf4[_0x4d765b(0x1e9)][_0x4d765b(0x17b)];_0x15269e&&saveConfig(_0x3ed7d8,_0x4d765b(0x1e3),JSON['stringify'](_0x15269e));_0x179f38&&saveConfig(_0x3ed7d8,_0x4d765b(0x1d2),_0x179f38);_0x222eaf&&saveConfig(_0x3ed7d8,_0x4d765b(0x18f),JSON[_0x4d765b(0x21a)](_0x222eaf));_0x164733&&parseInt(_0x164733)!=NaN&&_0x164733>0x0&&_0x164733<0x5f5e0ff&&saveConfig(_0x3ed7d8,'tokenKeepHour',_0x164733);_0x43a12e&&saveConfig(_0x3ed7d8,_0x4d765b(0x1b7),JSON[_0x4d765b(0x21a)](_0x43a12e));if(_0x5642b1){let _0x661fab=netUtils[_0x4d765b(0x1f0)](_0x441cf4);if(_0x661fab==_0x4d765b(0x20b)){for(let _0xb866e3 in _0x5642b1){let _0x547903=_0x5642b1[_0xb866e3],_0x5693b9=fs['existsSync'](_0x547903);if(!_0x5693b9)return _0x441cf4[_0x4d765b(0x1e9)][_0x4d765b(0x171)](_0x125930,_0x125930['__'](_0x4d765b(0x1da))+':'+_0x547903);fileUtil[_0x4d765b(0x196)](_0x547903)&&(_0x5642b1[_0xb866e3]=_0x547903[_0x4d765b(0x1c8)]());}saveConfig(_0x3ed7d8,_0x4d765b(0x1e2),JSON['stringify'](_0x5642b1));}else return _0x441cf4['app'][_0x4d765b(0x171)](_0x125930,_0x125930['__']('onlySupportOnServerApp'));}_0x33a7ac&&saveConfig(_0x3ed7d8,_0x4d765b(0x190),JSON[_0x4d765b(0x21a)](_0x33a7ac));_0x1e563a&&saveConfig(_0x3ed7d8,_0x4d765b(0x1a0),JSON['stringify'](_0x1e563a));if(_0x9e7a18){if(forbiddenPorts[_0x4d765b(0x1bc)](parseInt(_0x9e7a18)))return _0x441cf4[_0x4d765b(0x1e9)][_0x4d765b(0x171)](_0x125930,_0x125930['__'](_0x4d765b(0x252))+':http');saveConfig(_0x3ed7d8,_0x4d765b(0x1d9),parseInt(_0x9e7a18));}if(_0x27bae8){if(forbiddenPorts[_0x4d765b(0x1bc)](parseInt(_0x27bae8))||_0x27bae8==_0x9e7a18)return _0x441cf4[_0x4d765b(0x1e9)][_0x4d765b(0x171)](_0x125930,_0x125930['__'](_0x4d765b(0x252))+_0x4d765b(0x1a9));saveConfig(_0x3ed7d8,_0x4d765b(0x16a),parseInt(_0x27bae8));}_0x441cf4[_0x4d765b(0x1e8)][_0x4d765b(0x1be)]&&saveConfig(_0x3ed7d8,'ipBan',_0x441cf4[_0x4d765b(0x1e8)][_0x4d765b(0x1be)]);_0x441cf4[_0x4d765b(0x1e8)]['ipMode']&&(saveConfig(_0x3ed7d8,_0x4d765b(0x17d),_0x441cf4[_0x4d765b(0x1e8)][_0x4d765b(0x17d)]),_0x441cf4[_0x4d765b(0x1e9)]['refreshIpList']());_0x441cf4[_0x4d765b(0x1e8)][_0x4d765b(0x15b)]&&saveConfig(_0x3ed7d8,_0x4d765b(0x15b),_0x441cf4[_0x4d765b(0x1e8)][_0x4d765b(0x15b)]);_0x441cf4[_0x4d765b(0x1e8)]['twoStepLogin']&&saveConfig(_0x3ed7d8,_0x4d765b(0x1b6),_0x441cf4[_0x4d765b(0x1e8)]['twoStepLogin']);_0x18edf9&&saveConfig(_0x3ed7d8,_0x4d765b(0x21b),parseInt(_0x18edf9));_0x547af5&&saveConfig(_0x3ed7d8,_0x4d765b(0x186),parseInt(_0x547af5));_0x204db0&&saveConfig(_0x3ed7d8,'FTPPort',parseInt(_0x204db0));_0x3888f5&&saveConfig(_0x3ed7d8,_0x4d765b(0x198),_0x3888f5);_0x22a903&&saveConfig(_0x3ed7d8,_0x4d765b(0x172),_0x22a903);_0xce5a87&&saveConfig(_0x3ed7d8,_0x4d765b(0x238),_0xce5a87);_0x26efb8&&saveConfig(_0x3ed7d8,'autoScanSource',_0x26efb8);let _0x2279b4=dbConfigTable[_0x4d765b(0x21e)](_0x441cf4[_0x4d765b(0x1e9)][_0x4d765b(0x17b)],_0x4d765b(0x1e1));if(!_0x2279b4||_0x2279b4[_0x4d765b(0x239)]==0x0){if(_0x498fc9!='*'&&_0x699ee4!='*'){if(_0x498fc9&&_0x699ee4){if(!_0x498fc9[_0x4d765b(0x193)](_0x4d765b(0x241))||!_0x699ee4[_0x4d765b(0x193)](_0x4d765b(0x241)))return _0x441cf4[_0x4d765b(0x1e9)]['returnErrMsg'](_0x125930,_0x125930['__'](_0x4d765b(0x1cf)));const _0x113350=testCertAndKeyMatch(_0x699ee4,_0x498fc9);if(!_0x113350)return _0x441cf4[_0x4d765b(0x1e9)][_0x4d765b(0x171)](_0x125930,_0x125930['__']('httpsCertError'));saveConfig(_0x3ed7d8,_0x4d765b(0x159),_0x498fc9),saveConfig(_0x3ed7d8,_0x4d765b(0x249),_0x699ee4);}else saveConfig(_0x3ed7d8,_0x4d765b(0x159),''),saveConfig(_0x3ed7d8,_0x4d765b(0x249),'');}}_0x328352&&saveConfig(_0x3ed7d8,_0x4d765b(0x1ee),_0x328352);_0x328352=dbConfigTable['findByTitle'](_0x441cf4[_0x4d765b(0x1e9)][_0x4d765b(0x17b)],_0x4d765b(0x1ee));if(!_0x328352||_0x328352['value']==0x0){if(_0xf3907e!='*'&&_0x8c83a5!='*'){if(_0xf3907e&&_0x8c83a5){if(!_0xf3907e[_0x4d765b(0x193)](_0x4d765b(0x241))||!_0x8c83a5[_0x4d765b(0x193)](_0x4d765b(0x241)))return _0x441cf4['app']['returnErrMsg'](_0x125930,_0x125930['__'](_0x4d765b(0x1cf)));const _0x465778=testCertAndKeyMatch(_0xf3907e,_0x8c83a5);if(!_0x465778)return _0x441cf4[_0x4d765b(0x1e9)]['returnErrMsg'](_0x125930,_0x125930['__'](_0x4d765b(0x1cf)));saveConfig(_0x3ed7d8,_0x4d765b(0x244),_0xf3907e),saveConfig(_0x3ed7d8,_0x4d765b(0x151),_0x8c83a5);}else saveConfig(_0x3ed7d8,'webDavHttpsKey',''),saveConfig(_0x3ed7d8,_0x4d765b(0x151),'');}}_0x14f950&&saveConfig(_0x3ed7d8,_0x4d765b(0x236),_0x14f950);if(_0x9eb9f0){if(_0x9eb9f0>OS[_0x4d765b(0x1bb)]()[_0x4d765b(0x229)])return _0x441cf4[_0x4d765b(0x1e9)][_0x4d765b(0x171)](_0x125930,_0x125930['__'](_0x4d765b(0x23b))+OS[_0x4d765b(0x1bb)]()[_0x4d765b(0x229)]);saveConfig(_0x3ed7d8,_0x4d765b(0x16e),_0x9eb9f0);}return _0x125930[_0x4d765b(0x205)]({'code':0x0});}),router['post']('/saveConfigPhoto',(_0x200319,_0x571e9c,_0x31ea60)=>{const _0x9e1d87=_0x3599bb;if(_0x200319[_0x9e1d87(0x1f4)][_0x9e1d87(0x218)]!=0x1)return _0x571e9c[_0x9e1d87(0x205)]({'code':0x66});let _0x252a13=_0x200319[_0x9e1d87(0x1e9)][_0x9e1d87(0x17b)],_0xc8ead6=_0x200319[_0x9e1d87(0x1e8)][_0x9e1d87(0x1de)],_0xa139c0=_0x200319[_0x9e1d87(0x1e8)][_0x9e1d87(0x181)],_0x7bf3c1=_0x200319['body'][_0x9e1d87(0x1b0)],_0x47fa01=_0x200319[_0x9e1d87(0x1e8)][_0x9e1d87(0x1cd)];if(_0xc8ead6){if(_0xc8ead6==0x1){if(OS[_0x9e1d87(0x1ac)]()/0x400/0x400/0x400<0x3)return _0x200319['app'][_0x9e1d87(0x171)](_0x571e9c,_0x571e9c['__'](_0x9e1d87(0x212)));}saveConfig(_0x252a13,_0x9e1d87(0x1de),_0xc8ead6);if(_0xc8ead6==0x1)process[_0x9e1d87(0x161)]({'type':_0x9e1d87(0x23a)});}_0x47fa01&&saveConfig(_0x252a13,_0x9e1d87(0x1cd),_0x47fa01);if(_0xa139c0){if(_0xa139c0==0x1){if(OS['totalmem']()/0x400/0x400/0x400<0x3)return _0x200319[_0x9e1d87(0x1e9)][_0x9e1d87(0x171)](_0x571e9c,_0x571e9c['__']('memTooLess'));}saveConfig(_0x252a13,_0x9e1d87(0x181),_0xa139c0);if(_0xa139c0==0x1)process[_0x9e1d87(0x161)]({'type':_0x9e1d87(0x175)});}if(_0x7bf3c1){saveConfig(_0x252a13,'aiSimilarPhotoEnable',_0x7bf3c1);if(_0x7bf3c1==0x1)process[_0x9e1d87(0x161)]({'type':'startSimilarPhotoWork'});}return _0x571e9c[_0x9e1d87(0x205)]({'code':0x0});}),router[_0x3599bb(0x246)]('/saveConfigCustom',(_0x11ec98,_0x434f23,_0x3edc5d)=>{const _0x2e3dfb=_0x3599bb;if(_0x11ec98['currentUser'][_0x2e3dfb(0x218)]!=0x1)return _0x434f23['json']({'code':0x66});let _0x3a04fe=_0x11ec98[_0x2e3dfb(0x1e9)][_0x2e3dfb(0x17b)],_0x623acc=_0x11ec98[_0x2e3dfb(0x1e8)][_0x2e3dfb(0x20a)],_0x45c9e6=_0x11ec98['body'][_0x2e3dfb(0x192)],_0x95dcac=_0x11ec98['body'][_0x2e3dfb(0x1c9)],_0x19cf08=_0x11ec98[_0x2e3dfb(0x1e8)][_0x2e3dfb(0x189)];function _0x1df917(_0x19e7f5,_0x5735fa,_0x4a37f0){const _0x40b559=_0x2e3dfb;nasAccountUtil[_0x40b559(0x20d)](null,_0x11ec98['app'][_0x40b559(0x17b)])[_0x40b559(0x17f)](_0x49596a=>{const _0x6878c6=_0x40b559;if(_0x5735fa=='-')return saveConfig(_0x3a04fe,_0x19e7f5,'-'),_0x434f23[_0x6878c6(0x205)]({'code':0x0});if(!_0x49596a)return _0x11ec98[_0x6878c6(0x1e9)]['returnErrMsg'](_0x434f23,_0x434f23['__'](_0x6878c6(0x21d)));if(fs[_0x6878c6(0x14d)](_0x5735fa)){let _0x2eba58=path[_0x6878c6(0x1ec)](config[_0x6878c6(0x1a8)],_0x6878c6(0x1a6));function _0x137788(){const _0x4fa8e7=_0x6878c6;let _0x31c7a0=path[_0x4fa8e7(0x1ec)](_0x2eba58,_0x19e7f5+_0x4fa8e7(0x1ce));sharp(path[_0x4fa8e7(0x1ec)](_0x5735fa))[_0x4fa8e7(0x16f)]({'width':_0x4a37f0,'withoutEnlargement':!![]})['rotate']()[_0x4fa8e7(0x158)]()[_0x4fa8e7(0x1fc)](_0x31c7a0)[_0x4fa8e7(0x17f)](()=>{const _0x4c7f8a=_0x4fa8e7;return saveConfig(_0x3a04fe,_0x19e7f5,_0x31c7a0),_0x434f23[_0x4c7f8a(0x205)]({'code':0x0});})[_0x4fa8e7(0x1cc)](()=>{const _0x40c041=_0x4fa8e7;return _0x11ec98[_0x40c041(0x1e9)][_0x40c041(0x171)](_0x434f23,_0x434f23['__'](_0x40c041(0x19e)));});}!fs[_0x6878c6(0x14d)](_0x2eba58)?fs[_0x6878c6(0x254)](_0x2eba58,{'recursive':!![]},_0x1fa0d4=>{const _0x1a0664=_0x6878c6;if(_0x1fa0d4)return _0x11ec98[_0x1a0664(0x1e9)][_0x1a0664(0x171)](_0x434f23,_0x434f23['__'](_0x1a0664(0x19e)));_0x137788();}):_0x137788();}else return _0x11ec98[_0x6878c6(0x1e9)][_0x6878c6(0x171)](_0x434f23,_0x434f23['__'](_0x6878c6(0x1da))+_0x5735fa);});}_0x623acc&&nasAccountUtil[_0x2e3dfb(0x20d)](null,_0x11ec98[_0x2e3dfb(0x1e9)][_0x2e3dfb(0x17b)])[_0x2e3dfb(0x17f)](_0x1334d0=>{const _0x1eaf24=_0x2e3dfb;if(!_0x1334d0&&_0x623acc!='-')return _0x11ec98[_0x1eaf24(0x1e9)]['returnErrMsg'](_0x434f23,_0x434f23['__'](_0x1eaf24(0x21d)));return saveConfig(_0x3a04fe,'customLoginTitle',_0x623acc),_0x434f23[_0x1eaf24(0x205)]({'code':0x0});}),_0x45c9e6&&_0x1df917(_0x2e3dfb(0x192),_0x45c9e6,0xc8),_0x95dcac&&_0x1df917('customLoginImage',_0x95dcac,0x3e8),_0x19cf08&&_0x1df917(_0x2e3dfb(0x189),_0x19cf08,0xf14);}),router[_0x3599bb(0x246)](_0x3599bb(0x201),(_0x58cf27,_0x55d4b9,_0x34e96e)=>{const _0x35a750=_0x3599bb;let _0x223d08=_0x58cf27[_0x35a750(0x1e9)]['dbOther'],_0x50df30=_0x58cf27['body'][_0x35a750(0x19b)],_0x269017=_0x58cf27[_0x35a750(0x1e8)][_0x35a750(0x1aa)],_0x3d6e48=_0x58cf27[_0x35a750(0x1e8)]['transCodeCoderNameHevc'],_0x3f7cb5=_0x58cf27['body'][_0x35a750(0x1af)],_0x37aa09=_0x58cf27['body'][_0x35a750(0x164)],_0x47bf54=_0x58cf27[_0x35a750(0x1e8)][_0x35a750(0x1f1)],_0x20a400=_0x58cf27[_0x35a750(0x1e8)]['movieShowMatchName'],_0xc78f2a=_0x58cf27[_0x35a750(0x1e8)][_0x35a750(0x24b)],_0x251eb0=_0x58cf27[_0x35a750(0x1e8)][_0x35a750(0x18d)],_0xa9b0f=_0x58cf27['body'][_0x35a750(0x219)],_0x16f492=_0x58cf27[_0x35a750(0x1e8)][_0x35a750(0x173)],_0x4de05b=_0x58cf27['body'][_0x35a750(0x233)],_0x555105=_0x58cf27['body']['movieTmdbLanguage'],_0x329013=_0x58cf27['body']['movieTmdbApiUrl'],_0x206691=_0x58cf27[_0x35a750(0x1e8)][_0x35a750(0x174)],_0x1558e8=_0x58cf27[_0x35a750(0x1e8)][_0x35a750(0x209)],_0x1c4f21=_0x58cf27[_0x35a750(0x1e8)]['defaultTranscodeResolution'],_0x3f5d3e=_0x58cf27[_0x35a750(0x1e8)]['tmdbProxyEnable'],_0xe9d825=_0x58cf27['body'][_0x35a750(0x153)];if(_0x58cf27[_0x35a750(0x1f4)][_0x35a750(0x218)]!=0x1)return _0x55d4b9['json']({'code':0x66});_0x555105&&saveConfig(_0x223d08,_0x35a750(0x20c),_0x555105);(_0x3f5d3e==0x1||_0x3f5d3e==0x0)&&saveConfig(_0x223d08,'tmdbProxyEnable',_0x3f5d3e);_0xe9d825&&saveConfig(_0x223d08,_0x35a750(0x153),_0xe9d825?_0xe9d825:'');_0x329013!=null&&saveConfig(_0x223d08,_0x35a750(0x19c),_0x329013?_0x329013:'');_0x206691!=null&&saveConfig(_0x223d08,_0x35a750(0x174),_0x206691?_0x206691:'');_0x1558e8&&saveConfig(_0x223d08,_0x35a750(0x209),_0x1558e8);_0x4de05b&&saveConfig(_0x223d08,_0x35a750(0x233),_0x4de05b);_0x1c4f21&&saveConfig(_0x223d08,'defaultTranscodeResolution',_0x1c4f21);let _0x58b7b7=_0x58cf27[_0x35a750(0x1e8)][_0x35a750(0x18a)],_0x5ddfd4=_0x58cf27[_0x35a750(0x1e8)][_0x35a750(0x179)],_0x27cc63=_0x58cf27[_0x35a750(0x1e8)][_0x35a750(0x17c)];(_0x58b7b7==0x1||_0x58b7b7==0x0)&&saveConfig(_0x223d08,'movieHomeShowMyMedia',_0x58b7b7);(_0x5ddfd4==0x1||_0x5ddfd4==0x0)&&saveConfig(_0x223d08,_0x35a750(0x179),_0x5ddfd4);(_0x27cc63==0x1||_0x27cc63==0x0)&&saveConfig(_0x223d08,_0x35a750(0x17c),_0x27cc63);let _0x42a17d=_0x58cf27[_0x35a750(0x1e8)][_0x35a750(0x225)];if(_0x42a17d&&(_0x42a17d<0x1||_0x42a17d>0x33))return _0x55d4b9[_0x35a750(0x205)]({'code':0x1,'message':_0x35a750(0x195)});let _0x51486b=[_0x35a750(0x1d8),_0x35a750(0x15a),_0x35a750(0x1b9),'slow'];_0xa9b0f&&_0x51486b[_0x35a750(0x1bc)](_0xa9b0f)&&saveConfig(_0x223d08,_0x35a750(0x219),_0xa9b0f);_0x20a400&&saveConfig(_0x223d08,_0x35a750(0x245),_0x20a400);_0xc78f2a&&saveConfig(_0x223d08,_0x35a750(0x24b),_0xc78f2a);_0x42a17d&&saveConfig(_0x223d08,_0x35a750(0x225),parseInt(_0x42a17d));_0x50df30&&saveConfig(_0x223d08,'subtitleSize',_0x50df30);_0x16f492&&saveConfig(_0x223d08,_0x35a750(0x173),_0x16f492);_0x269017&&saveConfig(_0x223d08,_0x35a750(0x1aa),_0x269017);_0x3d6e48&&saveConfig(_0x223d08,_0x35a750(0x22a),_0x3d6e48);_0x3f7cb5&&saveConfig(_0x223d08,_0x35a750(0x1c6),_0x3f7cb5);if(_0x37aa09){try{_0x37aa09=parseInt(_0x37aa09);if(_0x37aa09>0x1e)_0x37aa09=0x1e;if(_0x37aa09<0x2)_0x37aa09=0x2;}catch(_0x38e677){_0x37aa09=0x5;}saveConfig(_0x223d08,'transCodeParams-readrate',_0x37aa09);}return _0x251eb0&&(saveConfig(_0x223d08,_0x35a750(0x18d),_0x251eb0),_0x251eb0=='1'&&process[_0x35a750(0x161)]({'type':_0x35a750(0x207)})),_0x47bf54?saveConfig(_0x223d08,_0x35a750(0x1f1),_0x47bf54):dbConfigTable['deleteByTitle'](_0x223d08,_0x35a750(0x1f1)),_0x55d4b9['json']({'code':0x0});}),router[_0x3599bb(0x246)](_0x3599bb(0x188),(_0x2ce67c,_0x57c7e0,_0x5f5a63)=>{const _0x3aaa65=_0x3599bb;let _0x472823=_0x2ce67c[_0x3aaa65(0x1e9)]['dbOther'];if(_0x2ce67c[_0x3aaa65(0x1f4)][_0x3aaa65(0x218)]!=0x1)return _0x57c7e0[_0x3aaa65(0x205)]({'code':0x66});function _0x3d37fe(){const _0x4f18fb=_0x3aaa65;let _0xe85738=_0x2ce67c[_0x4f18fb(0x1e8)][_0x4f18fb(0x1f9)]||'filename',_0x10c2d6=[_0x4f18fb(0x150),_0x4f18fb(0x211)];return _0x10c2d6[_0x4f18fb(0x1bc)](_0xe85738)&&saveConfig(_0x472823,'music-TitleType',_0xe85738),_0x57c7e0[_0x4f18fb(0x205)]({'code':0x0});}_0x3d37fe();}),router[_0x3599bb(0x246)]('/getSystemInfo',(_0x3a4d98,_0x583a73,_0x55afd9)=>{const _0x1092ee=_0x3599bb;let _0x4c5bfd={};_0x4c5bfd[_0x1092ee(0x17a)]=path[_0x1092ee(0x1ec)](config['userDataFolder'],_0x1092ee(0x22e)),_0x4c5bfd[_0x1092ee(0x19f)]=config[_0x1092ee(0x1d0)],fs['access'](_0x4c5bfd[_0x1092ee(0x19f)],fs[_0x1092ee(0x1ed)][_0x1092ee(0x202)]|fs[_0x1092ee(0x1ed)][_0x1092ee(0x203)],_0x51a036=>{const _0x11d8d8=_0x1092ee;_0x4c5bfd['imgFolderUsable']=0x1;_0x51a036&&(_0x4c5bfd[_0x11d8d8(0x235)]=0x0);let _0x279e35=dbConfigTable[_0x11d8d8(0x21e)](_0x3a4d98[_0x11d8d8(0x1e9)][_0x11d8d8(0x17b)],_0x11d8d8(0x152));return _0x279e35?_0x4c5bfd[_0x11d8d8(0x152)]=JSON[_0x11d8d8(0x15f)](_0x279e35['value']):_0x4c5bfd[_0x11d8d8(0x152)]=![],_0x4c5bfd[_0x11d8d8(0x1e7)]=config['appRootPath'],_0x583a73[_0x11d8d8(0x205)]({'code':0x0,'data':_0x4c5bfd});});}),router[_0x3599bb(0x246)](_0x3599bb(0x14f),(_0x42ceba,_0x1ab380,_0x3c4539)=>{const _0x50d3ab=_0x3599bb;if(dbUserTable[_0x50d3ab(0x215)](_0x42ceba,_0x1ab380)!==!![])return;if(OS[_0x50d3ab(0x182)]()!=_0x50d3ab(0x22f)&&OS[_0x50d3ab(0x182)]()!='darwin')return _0x42ceba['app'][_0x50d3ab(0x171)](_0x1ab380,_0x1ab380['__']('notSupport'));return process[_0x50d3ab(0x161)]({'type':_0x50d3ab(0x1a2)}),_0x1ab380[_0x50d3ab(0x205)]({'code':0x0});}),router[_0x3599bb(0x246)](_0x3599bb(0x160),(_0x210b8e,_0x214753,_0x33f79d)=>{const _0x232503=_0x3599bb;if(_0x210b8e['currentUser'][_0x232503(0x218)]!=0x1)return _0x214753['json']({'code':0x66});let _0x2e6e8b=path[_0x232503(0x1ec)](config[_0x232503(0x1d0)],_0x232503(0x228));fs[_0x232503(0x168)](_0x2e6e8b,(_0x280f88,_0x4eef7a)=>{if(_0x280f88)return;fs['rm'](_0x2e6e8b,{'recursive':!![]},_0x26427e=>{const _0x321c17=_0x3d1f;fs['mkdir'](_0x2e6e8b,{'recursive':!![]},_0x4e2686=>{const _0x139743=_0x3d1f;console[_0x139743(0x176)](_0x4e2686);});if(_0x26427e)return fileUtil[_0x321c17(0x214)](_0x214753,_0x26427e);return dbConfigTable[_0x321c17(0x1ca)](_0x210b8e[_0x321c17(0x1e9)][_0x321c17(0x17b)],'cacheImageInfo'),_0x214753['json']({'code':0x0});});});let _0x3a6ca5=path[_0x232503(0x1ec)](config[_0x232503(0x1d0)],_0x232503(0x1d1)),_0x234a9d=path[_0x232503(0x1ec)](config[_0x232503(0x1d0)],'subtitle',_0x232503(0x247));fs[_0x232503(0x168)](_0x3a6ca5,(_0x564e0c,_0x152c66)=>{if(_0x564e0c)return;fs['rm'](_0x3a6ca5,{'recursive':!![]},_0x3d190d=>{const _0x18b22b=_0x3d1f;fs['mkdir'](_0x234a9d,{'recursive':!![]},_0x28d60d=>{const _0x24cc5c=_0x3d1f;console[_0x24cc5c(0x176)](_0x28d60d);});if(_0x3d190d)return fileUtil[_0x18b22b(0x214)](_0x214753,_0x3d190d);});});}),router['post'](_0x3599bb(0x24f),(_0x400f48,_0x1696be,_0x393981)=>{const _0x30a970=_0x3599bb;if(dbUserTable[_0x30a970(0x215)](_0x400f48,_0x1696be)!==!![])return;let _0x543233=_0x400f48['body'][_0x30a970(0x226)],_0x554149=['system',_0x30a970(0x237),_0x30a970(0x208),_0x30a970(0x194),_0x30a970(0x242),_0x30a970(0x24d),_0x30a970(0x1ba),'memLayout',_0x30a970(0x1a4),'graphics',_0x30a970(0x1ea),_0x30a970(0x15e),_0x30a970(0x1ad),'audio',_0x30a970(0x184),_0x30a970(0x1c0),_0x30a970(0x1c3)];if(!_0x554149['includes'](_0x543233))return _0x400f48[_0x30a970(0x1e9)][_0x30a970(0x171)](_0x1696be,_0x30a970(0x16c));si[_0x543233](_0x262f06=>{const _0x14a482=_0x30a970;try{return _0x1696be[_0x14a482(0x205)]({'code':0x0,'data':_0x262f06});}catch(_0x2d6752){console[_0x14a482(0x176)](_0x14a482(0x1a3),_0x2d6752);}});}),router[_0x3599bb(0x246)](_0x3599bb(0x1ab),(_0x4361d2,_0x586e4a,_0x261b10)=>{const _0x598c3f=_0x3599bb;let _0x1d03f1=netUtils[_0x598c3f(0x1f0)](_0x4361d2);if(_0x1d03f1!=_0x598c3f(0x20b))return _0x4361d2[_0x598c3f(0x1e9)][_0x598c3f(0x171)](_0x586e4a,_0x586e4a['__'](_0x598c3f(0x19e)));let _0x414942=_0x4361d2[_0x598c3f(0x1e8)]['folder'],_0x43312e=_0x4361d2[_0x598c3f(0x1e8)]['filename'],_0xfe20cb=_0x4361d2['body'][_0x598c3f(0x1cb)];if(!_0xfe20cb)try{_0xfe20cb=path[_0x598c3f(0x1ec)](_0x414942,_0x43312e);}catch(_0x35828b){console['log'](_0x35828b);}if(!_0xfe20cb)return _0x4361d2[_0x598c3f(0x1e9)][_0x598c3f(0x171)](_0x586e4a,_0x598c3f(0x253));if(dbUserTable[_0x598c3f(0x210)](_0x4361d2,_0x586e4a,'folder',_0x598c3f(0x1e0),'')==!![]){let _0x2d84e7=_0x4361d2[_0x598c3f(0x1e8)]['openType']||_0x598c3f(0x1bd);process['send']({'type':'shell','shellType':_0x2d84e7,'path':_0xfe20cb});let _0x498fee={'code':0x0};return _0x586e4a['json'](_0x498fee);}}),module['exports']=router;