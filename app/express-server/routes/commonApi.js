function _0x4f7f(){const _0x498a21=['folderNotExist','bluetoothDevices','INDEX_TABLE_NAME_BOOK','aiClassesEnable','notSupportForAutoUpdate','BACKUP','stringify','rotate','tmdbProxyUrl','hostname','startFaceAiWork','musicTitleType','battery','parse','startClassesAiWork','movieHomeShowLibrary','total_size','proxy.isntVip','count','wal_checkpoint(RESTART)','serverType','httpsCertError','aiFaceEnable','6qMoSTU','need\x20path','INDEX_TABLE_NAME_MOVIE','defaultApiPortHttps','taskState','/clearCache','onlySupportOnServerApp','diskLayout','run','subtitlePreGen','totalmem','photo','audio','/changeCachePath','customLoginTitle','memLayout','excludePathFolderBrowser','defaultTranscodeResolution','transCodeCoderNameHevc','movieHomeShowMyMedia','autoHardAccDecode','/saveConfigCustom','platform','currentUser','twoStepLogin','httpsKey','\x27,\x27','autoLaunch','defaultApiPort','../../db/dbNoticeCenterTable','chassis','clearTable','keys','/openInSystem','get','create','getAll','value','copy_size','path','transcodePath','\x20title\x20in\x20(\x27apiServer\x27,\x27apiServerHttps\x27,\x27webDavServer\x27,\x27FTPServer\x27,\x27globalIpList\x27)','4WFeuDh','/getBgTask','mkdir','aiSimilarPhotoEnable','darwin','/relaunch','/saveConfig','localhost','START_PRE_GEN_SUBTITLE','defaultWebDavPortHttps','webDavPort','setting.portInvalid','../../db/dbFileIndexTable','transCodeParams-readrate','startSimilarPhotoWork','getAllIndexInfo','status','/deleteBgTask','/saveConfigPhoto','/setLanguage','autoShowWindow','globalIpList',':http','moviePlaylongPressRate','globalIndexInfo','movieTmdbApiKey','app','operationFail','getById','folder','cpus','stat','INDEX_TABLE_NAME_PHOTO','excludeFilenameMovie','movieShowMatchName','title','ddnsIpv6Address','aiFaceMinPhotoCount','unreadMsgCount','getGlobalInfo','username','force','customLogoImage','subtitleSize','10429990bnGgkT','id3tag','send','isWinDisk','toUpperCase','1354235MFqCtg','/updateNewVersion','CRF:\x201-51','autoScanSource','getAllByWhere','join','appRootPath',':https','usb','getAllRecordByWhere','isVip','prepare','is_admin','movieHomeShowHistory','all','webDavHttpsCert','then','cacheImageInfo','crf','transCodeParams-CoderNameH264','getUnReadCount','movieDatabaseType','power_get','Relaunch','push','returnFileError','movieTmdbLanguage','resize','graphics','systeminformation','useFolderPictureAsPoster','/getVersionInfo','toFile','transCodeCoderNameH264','dbOther','/getLanguage','transcodeSpeed','fast','cacheParentPath','access','REPLACE\x20INTO\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20tour_record(page,version,username)\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20VALUES(?,\x20?,?)','upload','customShareUrl','memTooLess','defaultFTPPort','ipDetection','moviePreferLanguage','../utils/fileUtils','port:\x20256-65500','defaultThreadCount','medium','exec','post','cpu','3876985NBBnCy','excludePathPhoto','versionInfo','notSupport','offset','W_OK','findByTitle','/getSystemInfo','subtitle','filename','638501SUBiiE','getClientIp','slow','refreshIpList','-----','showMenuArr','json','page','music','webDavUseApiCert','tokenKeepHour','FTPPort','7219768zGsZYZ','isAdmin','autoLoginClient','ultrafast','Router','apiPortHttps','startUpdate','bios','allConfig','checkSqlInjection','threadCount','\x27,\x27globalDiskInfo\x27)','system','version','customLoginImage','ipMode','dbFileIndex','tmdbProxyEnable','/getSystemState','DELETE\x20FROM\x20bg_task\x20WHERE\x20id=?','../../myConfig/config','\x20status=\x27running\x27\x20or\x20status=\x27waiting\x27','win32','imgFolder','maxThreadCountIs','getIpList','openType','movieTmdbApiUrl','/getAllConfig','httpsCert','useNasCabCerts','9ZKLbps','constants','length','ipBan','wifiNetworks','includes','SELECT\x20*\x20from\x20tour_record\x20where\x20page=?\x20and\x20version=?\x20and\x20username=?','apiServerHttps','fullPath','/getServerState','vacuum','shell','webDavPortHttps','body','findByTitleArr','imgFolderUsable','serverName','transCodeReadRate','existsSync','../utils/nasAccountUtils','INDEX_TABLE_NAME_MUSIC','mem','task_name','/saveConfigMusic','2CKKRyQ','19170932rgdrvd','R_OK','express','startsWith','userDataFolder','cache','log','webDavHttpsKey','deleteByTitle','language','custom','excludeFilenamePhoto','apiPort','cachePathInvalid','book','doUserCanGet','pragma','returnErrMsg','task_id','excludePathMovie','2961069ATFVKb','osInfo','customHomeBgImage'];_0x4f7f=function(){return _0x498a21;};return _0x4f7f();}const _0x3c43f1=_0x2492;(function(_0x2d5548,_0x2cdc4e){const _0x1576cc=_0x2492,_0x3ce547=_0x2d5548();while(!![]){try{const _0x1fb4c2=parseInt(_0x1576cc(0x238))/0x1*(-parseInt(_0x1576cc(0x16e))/0x2)+-parseInt(_0x1576cc(0x183))/0x3*(parseInt(_0x1576cc(0x1c7))/0x4)+-parseInt(_0x1576cc(0x1f8))/0x5+parseInt(_0x1576cc(0x19d))/0x6*(parseInt(_0x1576cc(0x22e))/0x7)+-parseInt(_0x1576cc(0x244))/0x8+parseInt(_0x1576cc(0x156))/0x9*(parseInt(_0x1576cc(0x1f3))/0xa)+parseInt(_0x1576cc(0x16f))/0xb;if(_0x1fb4c2===_0x2cdc4e)break;else _0x3ce547['push'](_0x3ce547['shift']());}catch(_0xb4267a){_0x3ce547['push'](_0x3ce547['shift']());}}}(_0x4f7f,0x84098));var express=require(_0x3c43f1(0x171)),router=express[_0x3c43f1(0x248)]();let config=require(_0x3c43f1(0x258)),dbFileIndexTable=require(_0x3c43f1(0x1d3)),dbConfigTable=require('../../db/dbConfigTable'),dbSourceTable=require('../../db/dbSourceFolderTable'),dbNoticeCenterTable=require(_0x3c43f1(0x1ba)),netUtils=require('../utils/netUtils');const dbUserTable=require('../../db/dbUserTable'),dbBackupTask=require('../../db/dbBackupTask'),OS=require('os');let path=require(_0x3c43f1(0x1c4)),fs=require('fs'),fileUtil=require(_0x3c43f1(0x227));var package=require('../../../package.json');const sqliteUtil=require('../utils/sqliteUtil');let nasAccountUtil=require(_0x3c43f1(0x169));const sharp=require('sharp'),si=require(_0x3c43f1(0x215));function _0x2492(_0x9599c4,_0x32499e){const _0x4f7fcd=_0x4f7f();return _0x2492=function(_0x24924b,_0x27143c){_0x24924b=_0x24924b-0x14c;let _0x40378c=_0x4f7fcd[_0x24924b];return _0x40378c;},_0x2492(_0x9599c4,_0x32499e);}let tls=require('tls');function testCertAndKeyMatch(_0x5c70fe,_0x175624){try{return tls['createSecureContext']({'cert':_0x5c70fe,'key':_0x175624}),!![];}catch(_0x377913){return![];}}router[_0x3c43f1(0x22c)](_0x3c43f1(0x217),(_0x249aff,_0x7861a3,_0x5d255a)=>{const _0xe26313=_0x3c43f1;let _0x842b0a=package[_0xe26313(0x251)],_0x92810a=dbConfigTable[_0xe26313(0x234)](_0x249aff[_0xe26313(0x1e1)][_0xe26313(0x21a)],_0xe26313(0x230)),_0x330f8f=dbConfigTable[_0xe26313(0x234)](_0x249aff['app'][_0xe26313(0x21a)],'showMenuArr');process['send']({'type':_0xe26313(0x1ee),'func':'getUpdateInfo'}),_0x7861a3[_0xe26313(0x23e)]({'code':0x0,'showMenuArr':_0x330f8f?JSON[_0xe26313(0x193)](_0x330f8f[_0xe26313(0x1c2)]):'','versionInfo':_0x92810a?JSON[_0xe26313(0x193)](_0x92810a[_0xe26313(0x1c2)]):'','currentVersion':_0x842b0a});}),router[_0x3c43f1(0x22c)](_0x3c43f1(0x1f9),(_0x58da14,_0x4bd634,_0x4f06dd)=>{const _0x456583=_0x3c43f1;if(OS[_0x456583(0x1b3)]()!=_0x456583(0x14d)&&OS['platform']()!=_0x456583(0x1cb))return _0x58da14[_0x456583(0x1e1)][_0x456583(0x180)](_0x4bd634,_0x4bd634['__'](_0x456583(0x18a)));return process[_0x456583(0x1f5)]({'type':_0x456583(0x24a)}),_0x4bd634[_0x456583(0x23e)]({'code':0x0});}),router[_0x3c43f1(0x22c)](_0x3c43f1(0x1c8),(_0x45b7ce,_0x5aa1a5,_0x49924f)=>{const _0x5cd1f0=_0x3c43f1;let _0x436624=netUtils['getClientIp'](_0x45b7ce),_0x31ece4=_0x45b7ce['body'][_0x5cd1f0(0x1a1)],_0x18c0dc=_0x45b7ce[_0x5cd1f0(0x163)][_0x5cd1f0(0x198)],_0x8526e6=_0x45b7ce['body'][_0x5cd1f0(0x232)],_0x2c1940=[];if(_0x45b7ce[_0x5cd1f0(0x1b4)]['is_admin']==0x1){_0x2c1940=_0x45b7ce[_0x5cd1f0(0x1e1)][_0x5cd1f0(0x21a)][_0x5cd1f0(0x203)]('SELECT\x20*\x20FROM\x20bg_task\x20WHERE\x20task_state=?\x20order\x20by\x20id\x20desc\x20limit\x20?\x20offset\x20?')[_0x5cd1f0(0x206)](_0x31ece4,_0x18c0dc,_0x8526e6);let _0x5c7a06=dbBackupTask[_0x5cd1f0(0x201)](_0x45b7ce[_0x5cd1f0(0x1e1)][_0x5cd1f0(0x21a)],_0x5cd1f0(0x14c),[]);for(let _0x495f6b in _0x5c7a06){let _0xff391e=_0x5c7a06[_0x495f6b],_0x33b1cb=dbBackupTask[_0x5cd1f0(0x1e3)](_0x45b7ce[_0x5cd1f0(0x1e1)]['dbOther'],_0xff391e[_0x5cd1f0(0x181)]);_0x2c1940[_0x5cd1f0(0x210)]({'task_type':_0x5cd1f0(0x18b),'task_name':_0x33b1cb?_0x33b1cb[_0x5cd1f0(0x16c)]:'','size_current':_0xff391e[_0x5cd1f0(0x1c3)],'size_all':_0xff391e[_0x5cd1f0(0x196)]});}}let _0x4183d2={'code':0x0,'data':_0x2c1940,'reqIp':_0x436624};return _0x5aa1a5[_0x5cd1f0(0x23e)](_0x4183d2);}),router[_0x3c43f1(0x22c)](_0x3c43f1(0x1d8),(_0x1c1ef0,_0xf8fc70,_0x2f37c8)=>{const _0x1fcf1e=_0x3c43f1;let _0x44e38b=_0x1c1ef0['body']['taskId'];dbUserTable[_0x1fcf1e(0x245)](_0x1c1ef0,_0xf8fc70)===!![]&&_0x1c1ef0[_0x1fcf1e(0x1e1)][_0x1fcf1e(0x21a)]['prepare'](_0x1fcf1e(0x257))[_0x1fcf1e(0x1a5)](_0x44e38b);let _0x19d284={'code':0x0};return _0xf8fc70[_0x1fcf1e(0x23e)](_0x19d284);}),router[_0x3c43f1(0x22c)]('/vaccumDb',(_0x2613bd,_0x61bca,_0xcc9881)=>{const _0x3751ab=_0x3c43f1;try{return _0x2613bd[_0x3751ab(0x1e1)][_0x3751ab(0x21a)]['exec'](_0x3751ab(0x160)),_0x2613bd[_0x3751ab(0x1e1)][_0x3751ab(0x254)][_0x3751ab(0x22b)](_0x3751ab(0x160)),_0x2613bd[_0x3751ab(0x1e1)]['dbOther'][_0x3751ab(0x17f)](_0x3751ab(0x199)),_0x2613bd[_0x3751ab(0x1e1)]['dbFileIndex']['pragma'](_0x3751ab(0x199)),_0x61bca[_0x3751ab(0x23e)]({'code':0x0});}catch(_0x27a2bc){return _0x2613bd[_0x3751ab(0x1e1)][_0x3751ab(0x180)](_0x61bca,_0x61bca['__'](_0x3751ab(0x1e2)));}}),router[_0x3c43f1(0x22c)]('/resetIndex',(_0xf2fb0f,_0x47bdf8,_0x49df81)=>{const _0x60b9cd=_0x3c43f1;if(_0xf2fb0f['currentUser'][_0x60b9cd(0x204)]!=0x1)return _0x47bdf8[_0x60b9cd(0x23e)]({'code':0x66});let _0x565f60=_0xf2fb0f['body'][_0x60b9cd(0x19a)];dbSourceTable['clearTable'](_0xf2fb0f[_0x60b9cd(0x1e1)][_0x60b9cd(0x21a)],_0x565f60);if(_0x565f60=='movie')dbFileIndexTable[_0x60b9cd(0x1bc)](_0xf2fb0f[_0x60b9cd(0x1e1)]['dbFileIndex'],dbFileIndexTable[_0x60b9cd(0x19f)]);else{if(_0x565f60==_0x60b9cd(0x1a8))dbFileIndexTable[_0x60b9cd(0x1bc)](_0xf2fb0f[_0x60b9cd(0x1e1)]['dbFileIndex'],dbFileIndexTable[_0x60b9cd(0x1e7)]);else{if(_0x565f60==_0x60b9cd(0x240))dbFileIndexTable[_0x60b9cd(0x1bc)](_0xf2fb0f[_0x60b9cd(0x1e1)][_0x60b9cd(0x254)],dbFileIndexTable[_0x60b9cd(0x16a)]);else _0x565f60==_0x60b9cd(0x17d)&&dbFileIndexTable['clearTable'](_0xf2fb0f[_0x60b9cd(0x1e1)][_0x60b9cd(0x254)],dbFileIndexTable[_0x60b9cd(0x188)]);}}_0x47bdf8['json']({'code':0x0});}),router[_0x3c43f1(0x22c)]('/getServerIpAndSign',(_0x58d6fa,_0x2a2a49,_0x1b0a6d)=>{const _0x4f0971=_0x3c43f1;process[_0x4f0971(0x1f5)]({'type':_0x4f0971(0x1ee),'func':'getIpList'});let _0x5b7300=dbConfigTable[_0x4f0971(0x234)](_0x58d6fa[_0x4f0971(0x1e1)]['dbOther'],_0x4f0971(0x1dc)),_0x13338e=dbConfigTable[_0x4f0971(0x234)](_0x58d6fa[_0x4f0971(0x1e1)]['dbOther'],'apiServer'),_0x5b95ff=dbConfigTable['findByTitle'](_0x58d6fa[_0x4f0971(0x1e1)][_0x4f0971(0x21a)],_0x4f0971(0x15d)),_0x33c1e4={'code':0x0,'ipList':_0x5b7300,'apiServer':_0x13338e,'apiServerHttps':_0x5b95ff,'hostName':OS[_0x4f0971(0x18f)]()};return _0x2a2a49[_0x4f0971(0x23e)](_0x33c1e4);}),router[_0x3c43f1(0x22c)](_0x3c43f1(0x15f),(_0x3c4f59,_0x57c9de,_0x3d4da9)=>{const _0x243e67=_0x3c43f1;let _0x27672b=netUtils[_0x243e67(0x239)](_0x3c4f59),_0x3a1935=_0x3c4f59[_0x243e67(0x163)][_0x243e67(0x166)],_0x280ff8;_0x3a1935==_0x243e67(0x206)?(process[_0x243e67(0x1f5)]({'type':'getGlobalInfo','func':_0x243e67(0x150)}),_0x280ff8=dbConfigTable[_0x243e67(0x1fc)](_0x3c4f59[_0x243e67(0x1e1)][_0x243e67(0x21a)],_0x243e67(0x1c6))):_0x280ff8=dbConfigTable[_0x243e67(0x234)](_0x3c4f59[_0x243e67(0x1e1)][_0x243e67(0x21a)],_0x3a1935);let _0x419d22=dbConfigTable['findByTitle'](_0x3c4f59[_0x243e67(0x1e1)][_0x243e67(0x21a)],_0x243e67(0x1eb)),_0xe98a3={'code':0x0,'data':_0x280ff8,'hostName':OS[_0x243e67(0x18f)](),'reqIp':_0x27672b};_0x419d22&&_0x419d22[_0x243e67(0x1c2)]&&(_0xe98a3['ddnsIpv6Address']=_0x419d22[_0x243e67(0x1c2)]);let _0x23a0bf=dbNoticeCenterTable[_0x243e67(0x20c)](_0x3c4f59[_0x243e67(0x1e1)][_0x243e67(0x21a)]);return _0xe98a3[_0x243e67(0x1ed)]=_0x23a0bf[_0x243e67(0x198)],_0x57c9de[_0x243e67(0x23e)](_0xe98a3);}),router[_0x3c43f1(0x22c)](_0x3c43f1(0x256),(_0x409307,_0x408a6c,_0x40d9a6)=>{const _0x391697=_0x3c43f1;let _0x20c144=netUtils[_0x391697(0x239)](_0x409307),_0x39572d=_0x409307['body'][_0x391697(0x1f0)],_0x360bd5=_0x391697(0x1df)+dbFileIndexTable[_0x391697(0x19f)],_0x1353a5=_0x391697(0x1df)+dbFileIndexTable[_0x391697(0x1e7)];process[_0x391697(0x1f5)]({'type':_0x391697(0x1ee),'func':_0x391697(0x1d6)}),process[_0x391697(0x1f5)]({'type':_0x391697(0x1ee),'func':'getDiskInfo','force':_0x39572d}),fs['stat'](config['cacheParentPath'],_0x3e74c9=>{const _0x13cab2=_0x391697;if(_0x3e74c9)return _0x409307[_0x13cab2(0x1e1)][_0x13cab2(0x180)](_0x408a6c,_0x408a6c['__'](_0x13cab2(0x17c)));else{let _0x333919=dbConfigTable[_0x13cab2(0x1fc)](_0x409307[_0x13cab2(0x1e1)][_0x13cab2(0x21a)],'\x20title\x20in\x20(\x27globalCpuInfo\x27,\x27globalMemInfo\x27,\x27'+_0x360bd5+_0x13cab2(0x1b7)+_0x1353a5+_0x13cab2(0x24f));return _0x408a6c['json']({'code':0x0,'data':_0x333919,'version':package[_0x13cab2(0x251)],'reqIp':_0x20c144,'platform':OS[_0x13cab2(0x1b3)]()});}});}),router[_0x3c43f1(0x22c)]('/shouldShowTour',(_0x2aaff0,_0x49f4f0,_0x5a3bc4)=>{const _0x280daf=_0x3c43f1;let _0x470928=_0x2aaff0['body'][_0x280daf(0x23f)],_0x165b5f=package[_0x280daf(0x251)],_0x5ccd5c=_0x2aaff0[_0x280daf(0x1b4)][_0x280daf(0x1ef)],_0x41a899=_0x2aaff0[_0x280daf(0x1e1)][_0x280daf(0x21a)][_0x280daf(0x203)](_0x280daf(0x15c))[_0x280daf(0x1bf)](_0x470928,_0x165b5f,_0x5ccd5c);if(!_0x41a899){const _0x1a5539=_0x280daf(0x220);_0x2aaff0[_0x280daf(0x1e1)][_0x280daf(0x21a)][_0x280daf(0x203)](_0x1a5539)[_0x280daf(0x1a5)](_0x470928,_0x165b5f,_0x5ccd5c);}return _0x49f4f0[_0x280daf(0x23e)]({'code':0x0,'show':_0x41a899?0x0:0x1});}),router[_0x3c43f1(0x22c)](_0x3c43f1(0x153),(_0xaab4c6,_0x21f7a5,_0x42275d)=>{const _0x31dae6=_0x3c43f1;let _0x1a9b0d=_0xaab4c6[_0x31dae6(0x163)][_0x31dae6(0x1bd)],_0x291e02;if(_0x1a9b0d&&_0x1a9b0d['length']>0x0){if(sqliteUtil[_0x31dae6(0x24d)](_0x1a9b0d)==!![])return _0xaab4c6[_0x31dae6(0x1e1)][_0x31dae6(0x180)](_0x21f7a5,'error\x20keys');_0x291e02=dbConfigTable[_0x31dae6(0x164)](_0xaab4c6[_0x31dae6(0x1e1)][_0x31dae6(0x21a)],_0x1a9b0d);}else _0x291e02=dbConfigTable[_0x31dae6(0x1c1)](_0xaab4c6[_0x31dae6(0x1e1)]['dbOther']);for(let _0x4b8d7b in _0x291e02){let _0x115a11=_0x291e02[_0x4b8d7b];(_0x115a11[_0x31dae6(0x1ea)]==_0x31dae6(0x154)||_0x115a11['title']==_0x31dae6(0x1b6))&&(!_0x115a11[_0x31dae6(0x1c2)][_0x31dae6(0x172)](_0x31dae6(0x23c))&&(_0x115a11['value']=''));}let _0x1afc0b={};_0x1afc0b[_0x31dae6(0x1b9)]=config['apiPort'],_0x1afc0b[_0x31dae6(0x1a0)]=config[_0x31dae6(0x249)],_0x1afc0b['defaultWebDavPort']=config[_0x31dae6(0x1d1)],_0x1afc0b[_0x31dae6(0x1d0)]=config[_0x31dae6(0x162)],_0x1afc0b[_0x31dae6(0x224)]=config[_0x31dae6(0x243)],_0x1afc0b[_0x31dae6(0x229)]=0x2,_0x1afc0b[_0x31dae6(0x24c)]=_0x291e02,nasAccountUtil[_0x31dae6(0x202)](null,_0xaab4c6[_0x31dae6(0x1e1)][_0x31dae6(0x21a)])[_0x31dae6(0x208)](_0x56c0c7=>{_0x21f7a5['json']({'code':0x0,'data':_0x1afc0b,'isVip':_0x56c0c7});});}),router[_0x3c43f1(0x22c)](_0x3c43f1(0x21b),(_0x58f279,_0x3f3a4a,_0xacfc29)=>{const _0x2a91f2=_0x3c43f1;let _0x1a56fc=dbConfigTable['findByTitle'](_0x58f279['app']['dbOther'],_0x2a91f2(0x178)),_0x403132='';_0x1a56fc&&(_0x403132=_0x1a56fc[_0x2a91f2(0x1c2)]),_0x3f3a4a['json']({'code':0x0,'data':_0x403132});}),router[_0x3c43f1(0x22c)](_0x3c43f1(0x1da),(_0x556742,_0xd08bef,_0x45137d)=>{const _0x48bab5=_0x3c43f1;let _0xf60895=netUtils[_0x48bab5(0x239)](_0x556742);if(_0xf60895!=_0x48bab5(0x1ce))return'ip\x20not\x20allow';let _0x57460e=_0x556742[_0x48bab5(0x163)][_0x48bab5(0x178)];if(!_0x57460e)return _0xd08bef[_0x48bab5(0x1d7)](0x194)['end']();return dbConfigTable[_0x48bab5(0x1c0)](_0x556742[_0x48bab5(0x1e1)][_0x48bab5(0x21a)],{'title':_0x48bab5(0x178),'value':_0x57460e}),_0xd08bef[_0x48bab5(0x23e)]({'code':0x0});});function saveConfig(_0x5cf64c,_0x18fbb3,_0x29a056){const _0x28eed4=_0x3c43f1;dbConfigTable[_0x28eed4(0x1c0)](_0x5cf64c,{'title':_0x18fbb3,'value':_0x29a056+''});}router[_0x3c43f1(0x22c)](_0x3c43f1(0x1aa),(_0xf55b49,_0x35a7ba,_0x4e3ff9)=>{const _0x1be7b9=_0x3c43f1;let _0x53b18f=_0xf55b49[_0x1be7b9(0x163)]['cachePath'];if(_0xf55b49[_0x1be7b9(0x1b4)][_0x1be7b9(0x204)]!=0x1)return _0x35a7ba['json']({'code':0x66});if(_0x53b18f)fs['access'](_0x53b18f,fs[_0x1be7b9(0x157)][_0x1be7b9(0x233)]|fs[_0x1be7b9(0x157)][_0x1be7b9(0x170)],_0x2fd001=>{const _0x30e357=_0x1be7b9;return!_0x2fd001?(saveConfig(_0xf55b49[_0x30e357(0x1e1)][_0x30e357(0x21a)],_0x30e357(0x21e),_0x53b18f),_0x35a7ba[_0x30e357(0x23e)]({'code':0x0})):fileUtil[_0x30e357(0x211)](_0x35a7ba,_0x2fd001);});else return dbConfigTable[_0x1be7b9(0x177)](_0xf55b49['app'][_0x1be7b9(0x21a)],'cacheParentPath'),_0x35a7ba[_0x1be7b9(0x23e)]({'code':0x0});});let forbiddenPorts=[0x1,0x7,0x9,0xb,0xd,0xf,0x11,0x13,0x14,0x15,0x16,0x17,0x19,0x25,0x2a,0x2b,0x35,0x4d,0x4f,0x57,0x5f,0x65,0x66,0x67,0x68,0x6d,0x6e,0x6f,0x71,0x73,0x75,0x77,0x7b,0x87,0x8b,0x8f,0xb3,0x185,0x1d1,0x200,0x201,0x202,0x203,0x20e,0x212,0x213,0x214,0x21c,0x22c,0x233,0x24b,0x259,0x27c,0x3e1,0x3e3,0x801,0xe4b,0xfcd,0x1770,0x1a09,0x1a0a,0x1a0b,0x1a0c,0x1a0d,0xd3d];router[_0x3c43f1(0x22c)](_0x3c43f1(0x1cd),(_0x35d638,_0xeeec7a,_0x39567b)=>{const _0x5883ed=_0x3c43f1;let _0x138cd4=_0x35d638['body'][_0x5883ed(0x17b)],_0x434e4d=_0x35d638[_0x5883ed(0x163)][_0x5883ed(0x249)],_0x3eee7c=_0x35d638[_0x5883ed(0x163)][_0x5883ed(0x1d1)],_0xc61224=_0x35d638[_0x5883ed(0x163)][_0x5883ed(0x162)],_0x5578d6=_0x35d638[_0x5883ed(0x163)]['FTPPort'],_0xcdb2d8=_0x35d638[_0x5883ed(0x163)][_0x5883ed(0x1b8)],_0x13700b=_0x35d638[_0x5883ed(0x163)]['autoLoginClient'],_0x386863=_0x35d638[_0x5883ed(0x163)][_0x5883ed(0x1db)],_0x4a3892=_0x35d638[_0x5883ed(0x163)][_0x5883ed(0x1fb)],_0x344aa4=_0x35d638['body'][_0x5883ed(0x1b6)],_0x3f304a=_0x35d638['body'][_0x5883ed(0x154)],_0x8f91e6=_0x35d638[_0x5883ed(0x163)][_0x5883ed(0x176)],_0x107be9=_0x35d638[_0x5883ed(0x163)][_0x5883ed(0x207)],_0x4e4932=_0x35d638[_0x5883ed(0x163)][_0x5883ed(0x178)],_0xa9961f=_0x35d638[_0x5883ed(0x163)]['threadCount'],_0x576d94=_0x35d638[_0x5883ed(0x163)][_0x5883ed(0x182)],_0x2ed838=_0x35d638[_0x5883ed(0x163)][_0x5883ed(0x22f)],_0x350e42=_0x35d638[_0x5883ed(0x163)][_0x5883ed(0x1ad)],_0x56cf4b=_0x35d638[_0x5883ed(0x163)][_0x5883ed(0x1e8)],_0x299845=_0x35d638[_0x5883ed(0x163)][_0x5883ed(0x17a)],_0x53c6cd=_0x35d638[_0x5883ed(0x163)][_0x5883ed(0x23d)],_0x5ad72c=_0x35d638[_0x5883ed(0x163)][_0x5883ed(0x242)],_0x4c9dda=_0x35d638[_0x5883ed(0x163)][_0x5883ed(0x222)],_0x73f086=_0x35d638[_0x5883ed(0x163)]['webDavUseApiCert'];if(_0x35d638[_0x5883ed(0x1b4)][_0x5883ed(0x204)]!=0x1)return _0xeeec7a['json']({'code':0x66});let _0x3f2884=0xffdc;if(_0x138cd4>_0x3f2884||_0x3eee7c>_0x3f2884||_0x5578d6>_0x3f2884||_0xc61224>_0x3f2884)return _0xeeec7a[_0x5883ed(0x23e)]({'code':0x1,'message':_0x5883ed(0x228)});let _0x2b163e=_0x35d638[_0x5883ed(0x1e1)][_0x5883ed(0x21a)];_0x53c6cd&&saveConfig(_0x2b163e,_0x5883ed(0x23d),JSON[_0x5883ed(0x18c)](_0x53c6cd));_0x4c9dda&&saveConfig(_0x2b163e,'customShareUrl',_0x4c9dda);_0x576d94&&saveConfig(_0x2b163e,_0x5883ed(0x182),JSON[_0x5883ed(0x18c)](_0x576d94));_0x5ad72c&&parseInt(_0x5ad72c)!=NaN&&_0x5ad72c>0x0&&_0x5ad72c<0x5f5e0ff&&saveConfig(_0x2b163e,_0x5883ed(0x242),_0x5ad72c);_0x2ed838&&saveConfig(_0x2b163e,_0x5883ed(0x22f),JSON[_0x5883ed(0x18c)](_0x2ed838));if(_0x350e42){let _0x124958=netUtils[_0x5883ed(0x239)](_0x35d638);if(_0x124958=='localhost'){for(let _0x2f2d55 in _0x350e42){let _0x230155=_0x350e42[_0x2f2d55],_0x478f24=fs[_0x5883ed(0x168)](_0x230155);if(!_0x478f24)return _0x35d638['app']['returnErrMsg'](_0xeeec7a,_0xeeec7a['__'](_0x5883ed(0x186))+':'+_0x230155);fileUtil[_0x5883ed(0x1f6)](_0x230155)&&(_0x350e42[_0x2f2d55]=_0x230155[_0x5883ed(0x1f7)]());}saveConfig(_0x2b163e,_0x5883ed(0x1ad),JSON[_0x5883ed(0x18c)](_0x350e42));}else return _0x35d638[_0x5883ed(0x1e1)]['returnErrMsg'](_0xeeec7a,_0xeeec7a['__'](_0x5883ed(0x1a3)));}_0x56cf4b&&saveConfig(_0x2b163e,_0x5883ed(0x1e8),JSON['stringify'](_0x56cf4b));_0x299845&&saveConfig(_0x2b163e,_0x5883ed(0x17a),JSON['stringify'](_0x299845));if(_0x138cd4){if(forbiddenPorts[_0x5883ed(0x15b)](parseInt(_0x138cd4)))return _0x35d638['app'][_0x5883ed(0x180)](_0xeeec7a,_0xeeec7a['__']('setting.portInvalid')+_0x5883ed(0x1dd));saveConfig(_0x2b163e,_0x5883ed(0x17b),parseInt(_0x138cd4));}if(_0x434e4d){if(forbiddenPorts['includes'](parseInt(_0x434e4d))||_0x434e4d==_0x138cd4)return _0x35d638['app'][_0x5883ed(0x180)](_0xeeec7a,_0xeeec7a['__'](_0x5883ed(0x1d2))+_0x5883ed(0x1ff));saveConfig(_0x2b163e,_0x5883ed(0x249),parseInt(_0x434e4d));}_0x35d638['body'][_0x5883ed(0x159)]&&saveConfig(_0x2b163e,_0x5883ed(0x159),_0x35d638[_0x5883ed(0x163)][_0x5883ed(0x159)]);_0x35d638['body']['ipMode']&&(saveConfig(_0x2b163e,'ipMode',_0x35d638[_0x5883ed(0x163)][_0x5883ed(0x253)]),_0x35d638[_0x5883ed(0x1e1)][_0x5883ed(0x23b)]());_0x35d638[_0x5883ed(0x163)][_0x5883ed(0x225)]&&saveConfig(_0x2b163e,'ipDetection',_0x35d638[_0x5883ed(0x163)][_0x5883ed(0x225)]);_0x35d638['body'][_0x5883ed(0x1b5)]&&saveConfig(_0x2b163e,'twoStepLogin',_0x35d638[_0x5883ed(0x163)][_0x5883ed(0x1b5)]);_0x3eee7c&&saveConfig(_0x2b163e,_0x5883ed(0x1d1),parseInt(_0x3eee7c));_0xc61224&&saveConfig(_0x2b163e,_0x5883ed(0x162),parseInt(_0xc61224));_0x5578d6&&saveConfig(_0x2b163e,_0x5883ed(0x243),parseInt(_0x5578d6));_0xcdb2d8&&saveConfig(_0x2b163e,_0x5883ed(0x1b8),_0xcdb2d8);_0x13700b&&saveConfig(_0x2b163e,_0x5883ed(0x246),_0x13700b);_0x386863&&saveConfig(_0x2b163e,_0x5883ed(0x1db),_0x386863);_0x4a3892&&saveConfig(_0x2b163e,_0x5883ed(0x1fb),_0x4a3892);let _0x850ac3=dbConfigTable[_0x5883ed(0x234)](_0x35d638[_0x5883ed(0x1e1)]['dbOther'],_0x5883ed(0x155));if(!_0x850ac3||_0x850ac3[_0x5883ed(0x1c2)]==0x0){if(_0x344aa4!='*'&&_0x3f304a!='*'){if(_0x344aa4&&_0x3f304a){if(!_0x344aa4['startsWith'](_0x5883ed(0x23c))||!_0x3f304a[_0x5883ed(0x172)](_0x5883ed(0x23c)))return _0x35d638[_0x5883ed(0x1e1)][_0x5883ed(0x180)](_0xeeec7a,_0xeeec7a['__'](_0x5883ed(0x19b)));const _0x582985=testCertAndKeyMatch(_0x3f304a,_0x344aa4);if(!_0x582985)return _0x35d638[_0x5883ed(0x1e1)][_0x5883ed(0x180)](_0xeeec7a,_0xeeec7a['__']('httpsCertError'));saveConfig(_0x2b163e,_0x5883ed(0x1b6),_0x344aa4),saveConfig(_0x2b163e,_0x5883ed(0x154),_0x3f304a);}else saveConfig(_0x2b163e,_0x5883ed(0x1b6),''),saveConfig(_0x2b163e,_0x5883ed(0x154),'');}}_0x73f086&&saveConfig(_0x2b163e,_0x5883ed(0x241),_0x73f086);_0x73f086=dbConfigTable['findByTitle'](_0x35d638[_0x5883ed(0x1e1)][_0x5883ed(0x21a)],'webDavUseApiCert');if(!_0x73f086||_0x73f086[_0x5883ed(0x1c2)]==0x0){if(_0x8f91e6!='*'&&_0x107be9!='*'){if(_0x8f91e6&&_0x107be9){if(!_0x8f91e6[_0x5883ed(0x172)](_0x5883ed(0x23c))||!_0x107be9[_0x5883ed(0x172)](_0x5883ed(0x23c)))return _0x35d638['app'][_0x5883ed(0x180)](_0xeeec7a,_0xeeec7a['__'](_0x5883ed(0x19b)));const _0x51d9bc=testCertAndKeyMatch(_0x8f91e6,_0x107be9);if(!_0x51d9bc)return _0x35d638['app'][_0x5883ed(0x180)](_0xeeec7a,_0xeeec7a['__']('httpsCertError'));saveConfig(_0x2b163e,'webDavHttpsKey',_0x8f91e6),saveConfig(_0x2b163e,_0x5883ed(0x207),_0x107be9);}else saveConfig(_0x2b163e,'webDavHttpsKey',''),saveConfig(_0x2b163e,_0x5883ed(0x207),'');}}_0x4e4932&&saveConfig(_0x2b163e,_0x5883ed(0x178),_0x4e4932);if(_0xa9961f){if(_0xa9961f>OS['cpus']()[_0x5883ed(0x158)])return _0x35d638['app']['returnErrMsg'](_0xeeec7a,_0xeeec7a['__'](_0x5883ed(0x14f))+OS[_0x5883ed(0x1e5)]()[_0x5883ed(0x158)]);saveConfig(_0x2b163e,_0x5883ed(0x24e),_0xa9961f);}return _0xeeec7a[_0x5883ed(0x23e)]({'code':0x0});}),router[_0x3c43f1(0x22c)](_0x3c43f1(0x1d9),(_0x43a728,_0x38698a,_0x102242)=>{const _0x2e246f=_0x3c43f1;if(_0x43a728['currentUser']['is_admin']!=0x1)return _0x38698a[_0x2e246f(0x23e)]({'code':0x66});let _0x5bace8=_0x43a728[_0x2e246f(0x1e1)][_0x2e246f(0x21a)],_0x4ff51f=_0x43a728['body']['aiClassesEnable'],_0x4b0d35=_0x43a728[_0x2e246f(0x163)]['aiFaceEnable'],_0xc7095b=_0x43a728[_0x2e246f(0x163)]['aiSimilarPhotoEnable'],_0x2fe0c2=_0x43a728[_0x2e246f(0x163)][_0x2e246f(0x1ec)];if(_0x4ff51f){if(_0x4ff51f==0x1){if(OS['totalmem']()/0x400/0x400/0x400<0x3)return _0x43a728['app'][_0x2e246f(0x180)](_0x38698a,_0x38698a['__']('memTooLess'));}saveConfig(_0x5bace8,_0x2e246f(0x189),_0x4ff51f);if(_0x4ff51f==0x1)process[_0x2e246f(0x1f5)]({'type':_0x2e246f(0x194)});}_0x2fe0c2&&saveConfig(_0x5bace8,'aiFaceMinPhotoCount',_0x2fe0c2);if(_0x4b0d35){if(_0x4b0d35==0x1){if(OS[_0x2e246f(0x1a7)]()/0x400/0x400/0x400<0x3)return _0x43a728[_0x2e246f(0x1e1)][_0x2e246f(0x180)](_0x38698a,_0x38698a['__'](_0x2e246f(0x223)));}saveConfig(_0x5bace8,_0x2e246f(0x19c),_0x4b0d35);if(_0x4b0d35==0x1)process['send']({'type':_0x2e246f(0x190)});}if(_0xc7095b){saveConfig(_0x5bace8,_0x2e246f(0x1ca),_0xc7095b);if(_0xc7095b==0x1)process['send']({'type':_0x2e246f(0x1d5)});}return _0x38698a['json']({'code':0x0});}),router[_0x3c43f1(0x22c)](_0x3c43f1(0x1b2),(_0x5aa139,_0x465206,_0x24878a)=>{const _0x3cd800=_0x3c43f1;if(_0x5aa139[_0x3cd800(0x1b4)][_0x3cd800(0x204)]!=0x1)return _0x465206[_0x3cd800(0x23e)]({'code':0x66});let _0x259eaa=_0x5aa139['app'][_0x3cd800(0x21a)],_0x22403f=_0x5aa139[_0x3cd800(0x163)]['customLoginTitle'],_0x19b45=_0x5aa139[_0x3cd800(0x163)][_0x3cd800(0x1f1)],_0x107896=_0x5aa139[_0x3cd800(0x163)][_0x3cd800(0x252)],_0x3040be=_0x5aa139[_0x3cd800(0x163)]['customHomeBgImage'];function _0x290ef2(_0x47f42d,_0xca99c6,_0x2ddb86){const _0x3d54e5=_0x3cd800;nasAccountUtil[_0x3d54e5(0x202)](null,_0x5aa139[_0x3d54e5(0x1e1)]['dbOther'])[_0x3d54e5(0x208)](_0x5d1146=>{const _0x256fb6=_0x3d54e5;if(_0xca99c6=='-')return saveConfig(_0x259eaa,_0x47f42d,'-'),_0x465206['json']({'code':0x0});if(!_0x5d1146)return _0x5aa139['app']['returnErrMsg'](_0x465206,_0x465206['__'](_0x256fb6(0x197)));if(fs[_0x256fb6(0x168)](_0xca99c6)){let _0x364b32=path[_0x256fb6(0x1fd)](config[_0x256fb6(0x173)],_0x256fb6(0x179));function _0x3a42a9(){const _0x4cec70=_0x256fb6;let _0x5e5a8e=path[_0x4cec70(0x1fd)](_0x364b32,_0x47f42d+'.webp');sharp(path[_0x4cec70(0x1fd)](_0xca99c6))[_0x4cec70(0x213)]({'width':_0x2ddb86,'withoutEnlargement':!![]})[_0x4cec70(0x18d)]()['webp']()[_0x4cec70(0x218)](_0x5e5a8e)[_0x4cec70(0x208)](()=>{const _0x2f0069=_0x4cec70;return saveConfig(_0x259eaa,_0x47f42d,_0x5e5a8e),_0x465206[_0x2f0069(0x23e)]({'code':0x0});})['catch'](()=>{const _0xa0a4fd=_0x4cec70;return _0x5aa139['app'][_0xa0a4fd(0x180)](_0x465206,_0x465206['__'](_0xa0a4fd(0x1e2)));});}!fs[_0x256fb6(0x168)](_0x364b32)?fs[_0x256fb6(0x1c9)](_0x364b32,{'recursive':!![]},_0x3956f1=>{const _0x15df48=_0x256fb6;if(_0x3956f1)return _0x5aa139['app'][_0x15df48(0x180)](_0x465206,_0x465206['__'](_0x15df48(0x1e2)));_0x3a42a9();}):_0x3a42a9();}else return _0x5aa139['app'][_0x256fb6(0x180)](_0x465206,_0x465206['__'](_0x256fb6(0x186))+_0xca99c6);});}_0x22403f&&nasAccountUtil[_0x3cd800(0x202)](null,_0x5aa139[_0x3cd800(0x1e1)][_0x3cd800(0x21a)])[_0x3cd800(0x208)](_0x10a01e=>{const _0x3d3fbb=_0x3cd800;if(!_0x10a01e&&_0x22403f!='-')return _0x5aa139[_0x3d3fbb(0x1e1)][_0x3d3fbb(0x180)](_0x465206,_0x465206['__']('proxy.isntVip'));return saveConfig(_0x259eaa,_0x3d3fbb(0x1ab),_0x22403f),_0x465206[_0x3d3fbb(0x23e)]({'code':0x0});}),_0x19b45&&_0x290ef2(_0x3cd800(0x1f1),_0x19b45,0xc8),_0x107896&&_0x290ef2(_0x3cd800(0x252),_0x107896,0x3e8),_0x3040be&&_0x290ef2(_0x3cd800(0x185),_0x3040be,0xf14);}),router['post']('/saveConfigMovie',(_0x52696c,_0x47c72b,_0xa9ebe7)=>{const _0x120ac0=_0x3c43f1;let _0x155fb4=_0x52696c[_0x120ac0(0x1e1)][_0x120ac0(0x21a)],_0x4ea9d3=_0x52696c[_0x120ac0(0x163)][_0x120ac0(0x1f2)],_0xa4b1a4=_0x52696c['body'][_0x120ac0(0x1b1)],_0x545e4e=_0x52696c[_0x120ac0(0x163)][_0x120ac0(0x1af)],_0xecc5ad=_0x52696c[_0x120ac0(0x163)][_0x120ac0(0x219)],_0x3ab79d=_0x52696c[_0x120ac0(0x163)][_0x120ac0(0x167)],_0x4b1aa3=_0x52696c[_0x120ac0(0x163)][_0x120ac0(0x1c5)],_0x3c523f=_0x52696c[_0x120ac0(0x163)][_0x120ac0(0x1e9)],_0x2c39b5=_0x52696c[_0x120ac0(0x163)][_0x120ac0(0x216)],_0x43d0ca=_0x52696c[_0x120ac0(0x163)][_0x120ac0(0x1a6)],_0x3c37cd=_0x52696c[_0x120ac0(0x163)][_0x120ac0(0x21c)],_0x33ce3d=_0x52696c[_0x120ac0(0x163)][_0x120ac0(0x226)],_0x41b8f8=_0x52696c['body'][_0x120ac0(0x1de)],_0x2310d0=_0x52696c[_0x120ac0(0x163)][_0x120ac0(0x212)],_0x3a44fc=_0x52696c[_0x120ac0(0x163)][_0x120ac0(0x152)],_0x161259=_0x52696c[_0x120ac0(0x163)]['movieTmdbApiKey'],_0x55ede0=_0x52696c['body'][_0x120ac0(0x20d)],_0x3489a6=_0x52696c['body'][_0x120ac0(0x1ae)],_0x365ee0=_0x52696c[_0x120ac0(0x163)][_0x120ac0(0x255)],_0x57ac07=_0x52696c[_0x120ac0(0x163)][_0x120ac0(0x18e)];if(_0x52696c[_0x120ac0(0x1b4)][_0x120ac0(0x204)]!=0x1)return _0x47c72b[_0x120ac0(0x23e)]({'code':0x66});_0x2310d0&&saveConfig(_0x155fb4,_0x120ac0(0x212),_0x2310d0);(_0x365ee0==0x1||_0x365ee0==0x0)&&saveConfig(_0x155fb4,_0x120ac0(0x255),_0x365ee0);_0x57ac07&&saveConfig(_0x155fb4,_0x120ac0(0x18e),_0x57ac07?_0x57ac07:'');_0x3a44fc!=null&&saveConfig(_0x155fb4,'movieTmdbApiUrl',_0x3a44fc?_0x3a44fc:'');_0x161259!=null&&saveConfig(_0x155fb4,_0x120ac0(0x1e0),_0x161259?_0x161259:'');_0x55ede0&&saveConfig(_0x155fb4,'movieDatabaseType',_0x55ede0);_0x41b8f8&&saveConfig(_0x155fb4,_0x120ac0(0x1de),_0x41b8f8);_0x3489a6&&saveConfig(_0x155fb4,_0x120ac0(0x1ae),_0x3489a6);let _0x3905ad=_0x52696c[_0x120ac0(0x163)][_0x120ac0(0x1b0)],_0x4605b2=_0x52696c[_0x120ac0(0x163)][_0x120ac0(0x205)],_0x3d01d4=_0x52696c[_0x120ac0(0x163)][_0x120ac0(0x195)];(_0x3905ad==0x1||_0x3905ad==0x0)&&saveConfig(_0x155fb4,_0x120ac0(0x1b0),_0x3905ad);(_0x4605b2==0x1||_0x4605b2==0x0)&&saveConfig(_0x155fb4,'movieHomeShowHistory',_0x4605b2);(_0x3d01d4==0x1||_0x3d01d4==0x0)&&saveConfig(_0x155fb4,_0x120ac0(0x195),_0x3d01d4);let _0x22e845=_0x52696c[_0x120ac0(0x163)][_0x120ac0(0x20a)];if(_0x22e845&&(_0x22e845<0x1||_0x22e845>0x33))return _0x47c72b[_0x120ac0(0x23e)]({'code':0x1,'message':_0x120ac0(0x1fa)});let _0x7491f1=[_0x120ac0(0x247),_0x120ac0(0x21d),_0x120ac0(0x22a),_0x120ac0(0x23a)];_0x3c37cd&&_0x7491f1[_0x120ac0(0x15b)](_0x3c37cd)&&saveConfig(_0x155fb4,'transcodeSpeed',_0x3c37cd);_0x3c523f&&saveConfig(_0x155fb4,_0x120ac0(0x1e9),_0x3c523f);_0x2c39b5&&saveConfig(_0x155fb4,_0x120ac0(0x216),_0x2c39b5);_0x22e845&&saveConfig(_0x155fb4,_0x120ac0(0x20a),parseInt(_0x22e845));_0x4ea9d3&&saveConfig(_0x155fb4,_0x120ac0(0x1f2),_0x4ea9d3);_0x33ce3d&&saveConfig(_0x155fb4,_0x120ac0(0x226),_0x33ce3d);_0xa4b1a4&&saveConfig(_0x155fb4,_0x120ac0(0x1b1),_0xa4b1a4);_0x545e4e&&saveConfig(_0x155fb4,'transCodeParams-CoderNameHevc',_0x545e4e);_0xecc5ad&&saveConfig(_0x155fb4,_0x120ac0(0x20b),_0xecc5ad);if(_0x3ab79d){try{_0x3ab79d=parseInt(_0x3ab79d);if(_0x3ab79d>0x1e)_0x3ab79d=0x1e;if(_0x3ab79d<0x2)_0x3ab79d=0x2;}catch(_0x39cee4){_0x3ab79d=0x5;}saveConfig(_0x155fb4,_0x120ac0(0x1d4),_0x3ab79d);}return _0x43d0ca&&(saveConfig(_0x155fb4,'subtitlePreGen',_0x43d0ca),_0x43d0ca=='1'&&process[_0x120ac0(0x1f5)]({'type':_0x120ac0(0x1cf)})),_0x4b1aa3?saveConfig(_0x155fb4,_0x120ac0(0x1c5),_0x4b1aa3):dbConfigTable[_0x120ac0(0x177)](_0x155fb4,_0x120ac0(0x1c5)),_0x47c72b['json']({'code':0x0});}),router[_0x3c43f1(0x22c)](_0x3c43f1(0x16d),(_0x34e4f6,_0x4a8e77,_0x14d21c)=>{const _0x262226=_0x3c43f1;let _0x595727=_0x34e4f6[_0x262226(0x1e1)][_0x262226(0x21a)];if(_0x34e4f6['currentUser'][_0x262226(0x204)]!=0x1)return _0x4a8e77[_0x262226(0x23e)]({'code':0x66});function _0x13eb8c(){const _0x1dd9b0=_0x262226;let _0x270358=_0x34e4f6[_0x1dd9b0(0x163)][_0x1dd9b0(0x191)]||_0x1dd9b0(0x237),_0x288739=['filename',_0x1dd9b0(0x1f4)];return _0x288739[_0x1dd9b0(0x15b)](_0x270358)&&saveConfig(_0x595727,'music-TitleType',_0x270358),_0x4a8e77[_0x1dd9b0(0x23e)]({'code':0x0});}_0x13eb8c();}),router[_0x3c43f1(0x22c)](_0x3c43f1(0x235),(_0x46584b,_0x441115,_0x2dec9f)=>{const _0x5bd488=_0x3c43f1;let _0x3261ee={};_0x3261ee['databaseFolder']=path['join'](config['userDataFolder'],'database'),_0x3261ee['imgFolder']=config[_0x5bd488(0x21e)],fs[_0x5bd488(0x21f)](_0x3261ee[_0x5bd488(0x14e)],fs[_0x5bd488(0x157)][_0x5bd488(0x170)]|fs['constants'][_0x5bd488(0x233)],_0x5cc8ee=>{const _0x2be4f8=_0x5bd488;_0x3261ee[_0x2be4f8(0x165)]=0x1;_0x5cc8ee&&(_0x3261ee['imgFolderUsable']=0x0);let _0x3f27f1=dbConfigTable[_0x2be4f8(0x234)](_0x46584b['app'][_0x2be4f8(0x21a)],_0x2be4f8(0x209));return _0x3f27f1?_0x3261ee[_0x2be4f8(0x209)]=JSON['parse'](_0x3f27f1['value']):_0x3261ee['cacheImageInfo']=![],_0x3261ee['appRootPath']=config[_0x2be4f8(0x1fe)],_0x441115[_0x2be4f8(0x23e)]({'code':0x0,'data':_0x3261ee});});}),router[_0x3c43f1(0x22c)](_0x3c43f1(0x1cc),(_0x393430,_0x29f0ff,_0x79e2a6)=>{const _0xf1b035=_0x3c43f1;if(dbUserTable[_0xf1b035(0x245)](_0x393430,_0x29f0ff)!==!![])return;if(OS[_0xf1b035(0x1b3)]()!=_0xf1b035(0x14d)&&OS['platform']()!=_0xf1b035(0x1cb))return _0x393430[_0xf1b035(0x1e1)]['returnErrMsg'](_0x29f0ff,_0x29f0ff['__'](_0xf1b035(0x231)));return process[_0xf1b035(0x1f5)]({'type':_0xf1b035(0x20f)}),_0x29f0ff[_0xf1b035(0x23e)]({'code':0x0});}),router['post'](_0x3c43f1(0x1a2),(_0x128d64,_0x5d69d9,_0x55c103)=>{const _0x33a9cd=_0x3c43f1;if(_0x128d64[_0x33a9cd(0x1b4)]['is_admin']!=0x1)return _0x5d69d9[_0x33a9cd(0x23e)]({'code':0x66});let _0x1a8e4e=path[_0x33a9cd(0x1fd)](config['cacheParentPath'],_0x33a9cd(0x174));fs[_0x33a9cd(0x1e6)](_0x1a8e4e,(_0x339a1b,_0xdf300e)=>{if(_0x339a1b)return;fs['rm'](_0x1a8e4e,{'recursive':!![]},_0x50a1db=>{const _0x2835f0=_0x2492;fs[_0x2835f0(0x1c9)](_0x1a8e4e,{'recursive':!![]},_0x241393=>{console['log'](_0x241393);});if(_0x50a1db)return fileUtil[_0x2835f0(0x211)](_0x5d69d9,_0x50a1db);return dbConfigTable[_0x2835f0(0x177)](_0x128d64[_0x2835f0(0x1e1)][_0x2835f0(0x21a)],_0x2835f0(0x209)),_0x5d69d9['json']({'code':0x0});});});let _0x118633=path[_0x33a9cd(0x1fd)](config[_0x33a9cd(0x21e)],_0x33a9cd(0x236)),_0x1f4c6d=path[_0x33a9cd(0x1fd)](config['cacheParentPath'],_0x33a9cd(0x236),_0x33a9cd(0x221));fs[_0x33a9cd(0x1e6)](_0x118633,(_0x46627b,_0x3d149b)=>{if(_0x46627b)return;fs['rm'](_0x118633,{'recursive':!![]},_0x309159=>{const _0x5afa88=_0x2492;fs[_0x5afa88(0x1c9)](_0x1f4c6d,{'recursive':!![]},_0x44c502=>{const _0x234937=_0x5afa88;console[_0x234937(0x175)](_0x44c502);});if(_0x309159)return fileUtil[_0x5afa88(0x211)](_0x5d69d9,_0x309159);});});}),router[_0x3c43f1(0x22c)]('/getSystemInfomation',(_0x16f4aa,_0x5a4017,_0x3334b8)=>{const _0x826a2d=_0x3c43f1;if(dbUserTable[_0x826a2d(0x245)](_0x16f4aa,_0x5a4017)!==!![])return;let _0x5ee59d=_0x16f4aa['body']['type'],_0x20c265=[_0x826a2d(0x250),_0x826a2d(0x24b),'baseboard',_0x826a2d(0x1bb),_0x826a2d(0x22d),'cpuTemperature',_0x826a2d(0x16b),_0x826a2d(0x1ac),_0x826a2d(0x192),_0x826a2d(0x214),_0x826a2d(0x184),_0x826a2d(0x1a4),_0x826a2d(0x200),_0x826a2d(0x1a9),'networkInterfaces',_0x826a2d(0x15a),_0x826a2d(0x187)];if(!_0x20c265[_0x826a2d(0x15b)](_0x5ee59d))return _0x16f4aa['app'][_0x826a2d(0x180)](_0x5a4017,'type\x20is\x20invalid');si[_0x5ee59d](_0x1a7d0b=>{try{return _0x5a4017['json']({'code':0x0,'data':_0x1a7d0b});}catch(_0x29e8d0){console['log']('err',_0x29e8d0);}});}),router[_0x3c43f1(0x22c)](_0x3c43f1(0x1be),(_0x47132c,_0x4c9d4f,_0x25787d)=>{const _0x1b9ab=_0x3c43f1;let _0x35c0b5=netUtils[_0x1b9ab(0x239)](_0x47132c);if(_0x35c0b5!=_0x1b9ab(0x1ce))return _0x47132c['app'][_0x1b9ab(0x180)](_0x4c9d4f,_0x4c9d4f['__'](_0x1b9ab(0x1e2)));let _0x28e1d2=_0x47132c[_0x1b9ab(0x163)]['folder'],_0x4949e6=_0x47132c['body'][_0x1b9ab(0x237)],_0x28fdca=_0x47132c[_0x1b9ab(0x163)][_0x1b9ab(0x15e)];if(!_0x28fdca)try{_0x28fdca=path[_0x1b9ab(0x1fd)](_0x28e1d2,_0x4949e6);}catch(_0x809f31){console[_0x1b9ab(0x175)](_0x809f31);}if(!_0x28fdca)return _0x47132c[_0x1b9ab(0x1e1)][_0x1b9ab(0x180)](_0x4c9d4f,_0x1b9ab(0x19e));if(dbUserTable[_0x1b9ab(0x17e)](_0x47132c,_0x4c9d4f,_0x1b9ab(0x1e4),_0x1b9ab(0x20e),'')==!![]){let _0x2d4745=_0x47132c[_0x1b9ab(0x163)][_0x1b9ab(0x151)]||'openPath';process['send']({'type':_0x1b9ab(0x161),'shellType':_0x2d4745,'path':_0x28fdca});let _0x1989e3={'code':0x0};return _0x4c9d4f[_0x1b9ab(0x23e)](_0x1989e3);}}),module['exports']=router;