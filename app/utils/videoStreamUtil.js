const _0x3b6437=_0x3c5e;(function(_0x3ee601,_0x58b196){const _0x43d883=_0x3c5e,_0x47428a=_0x3ee601();while(!![]){try{const _0x469cbb=-parseInt(_0x43d883(0x181))/0x1+parseInt(_0x43d883(0x15f))/0x2*(-parseInt(_0x43d883(0x169))/0x3)+-parseInt(_0x43d883(0x168))/0x4+parseInt(_0x43d883(0x19b))/0x5+parseInt(_0x43d883(0x17b))/0x6*(parseInt(_0x43d883(0x187))/0x7)+-parseInt(_0x43d883(0x163))/0x8*(parseInt(_0x43d883(0x18e))/0x9)+parseInt(_0x43d883(0x196))/0xa*(parseInt(_0x43d883(0x177))/0xb);if(_0x469cbb===_0x58b196)break;else _0x47428a['push'](_0x47428a['shift']());}catch(_0x373c9a){_0x47428a['push'](_0x47428a['shift']());}}}(_0x315c,0x47c40));let FFmpeg=require(_0x3b6437(0x186))[_0x3b6437(0x16b)];const dbConfigTable=require(_0x3b6437(0x173)),dbFileIndexTable=require(_0x3b6437(0x161)),transCodeUtil=require(_0x3b6437(0x17e));let videoStreamUtil={};function timeToSec(_0x5a16b5){const _0x456721=_0x3b6437;var _0x3e6ea7='',_0x56ad9d=_0x5a16b5[_0x456721(0x188)](':')[0x0],_0x33eb74=_0x5a16b5[_0x456721(0x188)](':')[0x1],_0x1d057e=_0x5a16b5['split'](':')[0x2];return _0x3e6ea7=parseFloat(_0x56ad9d*0xe10)+parseFloat(_0x33eb74*0x3c)+parseFloat(_0x1d057e),_0x3e6ea7;};videoStreamUtil[_0x3b6437(0x179)]=function(_0x4a099d){const _0x5115b4=_0x3b6437;let _0x4dc115=dbConfigTable[_0x5115b4(0x18d)](_0x4a099d,_0x5115b4(0x17a));!_0x4dc115?_0x4a099d[_0x5115b4(0x195)](_0x5115b4(0x192)+new Date()[_0x5115b4(0x18b)]()+')')[_0x5115b4(0x17c)]():_0x4a099d[_0x5115b4(0x195)](_0x5115b4(0x180)+new Date()['getTime']()+_0x5115b4(0x175))[_0x5115b4(0x17c)]();};function _0x3c5e(_0x4b616f,_0x37c2c3){const _0x315c64=_0x315c();return _0x3c5e=function(_0x3c5ed3,_0x37d902){_0x3c5ed3=_0x3c5ed3-0x15f;let _0x2f0d21=_0x315c64[_0x3c5ed3];return _0x2f0d21;},_0x3c5e(_0x4b616f,_0x37c2c3);}let lastMovieInfoUpdateTime=0x0;videoStreamUtil[_0x3b6437(0x18c)]=function(_0x3faf22,_0xe5a411,_0x18cbfa){const _0x3fe8f3=_0x3b6437;let _0x100c84=dbConfigTable[_0x3fe8f3(0x18d)](_0x3faf22,_0x3fe8f3(0x17a));if(_0x18cbfa)videoStreamUtil[_0x3fe8f3(0x18a)](_0xe5a411);else _0x100c84&&lastMovieInfoUpdateTime!=_0x100c84[_0x3fe8f3(0x190)]&&(videoStreamUtil[_0x3fe8f3(0x18a)](_0xe5a411),lastMovieInfoUpdateTime=_0x100c84[_0x3fe8f3(0x190)]);};let isParsingMovie=![];videoStreamUtil[_0x3b6437(0x18a)]=function(_0x4cf226){const _0x142e35=_0x3b6437;if(isParsingMovie)return;let _0x5f604d={};isParsingMovie=!![];let _0x2e8a76=dbFileIndexTable[_0x142e35(0x19a)](_0x4cf226,_0x142e35(0x167),_0x142e35(0x197),_0x142e35(0x194)),_0x5e81f6=[],_0x1bad63=[],_0xc55a88=[];function _0x12afc7(_0x205f8a,_0x48725d,_0x44c3e8){const _0x245de2=_0x142e35;if(_0x205f8a){if(_0x205f8a[_0x245de2(0x172)]('/')!=-0x1){let _0x43fee6=_0x205f8a[_0x245de2(0x188)]('/');for(let _0x182124 in _0x43fee6){_0x43fee6[_0x182124]&&(!_0x48725d['includes'](_0x43fee6[_0x182124]['trim']())?(_0x48725d[_0x245de2(0x165)](_0x43fee6[_0x182124][_0x245de2(0x170)]()),_0x5f604d[_0x44c3e8+_0x43fee6[_0x182124][_0x245de2(0x170)]()]=0x1):_0x5f604d[_0x44c3e8+_0x43fee6[_0x182124][_0x245de2(0x170)]()]+=0x1);}}else!_0x48725d[_0x245de2(0x16f)](_0x205f8a[_0x245de2(0x170)]())?(_0x48725d[_0x245de2(0x165)](_0x205f8a[_0x245de2(0x170)]()),_0x5f604d[_0x44c3e8+_0x205f8a[_0x245de2(0x170)]()]=0x1):_0x5f604d[_0x44c3e8+_0x205f8a['trim']()]+=0x1;}for(let _0x10d20e=0x0;_0x10d20e<_0x48725d[_0x245de2(0x189)];_0x10d20e++){const _0x22fd0c=_0x245de2(0x191)+_0x44c3e8+_0x245de2(0x16e)+_0x48725d[_0x10d20e]+'\x27,'+_0x5f604d[_0x44c3e8+_0x48725d[_0x10d20e]]+')';_0x4cf226[_0x245de2(0x195)](_0x22fd0c)[_0x245de2(0x17c)]();}}if(_0x2e8a76&&_0x2e8a76[_0x142e35(0x189)]>0x0){_0x4cf226[_0x142e35(0x195)](_0x142e35(0x193))[_0x142e35(0x17c)]();for(let _0x5107eb=0x0;_0x5107eb<_0x2e8a76[_0x142e35(0x189)];_0x5107eb++){let _0x2cc3ea=_0x2e8a76[_0x5107eb],_0x547c71=_0x2cc3ea[_0x142e35(0x18f)],_0x4121ad=_0x2cc3ea[_0x142e35(0x199)],_0x5a5c76=_0x2cc3ea[_0x142e35(0x17f)];_0x12afc7(_0x547c71,_0xc55a88,_0x142e35(0x18f)),_0x12afc7(_0x4121ad,_0x5e81f6,_0x142e35(0x199)),_0x12afc7(_0x5a5c76,_0x1bad63,_0x142e35(0x17f));}}else _0x4cf226[_0x142e35(0x195)](_0x142e35(0x182))[_0x142e35(0x17c)]();isParsingMovie=![];},videoStreamUtil['getVideoOriginalTime']=function(_0x45197f){const _0x5b2e5d=_0x3b6437;let _0x52c06d=new Date()['getTime']();if(_0x45197f&&_0x45197f[_0x5b2e5d(0x183)]&&_0x45197f['format']['tags']){let _0x2e43b0=_0x45197f[_0x5b2e5d(0x183)]['tags']['com.apple.quicktime.creationdate'],_0x38e4f4=null;_0x2e43b0&&(_0x38e4f4=_0x2e43b0,_0x52c06d=new Date(_0x38e4f4)['getTime']()),!_0x38e4f4&&_0x45197f[_0x5b2e5d(0x183)][_0x5b2e5d(0x185)]['creation_time']&&(_0x38e4f4=_0x45197f['format'][_0x5b2e5d(0x185)][_0x5b2e5d(0x166)],_0x52c06d=new Date(_0x38e4f4)[_0x5b2e5d(0x18b)]());}return _0x52c06d;},videoStreamUtil['getDurationFromStream']=function(_0x59ed61){const _0x10ae07=_0x3b6437;let _0x1a2067=_0x59ed61[_0x10ae07(0x176)];if(_0x59ed61&&_0x59ed61['format']&&_0x59ed61[_0x10ae07(0x183)][_0x10ae07(0x16a)]){let _0x495125=_0x59ed61['format'][_0x10ae07(0x16a)];if(_0x495125&&_0x495125!='N/A'&&!isNaN(_0x495125)&&_0x495125>0x0)return _0x495125;}for(let _0x930157=0x0;_0x930157<_0x1a2067[_0x10ae07(0x189)];_0x930157++){let _0x1710f0=_0x1a2067[_0x930157];if(_0x1710f0[_0x10ae07(0x16a)]&&_0x1710f0['duration']!='N/A'&&!isNaN(_0x1710f0['duration'])&&_0x1710f0[_0x10ae07(0x16a)]>0x0)return _0x1710f0[_0x10ae07(0x16a)];if(_0x1710f0[_0x10ae07(0x185)]){if(_0x1710f0[_0x10ae07(0x185)][_0x10ae07(0x174)]||_0x1710f0[_0x10ae07(0x185)][_0x10ae07(0x16a)]){let _0x189a9c=_0x1710f0[_0x10ae07(0x185)][_0x10ae07(0x174)]||_0x1710f0[_0x10ae07(0x185)][_0x10ae07(0x16a)];if(_0x189a9c[_0x10ae07(0x172)](':')!=-0x1)return timeToSec(_0x189a9c);}}}return 0x0;},videoStreamUtil[_0x3b6437(0x16d)]=function(_0x536f24){return new Promise((_0x461400,_0x392310)=>{const _0x584bea=_0x3c5e;FFmpeg(_0x536f24)[_0x584bea(0x164)]((_0x50dc74,_0x3adfbd)=>{_0x50dc74?_0x392310(_0x50dc74):_0x461400(_0x3adfbd);});});},videoStreamUtil['parseVideoWH']=function(_0x3646e0){const _0x552077=_0x3b6437;let _0x1385a7=0x0,_0x105610=0x0,_0x502e47=0x0,_0x7943f6=null;for(let _0x15093d=0x0;_0x15093d<_0x3646e0[_0x552077(0x189)];_0x15093d++){let _0x2b480b=_0x3646e0[_0x15093d];_0x2b480b[_0x552077(0x171)]==_0x552077(0x162)&&(_0x7943f6=_0x2b480b,_0x2b480b[_0x552077(0x198)]&&(_0x502e47=_0x2b480b[_0x552077(0x198)]),!_0x502e47&&(_0x2b480b[_0x552077(0x185)]&&_0x2b480b[_0x552077(0x185)][_0x552077(0x184)]&&(_0x502e47=_0x2b480b[_0x552077(0x185)][_0x552077(0x184)])));if(_0x2b480b[_0x552077(0x178)]&&_0x2b480b[_0x552077(0x17d)]){if(_0x2b480b['width']!=_0x552077(0x160)&&!isNaN(_0x2b480b['width'])&&_0x2b480b[_0x552077(0x178)]>0x0){_0x1385a7=_0x2b480b[_0x552077(0x178)],_0x105610=_0x2b480b[_0x552077(0x17d)];break;}}}if((_0x502e47==0x5a||_0x502e47==-0x5a||_0x502e47==0x10e)&&_0x1385a7&&_0x105610){let _0x3cb1f5=_0x1385a7,_0x2190d0=_0x105610;_0x1385a7=_0x2190d0,_0x105610=_0x3cb1f5;}return{'videoHeight':_0x105610,'videoWidth':_0x1385a7,'videoStream':_0x7943f6};},module[_0x3b6437(0x16c)]=videoStreamUtil;function _0x315c(){const _0x1a1466=['getVideoMeta','\x27,\x20\x27','includes','trim','codec_type','indexOf','../db/dbConfigTable','DURATION','\x20WHERE\x20title=\x27lastTimeStampMatchMovieInfo\x27','streams','130735eRVrds','width','saveLastMatchTime','lastTimeStampMatchMovieInfo','6GOPkok','run','height','./transCodeUtil','movie_regions','UPDATE\x20config\x20SET\x20value=','335189QhbRYq','DELETE\x20FROM\x20movie_keys\x20where\x201=1','format','rotate','tags','../libs/nasTrans','4043326RvlHkI','split','length','parseMovieKeys','getTime','goParseMoviesKeys','findByTitle','63UinrYz','movie_genres','value','REPLACE\x20INTO\x20\x20movie_keys(key_type,key_value,index_count)\x20VALUES(\x27','REPLACE\x20INTO\x20config(title,value)\x20values(\x27lastTimeStampMatchMovieInfo\x27,','UPDATE\x20movie_keys\x20SET\x20index_count=0\x20where\x201=1','file_index_movie','prepare','290yNEljj','movie_regions,movie_language,movie_genres','rotation','movie_language','getAllByWhere','2457975VNlEuc','10162ZQbdCK','N/A','../db/dbFileIndexTable','video','11480jWCrxz','ffprobe','push','creation_time','\x20movie_info_state=1\x20and\x20is_file=1\x20and\x20type=2','1127340WzMvdf','291IulknD','duration','FFmpeg','exports'];_0x315c=function(){return _0x1a1466;};return _0x315c();}