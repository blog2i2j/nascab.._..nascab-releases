function _0x45ba(){const _0x238d7d=['filename','37251NMAJda','directorsOriginal','directors','lastIndexOf','parseNfo','log','nfo缓存失败','actors','vote_count','.nfo','14946184wqCzkb','book','releasedate','tagline','nfoInfo.vote_average','178399VSXtym','movie_name','writeFile','exports','episode','build','18zaishu','tvshow','publisher','substring','252198HWfaZq','title','876Fegelk','getSeasonNumber','language','174eMbVEw','actorsOriginal','path','split','thumb','saveBookNfo','originalname','douban_score','enddate','episodedetails','fast-xml-parser','release_date','localtitle','movie_imdb_id','tvshow.nfo','rating','movie','regions','../utils/movieInfoTmdbApi','is_tvplay','artist','name','movie_actor_array','original_name','showtitle','year','5710456CkHlqS','plot','guestActorsOriginal','genre','parse','tag','\x20/\x20','country','creatorOriginal','customrating','tmdb_id','isbn','readFile','review','publish_date','seasonNumber','readFileSync','movie_alias','push','director','1930ZVkqPE','nfo读取失败','basename','join','imdbid','originaltitle','profile_path','saveNfoFile','actor','../utils/movieSeasonUtil','vote_average','59017qpRrwc','2625ilHsRS','languages','IMAGE_URL','existsSync','dirname','introduction','tmdbid','season','storyline','guestactors','length','creator'];_0x45ba=function(){return _0x238d7d;};return _0x45ba();}const _0x543a66=_0x4453;(function(_0x1505eb,_0x365c18){const _0x7dae88=_0x4453,_0x479233=_0x1505eb();while(!![]){try{const _0x58e9e4=-parseInt(_0x7dae88(0x17c))/0x1+-parseInt(_0x7dae88(0x186))/0x2*(parseInt(_0x7dae88(0x182))/0x3)+parseInt(_0x7dae88(0x188))/0x4*(-parseInt(_0x7dae88(0x160))/0x5)+parseInt(_0x7dae88(0x18b))/0x6*(parseInt(_0x7dae88(0x15f))/0x7)+parseInt(_0x7dae88(0x1a5))/0x8+parseInt(_0x7dae88(0x16d))/0x9*(-parseInt(_0x7dae88(0x154))/0xa)+parseInt(_0x7dae88(0x177))/0xb;if(_0x58e9e4===_0x365c18)break;else _0x479233['push'](_0x479233['shift']());}catch(_0x4bc379){_0x479233['push'](_0x479233['shift']());}}}(_0x45ba,0x7251f));function _0x4453(_0x35e17a,_0x383e1f){const _0x45bafd=_0x45ba();return _0x4453=function(_0x44536c,_0x5e2823){_0x44536c=_0x44536c-0x143;let _0x781684=_0x45bafd[_0x44536c];return _0x781684;},_0x4453(_0x35e17a,_0x383e1f);}let fs=require('fs'),path=require(_0x543a66(0x18d)),nfoUtil={},movieSeasonUtil=require(_0x543a66(0x15d));const {XMLParser,XMLBuilder}=require(_0x543a66(0x195));let movieInfoTmdbApi=require(_0x543a66(0x19d));function doParse(_0x145417,_0x41e8f7,_0x294247,_0x437e53){const _0xa035bc=_0x543a66,_0x5ef6ce=new XMLParser();function _0x3a01ae(_0x41fab7,_0x22a137){const _0x4925cc=_0x4453;function _0x2592ff(_0x2d7a68){const _0x301a92=_0x4453;if(_0x2d7a68['length']>0x0&&_0x2d7a68[0x0]instanceof Object){let _0x3a105c=[];for(let _0x3334ce in _0x2d7a68){let _0x37877c=_0x2d7a68[_0x3334ce];_0x3a105c[_0x301a92(0x152)](_0x37877c[_0x301a92(0x1a0)]||_0x37877c[_0x301a92(0x187)]);}return _0x3a105c;}else return _0x2d7a68;}if(!_0x41fab7)return'';if(_0x41fab7 instanceof Array){let _0x3e6054=_0x2592ff(_0x41fab7);return _0x3e6054?_0x3e6054[_0x4925cc(0x157)](_0x4925cc(0x146)):'';}else{if(_0x41fab7 instanceof Object){let _0x12ec6d=_0x2592ff([_0x41fab7]);return _0x12ec6d?_0x12ec6d['join'](_0x4925cc(0x146)):'';}}return _0x41fab7;}try{_0x294247['nfoFullPath']=_0x437e53;let _0x3bebdb=_0x5ef6ce['parse'](fs[_0xa035bc(0x150)](_0x437e53));_0x3bebdb[_0xa035bc(0x19b)]||_0x3bebdb[_0xa035bc(0x194)]||_0x3bebdb['tvshow']?(_0x3bebdb=_0x3bebdb['movie']||_0x3bebdb[_0xa035bc(0x194)]||_0x3bebdb[_0xa035bc(0x183)],_0x294247={..._0x294247,'movie_info_name':_0x3bebdb['showtitle']||_0x3bebdb['name']||_0x3bebdb[_0xa035bc(0x187)]||_0x3bebdb[_0xa035bc(0x159)]||_0x3bebdb[_0xa035bc(0x197)]||'','movie_alias':_0x3bebdb['sortname']||'','movie_regions':_0x3a01ae(_0x3bebdb[_0xa035bc(0x147)]),'movie_language':_0x3a01ae(_0x3bebdb[_0xa035bc(0x18a)]),'movie_imdb_id':_0x3bebdb[_0xa035bc(0x158)]||'','movie_genres':_0x3a01ae(_0x3bebdb[_0xa035bc(0x143)]),'movie_release_date':_0x3bebdb[_0xa035bc(0x179)]||'','movie_end_date':_0x3bebdb['enddate']||'','movie_douban_id':_0x3bebdb['doubanid']||'','movie_storyline':_0x3bebdb[_0xa035bc(0x1a6)]||_0x3bebdb['biography']||_0x3bebdb[_0xa035bc(0x14d)]||'','movie_douban_score':_0x3bebdb[_0xa035bc(0x192)]||_0x3bebdb['rating']||_0x3bebdb[_0xa035bc(0x149)]||0x0,'movie_year':_0x3bebdb[_0xa035bc(0x1a4)]||'','tagline':_0x3bebdb[_0xa035bc(0x17a)]||'','movie_actor':_0x3a01ae(_0x3bebdb[_0xa035bc(0x15c)]),'movie_creator':_0x3a01ae(_0x3bebdb[_0xa035bc(0x16b)]),'movie_director':_0x3a01ae(_0x3bebdb[_0xa035bc(0x153)]),'movie_tags':_0x3a01ae(_0x3bebdb[_0xa035bc(0x145)]),'season_number':_0x3bebdb['season']||'','episode_number':_0x3bebdb['episode']||''},_0x3bebdb[_0xa035bc(0x15c)]instanceof Array&&_0x3bebdb[_0xa035bc(0x15c)][_0xa035bc(0x16a)]>0x0&&(_0x3bebdb[_0xa035bc(0x15c)][0x0]instanceof Object&&(_0x294247[_0xa035bc(0x1a1)]=_0x3bebdb[_0xa035bc(0x15c)])),_0x3bebdb[_0xa035bc(0x153)]instanceof Array&&_0x3bebdb[_0xa035bc(0x153)][_0xa035bc(0x16a)]>0x0&&(_0x3bebdb['director'][0x0]instanceof Object&&(_0x294247['movie_director_array']=_0x3bebdb[_0xa035bc(0x153)])),_0x145417(_0x294247)):_0x41e8f7();}catch(_0x197261){_0x41e8f7(_0x197261);}}nfoUtil[_0x543a66(0x171)]=function(_0x2e833d,_0x54a143,_0xf8ac89){return new Promise((_0x31fb1e,_0x353219)=>{const _0x5cf63a=_0x4453;let _0x50321b=_0x2e833d[_0x5cf63a(0x16c)];if(_0x54a143){let {name:_0x6491bc}=path[_0x5cf63a(0x144)](_0x50321b);_0x50321b=_0x6491bc;}let _0x39e647,_0x4e6b6c;if(_0x2e833d[_0x5cf63a(0x19e)]==0x1&&!_0xf8ac89){_0x39e647=path[_0x5cf63a(0x157)](_0x2e833d['path'],_0x5cf63a(0x199)),_0x4e6b6c=fs[_0x5cf63a(0x163)](_0x39e647);let _0x252017=path['basename'](_0x2e833d['path']),_0x2e327b=movieSeasonUtil[_0x5cf63a(0x189)](_0x252017);_0x2e327b>0x0&&(_0x2e833d[_0x5cf63a(0x14f)]=_0x2e327b,_0x39e647=path['join'](_0x2e833d[_0x5cf63a(0x18d)],'season.nfo'),_0x4e6b6c=fs[_0x5cf63a(0x163)](_0x39e647),!_0x4e6b6c&&(_0x39e647=path[_0x5cf63a(0x157)](path[_0x5cf63a(0x164)](_0x2e833d[_0x5cf63a(0x18d)]),_0x5cf63a(0x199)),_0x4e6b6c=fs['existsSync'](_0x39e647)));}else _0x39e647=path[_0x5cf63a(0x157)](_0x2e833d[_0x5cf63a(0x18d)],_0x50321b+_0x5cf63a(0x176)),_0x4e6b6c=fs['existsSync'](_0x39e647);if(!_0x4e6b6c)return _0x353219();doParse(_0x31fb1e,_0x353219,_0x2e833d,_0x39e647);});},nfoUtil['parseNfoTvSeries']=function(_0x19a432){return new Promise((_0x38ba1d,_0x4b0be4)=>{const _0x5b87bc=_0x4453;let _0x1fff7b,_0x547b55;if(_0x19a432[_0x5b87bc(0x19e)]==0x1){let _0x466544=path[_0x5b87bc(0x156)](_0x19a432[_0x5b87bc(0x18d)]),_0x5a28d5=movieSeasonUtil[_0x5b87bc(0x189)](_0x466544);_0x5a28d5>0x0&&(_0x1fff7b=path[_0x5b87bc(0x157)](path[_0x5b87bc(0x164)](_0x19a432[_0x5b87bc(0x18d)]),_0x5b87bc(0x199)),_0x547b55=fs['existsSync'](_0x1fff7b)),!_0x547b55&&(_0x1fff7b=path[_0x5b87bc(0x157)](_0x19a432[_0x5b87bc(0x18d)],_0x5b87bc(0x199)),_0x547b55=fs[_0x5b87bc(0x163)](_0x1fff7b));}if(!_0x547b55)return _0x4b0be4();doParse(_0x38ba1d,_0x4b0be4,_0x19a432,_0x1fff7b);});},nfoUtil[_0x543a66(0x15b)]=function(_0x4f708b,_0x276272,_0x1eb48d='movie'){return new Promise((_0x7afecf,_0x59b321)=>{const _0x144059=_0x4453;try{let _0x16706f={'title':_0x4f708b[_0x144059(0x17d)]||'','name':_0x4f708b[_0x144059(0x17d)]||'','sortname':_0x4f708b[_0x144059(0x151)]||'','tmdbid':_0x4f708b[_0x144059(0x14a)]||'','imdbid':_0x4f708b[_0x144059(0x198)]||'','releasedate':_0x4f708b[_0x144059(0x196)]||'','enddate':_0x4f708b[_0x144059(0x193)]||'','biography':_0x4f708b[_0x144059(0x168)]||'','year':_0x4f708b[_0x144059(0x1a4)]||''};_0x16706f[_0x144059(0x18a)]=_0x4f708b[_0x144059(0x161)]?_0x4f708b['languages'][_0x144059(0x18e)]('/'):[],_0x16706f[_0x144059(0x147)]=_0x4f708b[_0x144059(0x19c)]?_0x4f708b[_0x144059(0x19c)][_0x144059(0x18e)]('/'):[],_0x16706f['genre']=_0x4f708b['genres']?_0x4f708b['genres'][_0x144059(0x18e)]('/'):[];if(_0x4f708b[_0x144059(0x18c)]&&_0x4f708b[_0x144059(0x18c)][_0x144059(0x16a)]>0x0){_0x16706f[_0x144059(0x15c)]=[];for(let _0x57e933 of _0x4f708b[_0x144059(0x18c)]){let _0x2836c0={};_0x57e933['name']&&(_0x2836c0[_0x144059(0x1a0)]=_0x57e933[_0x144059(0x1a0)]),_0x57e933[_0x144059(0x1a2)]&&(_0x2836c0[_0x144059(0x191)]=_0x57e933[_0x144059(0x1a2)]),_0x57e933[_0x144059(0x15a)]&&(_0x2836c0['thumb']=movieInfoTmdbApi['IMAGE_URL']+_0x57e933['profile_path']),_0x57e933['id']&&(_0x2836c0[_0x144059(0x166)]=_0x57e933['id']),_0x16706f['actor'][_0x144059(0x152)](_0x2836c0);}}else _0x16706f[_0x144059(0x15c)]=_0x4f708b[_0x144059(0x174)]?_0x4f708b[_0x144059(0x174)]['split']('/'):[];if(_0x4f708b[_0x144059(0x16e)]&&_0x4f708b['directorsOriginal'][_0x144059(0x16a)]>0x0){_0x16706f['director']=[];for(let _0x5515c2 of _0x4f708b['directorsOriginal']){let _0x4833a6={};_0x5515c2[_0x144059(0x1a0)]&&(_0x4833a6['name']=_0x5515c2['name']),_0x5515c2['original_name']&&(_0x4833a6[_0x144059(0x191)]=_0x5515c2['original_name']),_0x5515c2['profile_path']&&(_0x4833a6[_0x144059(0x18f)]=movieInfoTmdbApi['IMAGE_URL']+_0x5515c2[_0x144059(0x15a)]),_0x5515c2['id']&&(_0x4833a6[_0x144059(0x166)]=_0x5515c2['id']),_0x16706f[_0x144059(0x153)][_0x144059(0x152)](_0x4833a6);}}else _0x16706f[_0x144059(0x153)]=_0x4f708b['directors']?_0x4f708b[_0x144059(0x16f)][_0x144059(0x18e)]('/'):[];if(_0x4f708b['creatorOriginal']&&_0x4f708b['creatorOriginal'][_0x144059(0x16a)]>0x0){_0x16706f['creator']=[];for(let _0x21a228 of _0x4f708b[_0x144059(0x148)]){let _0x59b954={};_0x21a228[_0x144059(0x1a0)]&&(_0x59b954[_0x144059(0x1a0)]=_0x21a228[_0x144059(0x1a0)]),_0x21a228['original_name']&&(_0x59b954['originalname']=_0x21a228[_0x144059(0x1a2)]),_0x21a228[_0x144059(0x15a)]&&(_0x59b954[_0x144059(0x18f)]=movieInfoTmdbApi[_0x144059(0x162)]+_0x21a228['profile_path']),_0x21a228['id']&&(_0x59b954[_0x144059(0x166)]=_0x21a228['id']),_0x16706f[_0x144059(0x16b)][_0x144059(0x152)](_0x59b954);}}else _0x16706f['creator']=_0x4f708b[_0x144059(0x16b)]?_0x4f708b[_0x144059(0x16b)][_0x144059(0x18e)]('/'):[];if(_0x4f708b[_0x144059(0x1a7)]&&_0x4f708b[_0x144059(0x1a7)][_0x144059(0x16a)]>0x0){_0x16706f[_0x144059(0x169)]=[];for(let _0x14fe41 of _0x4f708b[_0x144059(0x1a7)]){let _0x3944fc={};_0x14fe41[_0x144059(0x1a0)]&&(_0x3944fc[_0x144059(0x1a0)]=_0x14fe41['name']),_0x14fe41[_0x144059(0x1a2)]&&(_0x3944fc[_0x144059(0x191)]=_0x14fe41[_0x144059(0x1a2)]),_0x14fe41[_0x144059(0x15a)]&&(_0x3944fc[_0x144059(0x18f)]=movieInfoTmdbApi[_0x144059(0x162)]+_0x14fe41[_0x144059(0x15a)]),_0x14fe41['id']&&(_0x3944fc[_0x144059(0x166)]=_0x14fe41['id']),_0x16706f[_0x144059(0x169)][_0x144059(0x152)](_0x3944fc);}}else _0x16706f[_0x144059(0x169)]=_0x4f708b[_0x144059(0x169)]?_0x4f708b[_0x144059(0x169)][_0x144059(0x18e)]('/'):[];_0x4f708b[_0x144059(0x180)]&&(_0x16706f[_0x144059(0x180)]=_0x4f708b[_0x144059(0x180)]);_0x4f708b['season']&&(_0x16706f[_0x144059(0x167)]=_0x4f708b[_0x144059(0x167)]);_0x4f708b[_0x144059(0x1a3)]&&(_0x16706f[_0x144059(0x1a3)]=_0x4f708b[_0x144059(0x1a3)]);_0x4f708b['cover_url']&&(_0x16706f[_0x144059(0x18f)]=_0x4f708b['cover_url']);console['log'](_0x144059(0x17b),_0x4f708b[_0x144059(0x15e)]);_0x4f708b[_0x144059(0x15e)]&&(_0x16706f[_0x144059(0x19a)]=_0x4f708b[_0x144059(0x15e)]);_0x4f708b['tagline']&&(_0x16706f[_0x144059(0x17a)]=_0x4f708b[_0x144059(0x17a)]);_0x4f708b[_0x144059(0x175)]&&(_0x16706f[_0x144059(0x175)]=_0x4f708b[_0x144059(0x175)]);const _0x199108=new XMLBuilder();let _0x67fcae={};_0x67fcae[_0x1eb48d]=_0x16706f;const _0x37ff60=_0x199108[_0x144059(0x181)](_0x67fcae);fs[_0x144059(0x17e)](_0x276272,_0x37ff60,_0x472843=>{_0x7afecf();});}catch(_0x5eba43){console[_0x144059(0x172)](_0x144059(0x173),_0x276272,_0x5eba43),_0x7afecf();}});},nfoUtil[_0x543a66(0x190)]=function(_0x5f2211,_0x2cb9e7){return new Promise((_0x222d38,_0x58b26c)=>{const _0x2d8f64=_0x4453;try{let _0x58ae90={'title':_0x5f2211['title']?_0x5f2211['title']:'','publish_date':_0x5f2211['publish_date']?_0x5f2211['publish_date']:'','year':_0x5f2211[_0x2d8f64(0x1a4)]?_0x5f2211[_0x2d8f64(0x1a4)]:'','isbn':_0x5f2211['isbn']?_0x5f2211[_0x2d8f64(0x14b)]:''};_0x58ae90[_0x2d8f64(0x18a)]=_0x5f2211[_0x2d8f64(0x18a)]?_0x5f2211[_0x2d8f64(0x18a)]:'',_0x58ae90[_0x2d8f64(0x143)]=_0x5f2211[_0x2d8f64(0x143)]?_0x5f2211['genre']:'',_0x58ae90['tag']=_0x5f2211[_0x2d8f64(0x145)]?_0x5f2211['tag']:'',_0x58ae90[_0x2d8f64(0x184)]=_0x5f2211[_0x2d8f64(0x184)]?_0x5f2211[_0x2d8f64(0x184)]:'',_0x58ae90[_0x2d8f64(0x19f)]=_0x5f2211[_0x2d8f64(0x19f)]?_0x5f2211[_0x2d8f64(0x19f)]:'',_0x58ae90[_0x2d8f64(0x165)]=_0x5f2211[_0x2d8f64(0x165)]?_0x5f2211[_0x2d8f64(0x165)]:'';const _0x361fc3=new XMLBuilder(),_0x3f7b34=_0x361fc3[_0x2d8f64(0x181)]({'book':_0x58ae90});fs[_0x2d8f64(0x17e)](_0x2cb9e7,_0x3f7b34,_0x308d60=>{_0x222d38();});}catch(_0x54f6ff){console['log'](_0x2d8f64(0x173),_0x2cb9e7,_0x54f6ff),_0x58b26c();}});},nfoUtil['restoreBookNfo']=function(_0xc6a7bc){return new Promise((_0x2fe16a,_0x3dae60)=>{const _0x152966=_0x4453;try{let _0x47b38c=path[_0x152966(0x157)](_0xc6a7bc[_0x152966(0x18d)],_0xc6a7bc[_0x152966(0x16c)]),_0x3e77b9=_0x47b38c[_0x152966(0x185)](0x0,_0x47b38c[_0x152966(0x170)]('.'))+_0x152966(0x176);const _0x2e4344=require('fs'),_0x26af73=new XMLParser();_0x2e4344['stat'](_0x3e77b9,(_0x160d22,_0x43a5e0)=>{const _0x5a06d5=_0x152966;if(_0x160d22)return _0x3dae60();_0x2e4344[_0x5a06d5(0x14c)](_0x3e77b9,(_0x50bbf2,_0x5398a7)=>{const _0x353710=_0x5a06d5;if(_0x50bbf2)return _0x3dae60();let _0x32a2ac=_0x26af73[_0x353710(0x144)](_0x5398a7);if(_0x32a2ac['book']){let _0x446058=_0x32a2ac[_0x353710(0x178)];_0x446058[_0x353710(0x187)]&&(_0xc6a7bc[_0x353710(0x187)]=_0x446058[_0x353710(0x187)]),_0x446058['year']&&(_0xc6a7bc['year']=_0x446058[_0x353710(0x1a4)]),_0x446058[_0x353710(0x14e)]&&(_0xc6a7bc[_0x353710(0x14e)]=_0x446058[_0x353710(0x14e)]),_0x446058['isbn']&&(_0xc6a7bc['isbn']=_0x446058[_0x353710(0x14b)]),_0x446058[_0x353710(0x18a)]&&(_0xc6a7bc[_0x353710(0x18a)]=_0x446058['language']),_0x446058[_0x353710(0x145)]&&(_0xc6a7bc['tag']=_0x446058['tag']),_0x446058[_0x353710(0x184)]&&(_0xc6a7bc['publisher']=_0x446058[_0x353710(0x184)]),_0x446058['artist']&&(_0xc6a7bc[_0x353710(0x19f)]=_0x446058['artist']),_0x446058['introduction']&&(_0xc6a7bc['introduction']=_0x446058['introduction']);}_0x2fe16a(_0xc6a7bc);});});}catch(_0x17c045){console[_0x152966(0x172)](_0x152966(0x155),_0x17c045),_0x3dae60();}});},module[_0x543a66(0x17f)]=nfoUtil;