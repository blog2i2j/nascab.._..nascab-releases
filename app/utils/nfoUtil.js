const _0xdaeb33=_0x2f43;(function(_0x46328c,_0x309abd){const _0x1a8017=_0x2f43,_0x584aeb=_0x46328c();while(!![]){try{const _0x3e976f=-parseInt(_0x1a8017(0x155))/0x1+-parseInt(_0x1a8017(0x138))/0x2+-parseInt(_0x1a8017(0x111))/0x3+parseInt(_0x1a8017(0x13b))/0x4+-parseInt(_0x1a8017(0x15f))/0x5*(-parseInt(_0x1a8017(0x157))/0x6)+parseInt(_0x1a8017(0x110))/0x7+parseInt(_0x1a8017(0x11c))/0x8*(parseInt(_0x1a8017(0x13d))/0x9);if(_0x3e976f===_0x309abd)break;else _0x584aeb['push'](_0x584aeb['shift']());}catch(_0x566309){_0x584aeb['push'](_0x584aeb['shift']());}}}(_0x3b61,0x649ac));let fs=require('fs'),path=require(_0xdaeb33(0x171)),nfoUtil={},movieSeasonUtil=require(_0xdaeb33(0x141));function _0x3b61(){const _0x793879=['movie_alias','tvshow','country','log','dirname','838812vkUhex','nfoFullPath','is_tvplay','2547792btlYHq','existsSync','4959MqpAzR','genres','actor','isbn','../utils/movieSeasonUtil','episodedetails','vote_count','saveBookNfo','readFile','original_name','fast-xml-parser','vote_average','movie_name','stat','thumb','movie','originaltitle','tmdbid','review','seasonNumber','substring','nfo缓存失败','push','name','556404hwsriu','parseNfoTvSeries','17592NtgBdi','artist','movie_director_array','season','biography','build','genre','title','465JrUEow','book','year','directors','creator','filename','languages','episode','introduction','release_date','sortname','join','director','tag','rating','imdbid','.nfo','directorsOriginal','path','localtitle','guestActorsOriginal','readFileSync','tvshow.nfo','regions','getSeasonNumber','2950129xsgWyU','943677uNwZhA','actorsOriginal','guestactors','showtitle','lastIndexOf','nfo读取失败','length','nfoInfo.vote_average','restoreBookNfo','parseNfo','../utils/movieInfoTmdbApi','5392nIGdLN','movie_actor_array','cover_url','basename','IMAGE_URL','originalname','doubanid','creatorOriginal','parse','releasedate','movie_imdb_id','split','publisher','language','saveNfoFile','tagline','exports','writeFile','publish_date','season.nfo','profile_path','\x20/\x20','storyline'];_0x3b61=function(){return _0x793879;};return _0x3b61();}const {XMLParser,XMLBuilder}=require(_0xdaeb33(0x147));function _0x2f43(_0x42d4c6,_0x5e7ab1){const _0x3b61de=_0x3b61();return _0x2f43=function(_0x2f4333,_0x5d28a8){_0x2f4333=_0x2f4333-0x10a;let _0xc97b76=_0x3b61de[_0x2f4333];return _0xc97b76;},_0x2f43(_0x42d4c6,_0x5e7ab1);}let movieInfoTmdbApi=require(_0xdaeb33(0x11b));function doParse(_0x516f23,_0xf57c65,_0x16212a,_0x58dc74){const _0x1ab317=_0xdaeb33,_0x4ce8d5=new XMLParser();function _0x3926cd(_0x386fea,_0x27bfef){const _0xeba52e=_0x2f43;function _0x5ebcf6(_0x27aefc){const _0xca77a3=_0x2f43;if(_0x27aefc['length']>0x0&&_0x27aefc[0x0]instanceof Object){let _0x337f4b=[];for(let _0xac0cae in _0x27aefc){let _0x5053e2=_0x27aefc[_0xac0cae];_0x337f4b[_0xca77a3(0x153)](_0x5053e2[_0xca77a3(0x154)]||_0x5053e2[_0xca77a3(0x15e)]);}return _0x337f4b;}else return _0x27aefc;}if(!_0x386fea)return'';if(_0x386fea instanceof Array){let _0x719da3=_0x5ebcf6(_0x386fea);return _0x719da3?_0x719da3[_0xeba52e(0x16a)](_0xeba52e(0x131)):'';}else{if(_0x386fea instanceof Object){let _0x33827d=_0x5ebcf6([_0x386fea]);return _0x33827d?_0x33827d['join'](_0xeba52e(0x131)):'';}}return _0x386fea;}try{_0x16212a[_0x1ab317(0x139)]=_0x58dc74;let _0xa3e658=_0x4ce8d5[_0x1ab317(0x124)](fs[_0x1ab317(0x10c)](_0x58dc74));_0xa3e658[_0x1ab317(0x14c)]||_0xa3e658[_0x1ab317(0x142)]||_0xa3e658['tvshow']?(_0xa3e658=_0xa3e658['movie']||_0xa3e658[_0x1ab317(0x142)]||_0xa3e658[_0x1ab317(0x134)],_0x16212a={..._0x16212a,'movie_info_name':_0xa3e658['showtitle']||_0xa3e658[_0x1ab317(0x154)]||_0xa3e658[_0x1ab317(0x15e)]||_0xa3e658[_0x1ab317(0x14d)]||_0xa3e658[_0x1ab317(0x10a)]||'','movie_alias':_0xa3e658[_0x1ab317(0x169)]||'','movie_regions':_0x3926cd(_0xa3e658[_0x1ab317(0x135)]),'movie_language':_0x3926cd(_0xa3e658[_0x1ab317(0x129)]),'movie_imdb_id':_0xa3e658[_0x1ab317(0x16e)]||'','movie_genres':_0x3926cd(_0xa3e658['genre']),'movie_release_date':_0xa3e658[_0x1ab317(0x125)]||'','movie_end_date':_0xa3e658['enddate']||'','movie_douban_id':_0xa3e658[_0x1ab317(0x122)]||'','movie_storyline':_0xa3e658['plot']||_0xa3e658[_0x1ab317(0x15b)]||_0xa3e658[_0x1ab317(0x14f)]||'','movie_douban_score':_0xa3e658['douban_score']||_0xa3e658[_0x1ab317(0x16d)]||_0xa3e658['customrating']||0x0,'movie_year':_0xa3e658[_0x1ab317(0x161)]||'','tagline':_0xa3e658[_0x1ab317(0x12b)]||'','movie_actor':_0x3926cd(_0xa3e658[_0x1ab317(0x13f)]),'movie_creator':_0x3926cd(_0xa3e658[_0x1ab317(0x163)]),'movie_director':_0x3926cd(_0xa3e658['director']),'movie_tags':_0x3926cd(_0xa3e658[_0x1ab317(0x16c)]),'season_number':_0xa3e658[_0x1ab317(0x15a)]||'','episode_number':_0xa3e658[_0x1ab317(0x166)]||''},_0xa3e658['actor']instanceof Array&&_0xa3e658[_0x1ab317(0x13f)][_0x1ab317(0x117)]>0x0&&(_0xa3e658[_0x1ab317(0x13f)][0x0]instanceof Object&&(_0x16212a[_0x1ab317(0x11d)]=_0xa3e658[_0x1ab317(0x13f)])),_0xa3e658[_0x1ab317(0x16b)]instanceof Array&&_0xa3e658[_0x1ab317(0x16b)][_0x1ab317(0x117)]>0x0&&(_0xa3e658[_0x1ab317(0x16b)][0x0]instanceof Object&&(_0x16212a[_0x1ab317(0x159)]=_0xa3e658[_0x1ab317(0x16b)])),_0x516f23(_0x16212a)):_0xf57c65();}catch(_0x3529f3){_0xf57c65(_0x3529f3);}}nfoUtil[_0xdaeb33(0x11a)]=function(_0x3de1d3,_0x5d8eb9,_0x44ab06){return new Promise((_0x9094fe,_0x4a9e98)=>{const _0x2d6580=_0x2f43;let _0x7a5822=_0x3de1d3[_0x2d6580(0x164)];if(_0x5d8eb9){let {name:_0x554dd1}=path[_0x2d6580(0x124)](_0x7a5822);_0x7a5822=_0x554dd1;}let _0x3324cc,_0xbdd4c;if(_0x3de1d3[_0x2d6580(0x13a)]==0x1&&!_0x44ab06){_0x3324cc=path[_0x2d6580(0x16a)](_0x3de1d3[_0x2d6580(0x171)],_0x2d6580(0x10d)),_0xbdd4c=fs['existsSync'](_0x3324cc);let _0x388c53=path[_0x2d6580(0x11f)](_0x3de1d3[_0x2d6580(0x171)]),_0x5e8a02=movieSeasonUtil[_0x2d6580(0x10f)](_0x388c53);_0x5e8a02>0x0&&(_0x3de1d3[_0x2d6580(0x150)]=_0x5e8a02,_0x3324cc=path['join'](_0x3de1d3[_0x2d6580(0x171)],_0x2d6580(0x12f)),_0xbdd4c=fs[_0x2d6580(0x13c)](_0x3324cc),!_0xbdd4c&&(_0x3324cc=path['join'](path[_0x2d6580(0x137)](_0x3de1d3['path']),_0x2d6580(0x10d)),_0xbdd4c=fs[_0x2d6580(0x13c)](_0x3324cc)));}else _0x3324cc=path[_0x2d6580(0x16a)](_0x3de1d3[_0x2d6580(0x171)],_0x7a5822+_0x2d6580(0x16f)),_0xbdd4c=fs[_0x2d6580(0x13c)](_0x3324cc);if(!_0xbdd4c)return _0x4a9e98();doParse(_0x9094fe,_0x4a9e98,_0x3de1d3,_0x3324cc);});},nfoUtil[_0xdaeb33(0x156)]=function(_0x159850){return new Promise((_0x238591,_0x18d543)=>{const _0x4b2fb0=_0x2f43;let _0x5d162f,_0xfb76b9;if(_0x159850['is_tvplay']==0x1){let _0x26fe9c=path['basename'](_0x159850[_0x4b2fb0(0x171)]),_0x7e17f9=movieSeasonUtil[_0x4b2fb0(0x10f)](_0x26fe9c);_0x7e17f9>0x0&&(_0x5d162f=path[_0x4b2fb0(0x16a)](path[_0x4b2fb0(0x137)](_0x159850[_0x4b2fb0(0x171)]),_0x4b2fb0(0x10d)),_0xfb76b9=fs[_0x4b2fb0(0x13c)](_0x5d162f)),!_0xfb76b9&&(_0x5d162f=path[_0x4b2fb0(0x16a)](_0x159850[_0x4b2fb0(0x171)],_0x4b2fb0(0x10d)),_0xfb76b9=fs[_0x4b2fb0(0x13c)](_0x5d162f));}if(!_0xfb76b9)return _0x18d543();doParse(_0x238591,_0x18d543,_0x159850,_0x5d162f);});},nfoUtil[_0xdaeb33(0x12a)]=function(_0x201c46,_0x3340c2,_0x3d02d5='movie'){return new Promise((_0x1622d2,_0x7bb2fd)=>{const _0x11b449=_0x2f43;try{let _0x288782={'title':_0x201c46[_0x11b449(0x149)]||'','name':_0x201c46[_0x11b449(0x149)]||'','sortname':_0x201c46[_0x11b449(0x133)]||'','tmdbid':_0x201c46['tmdb_id']||'','imdbid':_0x201c46[_0x11b449(0x126)]||'','releasedate':_0x201c46[_0x11b449(0x168)]||'','enddate':_0x201c46['enddate']||'','biography':_0x201c46[_0x11b449(0x132)]||'','year':_0x201c46[_0x11b449(0x161)]||''};_0x288782[_0x11b449(0x129)]=_0x201c46[_0x11b449(0x165)]?_0x201c46[_0x11b449(0x165)][_0x11b449(0x127)]('/'):[],_0x288782[_0x11b449(0x135)]=_0x201c46[_0x11b449(0x10e)]?_0x201c46[_0x11b449(0x10e)][_0x11b449(0x127)]('/'):[],_0x288782[_0x11b449(0x15d)]=_0x201c46[_0x11b449(0x13e)]?_0x201c46[_0x11b449(0x13e)][_0x11b449(0x127)]('/'):[];if(_0x201c46['actorsOriginal']&&_0x201c46['actorsOriginal'][_0x11b449(0x117)]>0x0){_0x288782[_0x11b449(0x13f)]=[];for(let _0x49b46c of _0x201c46[_0x11b449(0x112)]){let _0x2ccaf6={};_0x49b46c['name']&&(_0x2ccaf6['name']=_0x49b46c[_0x11b449(0x154)]),_0x49b46c['original_name']&&(_0x2ccaf6[_0x11b449(0x121)]=_0x49b46c[_0x11b449(0x146)]),_0x49b46c[_0x11b449(0x130)]&&(_0x2ccaf6[_0x11b449(0x14b)]=movieInfoTmdbApi['IMAGE_URL']+_0x49b46c[_0x11b449(0x130)]),_0x49b46c['id']&&(_0x2ccaf6[_0x11b449(0x14e)]=_0x49b46c['id']),_0x288782[_0x11b449(0x13f)][_0x11b449(0x153)](_0x2ccaf6);}}else _0x288782[_0x11b449(0x13f)]=_0x201c46['actors']?_0x201c46['actors'][_0x11b449(0x127)]('/'):[];if(_0x201c46[_0x11b449(0x170)]&&_0x201c46[_0x11b449(0x170)]['length']>0x0){_0x288782[_0x11b449(0x16b)]=[];for(let _0x389e92 of _0x201c46[_0x11b449(0x170)]){let _0x107e5a={};_0x389e92[_0x11b449(0x154)]&&(_0x107e5a[_0x11b449(0x154)]=_0x389e92[_0x11b449(0x154)]),_0x389e92[_0x11b449(0x146)]&&(_0x107e5a[_0x11b449(0x121)]=_0x389e92[_0x11b449(0x146)]),_0x389e92['profile_path']&&(_0x107e5a[_0x11b449(0x14b)]=movieInfoTmdbApi[_0x11b449(0x120)]+_0x389e92[_0x11b449(0x130)]),_0x389e92['id']&&(_0x107e5a[_0x11b449(0x14e)]=_0x389e92['id']),_0x288782['director'][_0x11b449(0x153)](_0x107e5a);}}else _0x288782[_0x11b449(0x16b)]=_0x201c46[_0x11b449(0x162)]?_0x201c46[_0x11b449(0x162)][_0x11b449(0x127)]('/'):[];if(_0x201c46[_0x11b449(0x123)]&&_0x201c46[_0x11b449(0x123)][_0x11b449(0x117)]>0x0){_0x288782[_0x11b449(0x163)]=[];for(let _0x4981e1 of _0x201c46[_0x11b449(0x123)]){let _0x584ac7={};_0x4981e1[_0x11b449(0x154)]&&(_0x584ac7[_0x11b449(0x154)]=_0x4981e1[_0x11b449(0x154)]),_0x4981e1[_0x11b449(0x146)]&&(_0x584ac7[_0x11b449(0x121)]=_0x4981e1[_0x11b449(0x146)]),_0x4981e1[_0x11b449(0x130)]&&(_0x584ac7[_0x11b449(0x14b)]=movieInfoTmdbApi[_0x11b449(0x120)]+_0x4981e1['profile_path']),_0x4981e1['id']&&(_0x584ac7[_0x11b449(0x14e)]=_0x4981e1['id']),_0x288782[_0x11b449(0x163)][_0x11b449(0x153)](_0x584ac7);}}else _0x288782[_0x11b449(0x163)]=_0x201c46['creator']?_0x201c46['creator']['split']('/'):[];if(_0x201c46[_0x11b449(0x10b)]&&_0x201c46[_0x11b449(0x10b)]['length']>0x0){_0x288782[_0x11b449(0x113)]=[];for(let _0x246735 of _0x201c46['guestActorsOriginal']){let _0x45c573={};_0x246735[_0x11b449(0x154)]&&(_0x45c573[_0x11b449(0x154)]=_0x246735[_0x11b449(0x154)]),_0x246735[_0x11b449(0x146)]&&(_0x45c573[_0x11b449(0x121)]=_0x246735[_0x11b449(0x146)]),_0x246735[_0x11b449(0x130)]&&(_0x45c573[_0x11b449(0x14b)]=movieInfoTmdbApi['IMAGE_URL']+_0x246735[_0x11b449(0x130)]),_0x246735['id']&&(_0x45c573[_0x11b449(0x14e)]=_0x246735['id']),_0x288782[_0x11b449(0x113)]['push'](_0x45c573);}}else _0x288782[_0x11b449(0x113)]=_0x201c46[_0x11b449(0x113)]?_0x201c46[_0x11b449(0x113)][_0x11b449(0x127)]('/'):[];_0x201c46[_0x11b449(0x166)]&&(_0x288782[_0x11b449(0x166)]=_0x201c46[_0x11b449(0x166)]);_0x201c46['season']&&(_0x288782['season']=_0x201c46[_0x11b449(0x15a)]);_0x201c46[_0x11b449(0x114)]&&(_0x288782['showtitle']=_0x201c46['showtitle']);_0x201c46[_0x11b449(0x11e)]&&(_0x288782['thumb']=_0x201c46['cover_url']);console[_0x11b449(0x136)](_0x11b449(0x118),_0x201c46[_0x11b449(0x148)]);_0x201c46['vote_average']&&(_0x288782[_0x11b449(0x16d)]=_0x201c46[_0x11b449(0x148)]);_0x201c46[_0x11b449(0x12b)]&&(_0x288782[_0x11b449(0x12b)]=_0x201c46[_0x11b449(0x12b)]);_0x201c46[_0x11b449(0x143)]&&(_0x288782[_0x11b449(0x143)]=_0x201c46[_0x11b449(0x143)]);const _0x32c80b=new XMLBuilder();let _0x2657ad={};_0x2657ad[_0x3d02d5]=_0x288782;const _0xb33640=_0x32c80b[_0x11b449(0x15c)](_0x2657ad);fs[_0x11b449(0x12d)](_0x3340c2,_0xb33640,_0x12802e=>{_0x1622d2();});}catch(_0x577b8e){console[_0x11b449(0x136)]('nfo缓存失败',_0x3340c2,_0x577b8e),_0x1622d2();}});},nfoUtil[_0xdaeb33(0x144)]=function(_0x3ca76c,_0x7c66e9){return new Promise((_0x10c60a,_0x33e3a9)=>{const _0x34b5e2=_0x2f43;try{let _0x24f5eb={'title':_0x3ca76c[_0x34b5e2(0x15e)]?_0x3ca76c[_0x34b5e2(0x15e)]:'','publish_date':_0x3ca76c[_0x34b5e2(0x12e)]?_0x3ca76c[_0x34b5e2(0x12e)]:'','year':_0x3ca76c[_0x34b5e2(0x161)]?_0x3ca76c[_0x34b5e2(0x161)]:'','isbn':_0x3ca76c['isbn']?_0x3ca76c[_0x34b5e2(0x140)]:''};_0x24f5eb[_0x34b5e2(0x129)]=_0x3ca76c['language']?_0x3ca76c[_0x34b5e2(0x129)]:'',_0x24f5eb['genre']=_0x3ca76c['genre']?_0x3ca76c[_0x34b5e2(0x15d)]:'',_0x24f5eb[_0x34b5e2(0x16c)]=_0x3ca76c['tag']?_0x3ca76c[_0x34b5e2(0x16c)]:'',_0x24f5eb['publisher']=_0x3ca76c[_0x34b5e2(0x128)]?_0x3ca76c[_0x34b5e2(0x128)]:'',_0x24f5eb[_0x34b5e2(0x158)]=_0x3ca76c[_0x34b5e2(0x158)]?_0x3ca76c['artist']:'',_0x24f5eb[_0x34b5e2(0x167)]=_0x3ca76c['introduction']?_0x3ca76c[_0x34b5e2(0x167)]:'';const _0x4068f3=new XMLBuilder(),_0x5d0639=_0x4068f3[_0x34b5e2(0x15c)]({'book':_0x24f5eb});fs[_0x34b5e2(0x12d)](_0x7c66e9,_0x5d0639,_0x441424=>{_0x10c60a();});}catch(_0x1b65e2){console[_0x34b5e2(0x136)](_0x34b5e2(0x152),_0x7c66e9,_0x1b65e2),_0x33e3a9();}});},nfoUtil[_0xdaeb33(0x119)]=function(_0x5df048){return new Promise((_0x3a94ae,_0x3c550d)=>{const _0x24099d=_0x2f43;try{let _0xe2b3b6=path['join'](_0x5df048[_0x24099d(0x171)],_0x5df048['filename']),_0xd6da68=_0xe2b3b6[_0x24099d(0x151)](0x0,_0xe2b3b6[_0x24099d(0x115)]('.'))+_0x24099d(0x16f);const _0x459a78=require('fs'),_0xbe42d=new XMLParser();_0x459a78[_0x24099d(0x14a)](_0xd6da68,(_0x13f393,_0x2ca973)=>{const _0x373541=_0x24099d;if(_0x13f393)return _0x3c550d();_0x459a78[_0x373541(0x145)](_0xd6da68,(_0x226eff,_0x48f8fe)=>{const _0x5167bc=_0x373541;if(_0x226eff)return _0x3c550d();let _0x27849e=_0xbe42d[_0x5167bc(0x124)](_0x48f8fe);if(_0x27849e[_0x5167bc(0x160)]){let _0xd8eb38=_0x27849e[_0x5167bc(0x160)];_0xd8eb38[_0x5167bc(0x15e)]&&(_0x5df048[_0x5167bc(0x15e)]=_0xd8eb38['title']),_0xd8eb38[_0x5167bc(0x161)]&&(_0x5df048[_0x5167bc(0x161)]=_0xd8eb38[_0x5167bc(0x161)]),_0xd8eb38['publish_date']&&(_0x5df048[_0x5167bc(0x12e)]=_0xd8eb38[_0x5167bc(0x12e)]),_0xd8eb38[_0x5167bc(0x140)]&&(_0x5df048[_0x5167bc(0x140)]=_0xd8eb38['isbn']),_0xd8eb38[_0x5167bc(0x129)]&&(_0x5df048['language']=_0xd8eb38[_0x5167bc(0x129)]),_0xd8eb38[_0x5167bc(0x16c)]&&(_0x5df048[_0x5167bc(0x16c)]=_0xd8eb38[_0x5167bc(0x16c)]),_0xd8eb38[_0x5167bc(0x128)]&&(_0x5df048[_0x5167bc(0x128)]=_0xd8eb38[_0x5167bc(0x128)]),_0xd8eb38[_0x5167bc(0x158)]&&(_0x5df048['artist']=_0xd8eb38[_0x5167bc(0x158)]),_0xd8eb38[_0x5167bc(0x167)]&&(_0x5df048[_0x5167bc(0x167)]=_0xd8eb38['introduction']);}_0x3a94ae(_0x5df048);});});}catch(_0x3ca235){console[_0x24099d(0x136)](_0x24099d(0x116),_0x3ca235),_0x3c550d();}});},module[_0xdaeb33(0x12c)]=nfoUtil;