const _0x257fbe=_0x2f1c;(function(_0x18b5e2,_0x2dd6d1){const _0xbf1eba=_0x2f1c,_0xbb2b80=_0x18b5e2();while(!![]){try{const _0x59ebae=parseInt(_0xbf1eba(0x1e6))/0x1+-parseInt(_0xbf1eba(0x1f5))/0x2+parseInt(_0xbf1eba(0x1ef))/0x3*(-parseInt(_0xbf1eba(0x1f8))/0x4)+parseInt(_0xbf1eba(0x1fd))/0x5+parseInt(_0xbf1eba(0x1e2))/0x6+-parseInt(_0xbf1eba(0x1f1))/0x7*(parseInt(_0xbf1eba(0x201))/0x8)+parseInt(_0xbf1eba(0x1ed))/0x9;if(_0x59ebae===_0x2dd6d1)break;else _0xbb2b80['push'](_0xbb2b80['shift']());}catch(_0x12be17){_0xbb2b80['push'](_0xbb2b80['shift']());}}}(_0x1e93,0xd9068));let musicUtil={},fs=require('fs'),path=require(_0x257fbe(0x1df)),dbMusicIndexTable=require('../db/dbMusicIndexTable'),jschardet=require(_0x257fbe(0x1fa)),iconv=require('iconv-lite'),pinyin=require('node-pinyin'),letterList=['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'];function _0x2f1c(_0x4f6d06,_0x3044b9){const _0x1e9363=_0x1e93();return _0x2f1c=function(_0x2f1cec,_0x50790f){_0x2f1cec=_0x2f1cec-0x1dc;let _0x75f4f9=_0x1e9363[_0x2f1cec];return _0x75f4f9;},_0x2f1c(_0x4f6d06,_0x3044b9);}musicUtil['getMusicSameNameCover']=function(_0x72dd3d,_0x316492){const _0x59edd6=_0x257fbe;try{let _0x129d0b=_0x316492[_0x59edd6(0x1e4)]['replace'](path[_0x59edd6(0x1ea)](_0x316492['filename']),''),_0x135570=path[_0x59edd6(0x1f7)](_0x316492[_0x59edd6(0x1df)],_0x129d0b+'.jpeg'),_0x220c67=path[_0x59edd6(0x1f7)](_0x316492['path'],_0x129d0b+_0x59edd6(0x1fe)),_0x3fc6b2=path[_0x59edd6(0x1f7)](_0x316492[_0x59edd6(0x1df)],_0x129d0b+_0x59edd6(0x1e8)),_0x2639e2='';if(fs[_0x59edd6(0x1ec)](_0x3fc6b2))_0x2639e2=_0x3fc6b2;else{if(fs[_0x59edd6(0x1ec)](_0x135570))_0x2639e2=_0x135570;else fs[_0x59edd6(0x1ec)](_0x220c67)&&(_0x2639e2=_0x220c67);}return _0x72dd3d&&_0x2639e2&&_0x316492['id']&&(_0x2639e2!=_0x316492[_0x59edd6(0x1de)]&&(console[_0x59edd6(0x1f4)](_0x59edd6(0x1ee)),dbMusicIndexTable[_0x59edd6(0x1f9)](_0x72dd3d,_0x316492['id'],_0x59edd6(0x1de),_0x2639e2))),_0x2639e2;}catch(_0x1cfb1f){return console[_0x59edd6(0x1f4)](_0x1cfb1f),'';}},musicUtil['transStringToUtf8']=function(_0x37d4c7){const _0x5763fc=_0x257fbe;if(!_0x37d4c7)return _0x37d4c7;try{let _0x26ce2e=jschardet['detect'](_0x37d4c7);if(_0x26ce2e&&_0x26ce2e[_0x5763fc(0x1e7)]&&!_0x26ce2e[_0x5763fc(0x1e7)][_0x5763fc(0x1fb)]()[_0x5763fc(0x1f3)]('utf')&&!_0x26ce2e[_0x5763fc(0x1e7)]['toLowerCase']()[_0x5763fc(0x1f3)](_0x5763fc(0x1f6))){let _0x2daa53=iconv['decode'](_0x37d4c7,_0x26ce2e['encoding']);return _0x2daa53;}else return _0x37d4c7;}catch(_0x554909){return console[_0x5763fc(0x1f4)](_0x554909),_0x37d4c7;}},musicUtil[_0x257fbe(0x1f2)]=function(_0xee1a59){const _0x7b6944=_0x257fbe;let _0x9a6140=_0x7b6944(0x1e1),_0x57c64d=_0xee1a59['prepare'](_0x9a6140)[_0x7b6944(0x1e0)]();for(let _0x5103f9 in _0x57c64d){musicUtil[_0x7b6944(0x1ff)](_0xee1a59,_0x57c64d[_0x5103f9]);}};function isChinese(_0x3e27d1){var _0x2e9559=/[^\\u4e00-\\u9fa5]/;return _0x2e9559['test'](_0x3e27d1);}musicUtil[_0x257fbe(0x1ff)]=function(_0x44a64a,_0x1eb383){const _0x114e82=_0x257fbe;function _0x4c4521(_0x1051ba){const _0x1c8924=_0x2f1c;if(_0x1051ba&&_0x1051ba[_0x1c8924(0x1f0)]>0x0){let _0x4db4f2=_0x1051ba[0x0];if(letterList[_0x1c8924(0x1e5)](_0x4db4f2))return _0x4db4f2;else{if(isChinese(_0x4db4f2)){let _0xd679bc=pinyin(_0x4db4f2,{'style':'initials'});return _0xd679bc&&_0xd679bc['length']>0x0&&_0xd679bc[0x0][_0x1c8924(0x1f0)]>0x0&&_0xd679bc[0x0][0x0][_0x1c8924(0x1f0)]>0x0?_0xd679bc[0x0][0x0][0x0]:'#';}else return'#';}}else return'#';}let _0x5e848e=_0x4c4521(_0x1eb383[_0x114e82(0x1e4)]?_0x1eb383['filename']['toUpperCase']():'')[_0x114e82(0x1fc)](),_0x47b2cf=_0x4c4521(_0x1eb383[_0x114e82(0x1eb)]?_0x1eb383['artist']['toUpperCase']():'')[_0x114e82(0x1fc)](),_0x1d672c=_0x4c4521(_0x1eb383[_0x114e82(0x1e9)]?_0x1eb383['album']['toUpperCase']():'')[_0x114e82(0x1fc)](),_0x335326=_0x4c4521(_0x1eb383[_0x114e82(0x1dc)]?_0x1eb383['title'][_0x114e82(0x1fc)]():'')['toUpperCase']();_0x44a64a[_0x114e82(0x1dd)](_0x114e82(0x200))[_0x114e82(0x1e3)](_0x5e848e,_0x47b2cf,_0x1d672c,_0x335326,_0x1eb383['id']);},module['exports']=musicUtil;function _0x1e93(){const _0x44986a=['run','filename','includes','678370VgmqxQ','encoding','.png','album','extname','artist','existsSync','12750183tBFNmo','更新file_cover_path','2679weIbKP','length','9709RlucKP','dealFirstLetterAll','startsWith','log','2001170MWRucV','ascii','join','3136eYKpRh','updateByFiled','jschardet','toLowerCase','toUpperCase','3325715oSDGEs','.jpg','dealFirstLetterSingle','UPDATE\x20file_index_music\x20set\x20filename_fl=?,artist_fl=?,album_fl=?,title_fl=?\x20where\x20id=?','2776arjXnI','title','prepare','file_cover_path','path','all','SELECT\x20id,filename,artist,album,title\x20FROM\x20file_index_music\x20WHERE\x20filename_fl\x20is\x20null','1864332yImFBA'];_0x1e93=function(){return _0x44986a;};return _0x1e93();}