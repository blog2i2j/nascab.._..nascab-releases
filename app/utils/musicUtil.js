const _0x1c688a=_0x5c2a;function _0x5094(){const _0x6856e1=['initials','run','artist','detect','dealFirstLetterSingle','existsSync','709928MtlHUQ','all','test','toLowerCase','node-pinyin','1938566JmMEbn','path','jschardet','.jpg','startsWith','.jpeg','updateByFiled','getMusicSameNameCover','decode','iconv-lite','.png','extname','236880wIJwjN','title','dealFirstLetterAll','prepare','log','5173704dyjVbR','includes','album','更新file_cover_path','6aZugPM','exports','encoding','filename','file_cover_path','160647sbcFiF','utf','toUpperCase','4kLHvXm','join','length','2928294OPxVLo','2675025rNhZVm'];_0x5094=function(){return _0x6856e1;};return _0x5094();}(function(_0x476f00,_0x34b542){const _0x2e15b2=_0x5c2a,_0x259eb5=_0x476f00();while(!![]){try{const _0x4770d6=parseInt(_0x2e15b2(0x1d6))/0x1+-parseInt(_0x2e15b2(0x1e7))/0x2+parseInt(_0x2e15b2(0x1c8))/0x3*(-parseInt(_0x2e15b2(0x1cb))/0x4)+parseInt(_0x2e15b2(0x1cf))/0x5+-parseInt(_0x2e15b2(0x1c3))/0x6*(-parseInt(_0x2e15b2(0x1db))/0x7)+-parseInt(_0x2e15b2(0x1ec))/0x8+-parseInt(_0x2e15b2(0x1ce))/0x9;if(_0x4770d6===_0x34b542)break;else _0x259eb5['push'](_0x259eb5['shift']());}catch(_0x4f74e1){_0x259eb5['push'](_0x259eb5['shift']());}}}(_0x5094,0x5c3cb));let musicUtil={},fs=require('fs'),path=require(_0x1c688a(0x1dc)),dbMusicIndexTable=require('../db/dbMusicIndexTable'),jschardet=require(_0x1c688a(0x1dd)),iconv=require(_0x1c688a(0x1e4)),pinyin=require(_0x1c688a(0x1da)),letterList=['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'];musicUtil[_0x1c688a(0x1e2)]=function(_0x13812d,_0x429258){const _0x197cc9=_0x1c688a;try{let _0x3de8c4=_0x429258[_0x197cc9(0x1c6)]['replace'](path[_0x197cc9(0x1e6)](_0x429258[_0x197cc9(0x1c6)]),''),_0x31c937=path[_0x197cc9(0x1cc)](_0x429258['path'],_0x3de8c4+_0x197cc9(0x1e0)),_0x28ff5a=path[_0x197cc9(0x1cc)](_0x429258['path'],_0x3de8c4+_0x197cc9(0x1de)),_0x1b3ab5=path[_0x197cc9(0x1cc)](_0x429258[_0x197cc9(0x1dc)],_0x3de8c4+_0x197cc9(0x1e5)),_0xb1d2dc='';if(fs['existsSync'](_0x1b3ab5))_0xb1d2dc=_0x1b3ab5;else{if(fs[_0x197cc9(0x1d5)](_0x31c937))_0xb1d2dc=_0x31c937;else fs[_0x197cc9(0x1d5)](_0x28ff5a)&&(_0xb1d2dc=_0x28ff5a);}return _0x13812d&&_0xb1d2dc&&_0x429258['id']&&(_0xb1d2dc!=_0x429258[_0x197cc9(0x1c7)]&&(console[_0x197cc9(0x1eb)](_0x197cc9(0x1c2)),dbMusicIndexTable[_0x197cc9(0x1e1)](_0x13812d,_0x429258['id'],_0x197cc9(0x1c7),_0xb1d2dc))),_0xb1d2dc;}catch(_0x1ae866){return console[_0x197cc9(0x1eb)](_0x1ae866),'';}},musicUtil['transStringToUtf8']=function(_0x15c130){const _0x4a849c=_0x1c688a;if(!_0x15c130)return _0x15c130;try{let _0x3c755e=jschardet[_0x4a849c(0x1d3)](_0x15c130);if(_0x3c755e&&_0x3c755e[_0x4a849c(0x1c5)]&&!_0x3c755e[_0x4a849c(0x1c5)]['toLowerCase']()[_0x4a849c(0x1df)](_0x4a849c(0x1c9))&&!_0x3c755e[_0x4a849c(0x1c5)][_0x4a849c(0x1d9)]()[_0x4a849c(0x1df)]('ascii')){let _0x119ec2=iconv[_0x4a849c(0x1e3)](_0x15c130,_0x3c755e['encoding']);return _0x119ec2;}else return _0x15c130;}catch(_0x5c65fd){return console[_0x4a849c(0x1eb)](_0x5c65fd),_0x15c130;}},musicUtil[_0x1c688a(0x1e9)]=function(_0x1cb0fd){const _0x21cbb0=_0x1c688a;let _0x21c846='SELECT\x20id,filename,artist,album,title\x20FROM\x20file_index_music\x20WHERE\x20filename_fl\x20is\x20null',_0x4f5a42=_0x1cb0fd[_0x21cbb0(0x1ea)](_0x21c846)[_0x21cbb0(0x1d7)]();for(let _0x27a615 in _0x4f5a42){musicUtil['dealFirstLetterSingle'](_0x1cb0fd,_0x4f5a42[_0x27a615]);}};function _0x5c2a(_0x143b1c,_0x3a28de){const _0x5094b6=_0x5094();return _0x5c2a=function(_0x5c2a0b,_0x594a40){_0x5c2a0b=_0x5c2a0b-0x1c1;let _0x5239ec=_0x5094b6[_0x5c2a0b];return _0x5239ec;},_0x5c2a(_0x143b1c,_0x3a28de);}function isChinese(_0x2b5cfe){const _0x3eacf1=_0x1c688a;var _0x2b7463=/[^\\u4e00-\\u9fa5]/;return _0x2b7463[_0x3eacf1(0x1d8)](_0x2b5cfe);}musicUtil[_0x1c688a(0x1d4)]=function(_0x212c40,_0x5df95f){const _0xb269cd=_0x1c688a;function _0x23401b(_0x47515a){const _0x1a044e=_0x5c2a;if(_0x47515a&&_0x47515a['length']>0x0){let _0x530bb4=_0x47515a[0x0];if(letterList[_0x1a044e(0x1ed)](_0x530bb4))return _0x530bb4;else{if(isChinese(_0x530bb4)){let _0x296083=pinyin(_0x530bb4,{'style':_0x1a044e(0x1d0)});return _0x296083&&_0x296083[_0x1a044e(0x1cd)]>0x0&&_0x296083[0x0]['length']>0x0&&_0x296083[0x0][0x0][_0x1a044e(0x1cd)]>0x0?_0x296083[0x0][0x0][0x0]:'#';}else return'#';}}else return'#';}let _0x3f5ba1=_0x23401b(_0x5df95f[_0xb269cd(0x1c6)]?_0x5df95f['filename'][_0xb269cd(0x1ca)]():'')['toUpperCase'](),_0x2371bd=_0x23401b(_0x5df95f[_0xb269cd(0x1d2)]?_0x5df95f[_0xb269cd(0x1d2)][_0xb269cd(0x1ca)]():'')['toUpperCase'](),_0x2bdd1b=_0x23401b(_0x5df95f[_0xb269cd(0x1c1)]?_0x5df95f[_0xb269cd(0x1c1)][_0xb269cd(0x1ca)]():'')[_0xb269cd(0x1ca)](),_0x40d0f1=_0x23401b(_0x5df95f[_0xb269cd(0x1e8)]?_0x5df95f['title'][_0xb269cd(0x1ca)]():'')[_0xb269cd(0x1ca)]();_0x212c40[_0xb269cd(0x1ea)]('UPDATE\x20file_index_music\x20set\x20filename_fl=?,artist_fl=?,album_fl=?,title_fl=?\x20where\x20id=?')[_0xb269cd(0x1d1)](_0x3f5ba1,_0x2371bd,_0x2bdd1b,_0x40d0f1,_0x5df95f['id']);},module[_0x1c688a(0x1c4)]=musicUtil;