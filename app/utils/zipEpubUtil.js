function _0x249c(){const _0x3df656=['../','1410OKuoHO','getEpubImageList','extname','src','manifest','document','getFile','317975JwjRUC','href','end','sharp','未找到epub清单文件','toLowerCase','push','189554otYsRu','epub','querySelectorAll','12fyEdjc','exports','jsdom','flow','73089vIjoPC','3084018iteQQK','replaceAll','17577rUkiFU','hasOwnProperty','getEpubFile','getAttribute','endsWith','10980981kQUqtn','window','112MRIVdx','path','1JnCdwv','1495630ZKHVFr'];_0x249c=function(){return _0x3df656;};return _0x249c();}const _0x22df0e=_0x5596;(function(_0x499643,_0x626e4b){const _0x188255=_0x5596,_0x44b733=_0x499643();while(!![]){try{const _0x489c2d=parseInt(_0x188255(0x1bb))/0x1*(parseInt(_0x188255(0x1cc))/0x2)+-parseInt(_0x188255(0x1d4))/0x3+parseInt(_0x188255(0x1cf))/0x4*(-parseInt(_0x188255(0x1c5))/0x5)+parseInt(_0x188255(0x1be))/0x6*(parseInt(_0x188255(0x1d6))/0x7)+parseInt(_0x188255(0x1b9))/0x8*(parseInt(_0x188255(0x1d3))/0x9)+parseInt(_0x188255(0x1bc))/0xa+parseInt(_0x188255(0x1db))/0xb;if(_0x489c2d===_0x626e4b)break;else _0x44b733['push'](_0x44b733['shift']());}catch(_0x9d726d){_0x44b733['push'](_0x44b733['shift']());}}}(_0x249c,0xb1a2f));const path=require(_0x22df0e(0x1ba));let zipEpubUtil={};const sharp=require(_0x22df0e(0x1c8)),fs=require('fs'),config=require('../myConfig/config'),EPub=require(_0x22df0e(0x1cd)),{JSDOM}=require(_0x22df0e(0x1d1));function _0x5596(_0x190852,_0xd7f4ba){const _0x249c6a=_0x249c();return _0x5596=function(_0x559674,_0x4f494f){_0x559674=_0x559674-0x1b8;let _0x4ce80c=_0x249c6a[_0x559674];return _0x4ce80c;},_0x5596(_0x190852,_0xd7f4ba);}zipEpubUtil['getEpubFile']=(_0x3b028f,_0x50e07d)=>{return new Promise((_0x2ef56b,_0xe4c55f)=>{const _0x9ded81=_0x5596;_0x3b028f[_0x9ded81(0x1c4)](_0x50e07d,(_0x1f600e,_0x72b57c,_0x3e6435)=>{if(_0x1f600e)return _0x2ef56b(null);_0x2ef56b(_0x72b57c,_0x3e6435);});});},zipEpubUtil[_0x22df0e(0x1bf)]=_0x33ded7=>{return new Promise(async(_0x177bd4,_0x43e6b1)=>{const _0x140779=_0x5596;let _0x44e56a=[],_0x4f684f=new EPub(_0x33ded7);_0x4f684f['on'](_0x140779(0x1c7),async()=>{const _0xaa92d8=_0x140779;!_0x4f684f['flow']&&console['log'](_0xaa92d8(0x1c9));for(let _0x126fd6 of _0x4f684f[_0xaa92d8(0x1d2)]){if(!_0x126fd6[_0xaa92d8(0x1c6)]||!_0x126fd6['id'])continue;let _0x489c4e=path[_0xaa92d8(0x1c0)](_0x126fd6[_0xaa92d8(0x1c6)]);if(!_0x489c4e)continue;_0x489c4e=_0x489c4e[_0xaa92d8(0x1ca)]();if(_0x489c4e=='.html'){let _0x351b6f=await zipEpubUtil[_0xaa92d8(0x1d8)](_0x4f684f,_0x126fd6['id']);try{const _0x32e8a0=new JSDOM(_0x351b6f),_0x1ed8f2=_0x32e8a0[_0xaa92d8(0x1b8)][_0xaa92d8(0x1c3)],_0x3b459b=_0x1ed8f2[_0xaa92d8(0x1ce)]('img');_0x3b459b['forEach'](_0x1b8539=>{const _0x436816=_0xaa92d8;let _0xd1922b=_0x1b8539[_0x436816(0x1d9)](_0x436816(0x1c1));_0xd1922b&&(_0xd1922b=_0xd1922b[_0x436816(0x1d5)](_0x436816(0x1bd),''),_0x44e56a['push'](_0xd1922b));});}catch(_0x21e8cc){console['log'](_0x21e8cc);}}else{if(_0x489c4e=='.jpg'){let _0x4c74cb=_0x126fd6[_0xaa92d8(0x1c6)][_0xaa92d8(0x1d5)](_0xaa92d8(0x1bd),'');_0x44e56a[_0xaa92d8(0x1cb)](_0x4c74cb);}}}let _0x2e0318=[];if(_0x4f684f[_0xaa92d8(0x1c2)]&&_0x4f684f[_0xaa92d8(0x1c2)]instanceof Object)for(let _0x73eb2b of _0x44e56a){for(const _0x2b9a4e in _0x4f684f[_0xaa92d8(0x1c2)]){if(_0x4f684f[_0xaa92d8(0x1c2)][_0xaa92d8(0x1d7)](_0x2b9a4e)){let _0x43e808=_0x4f684f['manifest'][_0x2b9a4e];if(_0x43e808[_0xaa92d8(0x1c6)]&&(_0x43e808[_0xaa92d8(0x1c6)]==_0x73eb2b||_0x43e808[_0xaa92d8(0x1c6)][_0xaa92d8(0x1da)]('/'+_0x73eb2b))){_0x2e0318['push'](_0x43e808[_0xaa92d8(0x1c6)]);break;}}}}else _0x2e0318=_0x44e56a;_0x177bd4(_0x2e0318);}),_0x4f684f['parse']();});},module[_0x22df0e(0x1d0)]=zipEpubUtil;