const _0x50c216=_0x2360;(function(_0x1b259b,_0x559736){const _0x45af3e=_0x2360,_0x3699f4=_0x1b259b();while(!![]){try{const _0x2cfdad=parseInt(_0x45af3e(0x176))/0x1*(parseInt(_0x45af3e(0x177))/0x2)+parseInt(_0x45af3e(0x18a))/0x3+-parseInt(_0x45af3e(0x188))/0x4+-parseInt(_0x45af3e(0x186))/0x5+parseInt(_0x45af3e(0x195))/0x6+parseInt(_0x45af3e(0x17e))/0x7+parseInt(_0x45af3e(0x185))/0x8*(-parseInt(_0x45af3e(0x191))/0x9);if(_0x2cfdad===_0x559736)break;else _0x3699f4['push'](_0x3699f4['shift']());}catch(_0x366d2e){_0x3699f4['push'](_0x3699f4['shift']());}}}(_0x4af5,0x1e385));const path=require(_0x50c216(0x178));let zipEpubUtil={};const sharp=require(_0x50c216(0x182)),fs=require('fs'),config=require(_0x50c216(0x187)),EPub=require(_0x50c216(0x189)),{JSDOM}=require(_0x50c216(0x183));function _0x2360(_0x18ee0e,_0xe22bc5){const _0x4af5bd=_0x4af5();return _0x2360=function(_0x236098,_0x1993e8){_0x236098=_0x236098-0x174;let _0xa13675=_0x4af5bd[_0x236098];return _0xa13675;},_0x2360(_0x18ee0e,_0xe22bc5);}function _0x4af5(){const _0x2e0b87=['jsdom','log','112IWkYAn','923330oMAQxU','../myConfig/config','354108ZliAos','epub','294774MeqDQt','manifest','flow','hasOwnProperty','replaceAll','href','endsWith','68679nLguBW','document','end','getFile','1385046bXoIvn','.html','querySelectorAll','55343oBudGn','2hBkfvE','path','getAttribute','未找到epub清单文件','forEach','../','img','835562SjbuTD','push','getEpubFile','src','sharp'];_0x4af5=function(){return _0x2e0b87;};return _0x4af5();}zipEpubUtil[_0x50c216(0x180)]=(_0x3b74c5,_0x1cc196)=>{return new Promise((_0x263b6f,_0x532f9a)=>{const _0x38d294=_0x2360;_0x3b74c5[_0x38d294(0x194)](_0x1cc196,(_0x1f6f0d,_0xb32a1c,_0x271b88)=>{if(_0x1f6f0d)return _0x263b6f(null);_0x263b6f(_0xb32a1c,_0x271b88);});});},zipEpubUtil['getEpubImageList']=_0x1984c0=>{return new Promise(async(_0x9948,_0x54d45a)=>{const _0x5deba0=_0x2360;let _0xbcfd6c=[],_0x38798d=new EPub(_0x1984c0);_0x38798d['on'](_0x5deba0(0x193),async()=>{const _0x50b3b9=_0x5deba0;!_0x38798d[_0x50b3b9(0x18c)]&&console[_0x50b3b9(0x184)](_0x50b3b9(0x17a));for(let _0x28680a of _0x38798d[_0x50b3b9(0x18c)]){if(!_0x28680a['href']||!_0x28680a['id'])continue;let _0x39986d=path['extname'](_0x28680a['href']);if(!_0x39986d)continue;_0x39986d=_0x39986d['toLowerCase']();if(_0x39986d==_0x50b3b9(0x174)){let _0x347863=await zipEpubUtil[_0x50b3b9(0x180)](_0x38798d,_0x28680a['id']);try{const _0x2cf133=new JSDOM(_0x347863),_0x138404=_0x2cf133['window'][_0x50b3b9(0x192)],_0x43a71f=_0x138404[_0x50b3b9(0x175)](_0x50b3b9(0x17d));_0x43a71f[_0x50b3b9(0x17b)](_0x4e3cb8=>{const _0x566378=_0x50b3b9;let _0x8ee01b=_0x4e3cb8[_0x566378(0x179)](_0x566378(0x181));_0x8ee01b&&(_0x8ee01b=_0x8ee01b[_0x566378(0x18e)](_0x566378(0x17c),''),_0xbcfd6c[_0x566378(0x17f)](_0x8ee01b));});}catch(_0x4c9a1c){console[_0x50b3b9(0x184)](_0x4c9a1c);}}else{if(_0x39986d=='.jpg'){let _0x31e1a5=_0x28680a[_0x50b3b9(0x18f)][_0x50b3b9(0x18e)]('../','');_0xbcfd6c['push'](_0x31e1a5);}}}let _0x5c6a57=[];if(_0x38798d[_0x50b3b9(0x18b)]&&_0x38798d[_0x50b3b9(0x18b)]instanceof Object)for(let _0x386bdb of _0xbcfd6c){for(const _0x2d01bf in _0x38798d['manifest']){if(_0x38798d[_0x50b3b9(0x18b)][_0x50b3b9(0x18d)](_0x2d01bf)){let _0x52d415=_0x38798d['manifest'][_0x2d01bf];if(_0x52d415[_0x50b3b9(0x18f)]&&(_0x52d415['href']==_0x386bdb||_0x52d415['href'][_0x50b3b9(0x190)]('/'+_0x386bdb))){_0x5c6a57[_0x50b3b9(0x17f)](_0x52d415['href']);break;}}}}else _0x5c6a57=_0xbcfd6c;_0x9948(_0x5c6a57);}),_0x38798d['parse']();});},module['exports']=zipEpubUtil;