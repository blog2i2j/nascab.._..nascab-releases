const _0x122c03=_0x3653;function _0x3653(_0x36385b,_0x584f6b){const _0x31100d=_0x3110();return _0x3653=function(_0x3653e6,_0x3e66c1){_0x3653e6=_0x3653e6-0xcc;let _0x178a11=_0x31100d[_0x3653e6];return _0x178a11;},_0x3653(_0x36385b,_0x584f6b);}(function(_0x30a6b9,_0x318e20){const _0x1f187c=_0x3653,_0x59fa78=_0x30a6b9();while(!![]){try{const _0x306b3e=-parseInt(_0x1f187c(0xd3))/0x1+parseInt(_0x1f187c(0xe7))/0x2+-parseInt(_0x1f187c(0xd6))/0x3+-parseInt(_0x1f187c(0xd8))/0x4*(parseInt(_0x1f187c(0xcd))/0x5)+parseInt(_0x1f187c(0xd4))/0x6*(-parseInt(_0x1f187c(0xef))/0x7)+parseInt(_0x1f187c(0xd9))/0x8*(parseInt(_0x1f187c(0xce))/0x9)+-parseInt(_0x1f187c(0xe8))/0xa*(-parseInt(_0x1f187c(0xcc))/0xb);if(_0x306b3e===_0x318e20)break;else _0x59fa78['push'](_0x59fa78['shift']());}catch(_0x2710b7){_0x59fa78['push'](_0x59fa78['shift']());}}}(_0x3110,0x6ffc9));const path=require('path');function _0x3110(){const _0x25a6db=['未找到epub清单文件','forEach','../','parse','648686LFhSNU','22485670ZGNKBD','end','extname','img','href','exports','log','4079159UVpzTf','push','11JWrWNG','50zJWlCz','9KYLFPw','flow','window','getEpubImageList','sharp','401146gVmFfF','6QCksRf','../myConfig/config','1428897uJphIB','getEpubFile','288232oOSGqO','532392FavvGX','endsWith','getAttribute','getFile','toLowerCase','epub','.html','querySelectorAll','src','manifest'];_0x3110=function(){return _0x25a6db;};return _0x3110();}let zipEpubUtil={};const sharp=require(_0x122c03(0xd2)),fs=require('fs'),config=require(_0x122c03(0xd5)),EPub=require(_0x122c03(0xde)),{JSDOM}=require('jsdom');zipEpubUtil[_0x122c03(0xd7)]=(_0x231593,_0x3021f6)=>{return new Promise((_0x4bfdf4,_0x5c9f94)=>{const _0x6ca3b5=_0x3653;_0x231593[_0x6ca3b5(0xdc)](_0x3021f6,(_0x27b550,_0x594a2b,_0x12ba0d)=>{if(_0x27b550)return _0x4bfdf4(null);_0x4bfdf4(_0x594a2b,_0x12ba0d);});});},zipEpubUtil[_0x122c03(0xd1)]=_0xc52b18=>{return new Promise(async(_0x32cf7b,_0x207607)=>{const _0x562ef9=_0x3653;let _0x31abae=[],_0x26e3ba=new EPub(_0xc52b18);_0x26e3ba['on'](_0x562ef9(0xe9),async()=>{const _0x5abfb5=_0x562ef9;!_0x26e3ba[_0x5abfb5(0xcf)]&&console[_0x5abfb5(0xee)](_0x5abfb5(0xe3));for(let _0xebda46 of _0x26e3ba[_0x5abfb5(0xcf)]){if(!_0xebda46['href']||!_0xebda46['id'])continue;let _0x129aa5=path[_0x5abfb5(0xea)](_0xebda46[_0x5abfb5(0xec)]);if(!_0x129aa5)continue;_0x129aa5=_0x129aa5[_0x5abfb5(0xdd)]();if(_0x129aa5==_0x5abfb5(0xdf)){let _0x5959b5=await zipEpubUtil[_0x5abfb5(0xd7)](_0x26e3ba,_0xebda46['id']);try{const _0x4a42a4=new JSDOM(_0x5959b5),_0x2ac511=_0x4a42a4[_0x5abfb5(0xd0)]['document'],_0x159aa5=_0x2ac511[_0x5abfb5(0xe0)](_0x5abfb5(0xeb));_0x159aa5[_0x5abfb5(0xe4)](_0x4f591f=>{const _0xd0ff1a=_0x5abfb5;let _0x1ef2bd=_0x4f591f[_0xd0ff1a(0xdb)](_0xd0ff1a(0xe1));_0x1ef2bd&&(_0x1ef2bd=_0x1ef2bd['replaceAll'](_0xd0ff1a(0xe5),''),_0x31abae['push'](_0x1ef2bd));});}catch(_0x30f17b){console[_0x5abfb5(0xee)](_0x30f17b);}}else{if(_0x129aa5=='.jpg'){let _0x1f3d52=_0xebda46['href']['replaceAll'](_0x5abfb5(0xe5),'');_0x31abae[_0x5abfb5(0xf0)](_0x1f3d52);}}}let _0x144101=[];if(_0x26e3ba[_0x5abfb5(0xe2)]&&_0x26e3ba[_0x5abfb5(0xe2)]instanceof Object)for(let _0x51ded0 of _0x31abae){for(const _0x5a1ec6 in _0x26e3ba[_0x5abfb5(0xe2)]){if(_0x26e3ba[_0x5abfb5(0xe2)]['hasOwnProperty'](_0x5a1ec6)){let _0x17f05f=_0x26e3ba[_0x5abfb5(0xe2)][_0x5a1ec6];if(_0x17f05f[_0x5abfb5(0xec)]&&(_0x17f05f[_0x5abfb5(0xec)]==_0x51ded0||_0x17f05f['href'][_0x5abfb5(0xda)]('/'+_0x51ded0))){_0x144101[_0x5abfb5(0xf0)](_0x17f05f[_0x5abfb5(0xec)]);break;}}}}else _0x144101=_0x31abae;_0x32cf7b(_0x144101);}),_0x26e3ba[_0x562ef9(0xe6)]();});},module[_0x122c03(0xed)]=zipEpubUtil;