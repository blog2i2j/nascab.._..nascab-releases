const _0x31aca3=_0x1649;(function(_0x48dca,_0x83648){const _0x5d899c=_0x1649,_0x834e70=_0x48dca();while(!![]){try{const _0x204b20=parseInt(_0x5d899c(0x1f7))/0x1+parseInt(_0x5d899c(0x1dc))/0x2*(parseInt(_0x5d899c(0x20a))/0x3)+parseInt(_0x5d899c(0x205))/0x4*(-parseInt(_0x5d899c(0x1fb))/0x5)+-parseInt(_0x5d899c(0x1e8))/0x6*(parseInt(_0x5d899c(0x1ee))/0x7)+parseInt(_0x5d899c(0x1ea))/0x8+parseInt(_0x5d899c(0x1eb))/0x9*(-parseInt(_0x5d899c(0x1de))/0xa)+parseInt(_0x5d899c(0x1e4))/0xb;if(_0x204b20===_0x83648)break;else _0x834e70['push'](_0x834e70['shift']());}catch(_0x45c60a){_0x834e70['push'](_0x834e70['shift']());}}}(_0x15ea,0xbc43e));let dbConfigTable=require(_0x31aca3(0x1f4)),updateUtil={};const config=require(_0x31aca3(0x1da)),Database=require('better-sqlite3'),log=require(_0x31aca3(0x1ef)),os=require('os'),dbOther=new Database(config['dbOther'],{});function _0x15ea(){const _0x1f5db1=['setFeedURL','18316KhQODO','UPDATE\x20bg_task\x20SET\x20task_state=?\x20where\x20id=?','create','getVersionFromDb','UPDATE\x20bg_task\x20SET\x20progress_current=?,progress_all=?\x20where\x20id=?\x20and\x20task_state=1','543OnIJFn','app','electron','download-progress','downloading','../myConfig/config','update-not-available','11114mhtgmj','PACKAGE_UPDATE','7880010tGMWJP','done','percent','log','run','prepare','103290uENQeq','findByTitle','exports','checkForUpdates','17562wpZVRe','status','8582248TugHVo','9qeLEaJ','Clientless\x20service\x20mode','exit','2233zZBMzs','electron-log','window-all-closed','INSERT\x20INTO\x20bg_task(task_type)\x20VALUES(?)','removeAllListeners','startUpdate','../db/dbConfigTable','darwin','./globalInfoUtil','729969THJHdI','electron-updater','error','quitAndInstall','355aujiOs','catch','lastInsertRowid','checking-for-update','upDateUrl','stringify','platform','versionInfo','value'];_0x15ea=function(){return _0x1f5db1;};return _0x15ea();}let versionInfo='',bgTaskId='',app;try{app=require(_0x31aca3(0x1d7))[_0x31aca3(0x20b)];}catch(_0x4630ce){console[_0x31aca3(0x1e1)](_0x31aca3(0x1ec));}const dbNoticeCenterTable=require('../db/dbNoticeCenterTable');function saveMsg(_0x929c84,_0xb73541,_0x205115){const _0x44a2f3=_0x31aca3;dbNoticeCenterTable[_0x44a2f3(0x207)](dbOther,{'title':_0x929c84,'level':_0xb73541,'content':_0x205115});}let {autoUpdater}=require(_0x31aca3(0x1f8));const globalInfoUtil=require(_0x31aca3(0x1f6));function saveStatus(_0xc35f54,_0x1358d2){const _0x57114c=_0x31aca3;versionInfo[_0x57114c(0x1e9)]=_0xc35f54,setVersionInfoToDb(),_0xc35f54==_0x57114c(0x1df)&&bgTaskId&&dbOther[_0x57114c(0x1e3)](_0x57114c(0x206))[_0x57114c(0x1e2)](_0x1358d2?0x2:0x3,bgTaskId);}function getVersionFromDb(){const _0x248e8f=_0x31aca3;let _0x293978=dbConfigTable[_0x248e8f(0x1e5)](dbOther,_0x248e8f(0x202));if(_0x293978)try{return _0x293978=JSON['parse'](_0x293978[_0x248e8f(0x203)]),_0x293978;}catch(_0x23105a){return console[_0x248e8f(0x1e1)](_0x248e8f(0x1f9),_0x23105a),'';}else return'';}updateUtil[_0x31aca3(0x208)]=getVersionFromDb;function _0x1649(_0x1615cb,_0x20539b){const _0x15ea4b=_0x15ea();return _0x1649=function(_0x16496f,_0x3804f5){_0x16496f=_0x16496f-0x1d7;let _0x89d5b8=_0x15ea4b[_0x16496f];return _0x89d5b8;},_0x1649(_0x1615cb,_0x20539b);}function setVersionInfoToDb(){const _0xb4dabd=_0x31aca3;let _0x11de07={'title':'versionInfo','value':JSON[_0xb4dabd(0x200)](versionInfo)};dbConfigTable[_0xb4dabd(0x207)](dbOther,_0x11de07);}updateUtil[_0x31aca3(0x1f3)]=function(){const _0x380b03=_0x31aca3;try{versionInfo=getVersionFromDb();if(!versionInfo)return;if(versionInfo[_0x380b03(0x1e9)]&&versionInfo[_0x380b03(0x1e9)]!='done')return;saveStatus('started'),autoUpdater['logger']=log,autoUpdater[_0x380b03(0x204)](versionInfo[_0x380b03(0x1ff)]),autoUpdater[_0x380b03(0x1e7)]()[_0x380b03(0x1fc)](_0x4241ec=>{const _0xc127df=_0x380b03;saveStatus(_0xc127df(0x1df),![]);}),autoUpdater['on'](_0x380b03(0x1f9),_0x50cb3d=>{const _0x559133=_0x380b03;saveStatus(_0x559133(0x1df),![]);}),autoUpdater['on'](_0x380b03(0x1fe),()=>{}),autoUpdater['on']('update-available',()=>{const _0x2221ff=_0x380b03;let _0x1c970d=dbOther[_0x2221ff(0x1e3)](_0x2221ff(0x1f1))[_0x2221ff(0x1e2)](_0x2221ff(0x1dd));bgTaskId=_0x1c970d[_0x2221ff(0x1fd)],dbOther[_0x2221ff(0x1e3)]('UPDATE\x20bg_task\x20SET\x20task_state=1\x20where\x20id='+bgTaskId)[_0x2221ff(0x1e2)]();}),autoUpdater['on'](_0x380b03(0x1db),()=>{const _0x4ce2a6=_0x380b03;saveStatus(_0x4ce2a6(0x1df),!![]);}),autoUpdater['on'](_0x380b03(0x1d8),_0x47b53d=>{const _0x5b520a=_0x380b03;saveStatus(_0x5b520a(0x1d9)),bgTaskId&&dbOther[_0x5b520a(0x1e3)](_0x5b520a(0x209))[_0x5b520a(0x1e2)](_0x47b53d[_0x5b520a(0x1e0)],0x64,bgTaskId);}),autoUpdater['on']('update-downloaded',()=>{const _0x30b8c0=_0x380b03;saveStatus('done',!![]),os[_0x30b8c0(0x201)]()==_0x30b8c0(0x1f5)?setTimeout(()=>{const _0x24f5aa=_0x30b8c0;if(app)app[_0x24f5aa(0x1f2)](_0x24f5aa(0x1f0));autoUpdater[_0x24f5aa(0x1fa)]();if(app)app[_0x24f5aa(0x1ed)]();},0x1f40):setTimeout(()=>{const _0x35f35b=_0x30b8c0;autoUpdater[_0x35f35b(0x1fa)]();},0xbb8);});}catch(_0x52e50e){console[_0x380b03(0x1e1)](_0x52e50e);}},module[_0x31aca3(0x1e6)]=updateUtil;