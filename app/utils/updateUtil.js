const _0x441f0d=_0x9d1f;(function(_0x49a684,_0x496beb){const _0xc2ada1=_0x9d1f,_0x11088c=_0x49a684();while(!![]){try{const _0xbf4c13=-parseInt(_0xc2ada1(0xbb))/0x1*(-parseInt(_0xc2ada1(0xb0))/0x2)+-parseInt(_0xc2ada1(0xbf))/0x3*(-parseInt(_0xc2ada1(0xca))/0x4)+parseInt(_0xc2ada1(0xc3))/0x5*(-parseInt(_0xc2ada1(0xc2))/0x6)+parseInt(_0xc2ada1(0xc4))/0x7*(parseInt(_0xc2ada1(0xb6))/0x8)+-parseInt(_0xc2ada1(0xd5))/0x9+-parseInt(_0xc2ada1(0xd3))/0xa*(parseInt(_0xc2ada1(0xc1))/0xb)+-parseInt(_0xc2ada1(0xb2))/0xc;if(_0xbf4c13===_0x496beb)break;else _0x11088c['push'](_0x11088c['shift']());}catch(_0x42003b){_0x11088c['push'](_0x11088c['shift']());}}}(_0x1d0d,0xb664e));let dbConfigTable=require('../db/dbConfigTable'),updateUtil={};const config=require(_0x441f0d(0xe3)),Database=require(_0x441f0d(0xc5)),log=require(_0x441f0d(0xb4)),os=require('os'),dbOther=new Database(config[_0x441f0d(0xcd)],{});let versionInfo='',bgTaskId='',app;try{app=require(_0x441f0d(0xdb))[_0x441f0d(0xda)];}catch(_0x26cca9){console[_0x441f0d(0xc7)](_0x441f0d(0xdf));}const dbNoticeCenterTable=require(_0x441f0d(0xd6));function saveMsg(_0x178bb4,_0x146697,_0x13678f){const _0x30d2ae=_0x441f0d;dbNoticeCenterTable[_0x30d2ae(0xc8)](dbOther,{'title':_0x178bb4,'level':_0x146697,'content':_0x13678f});}function _0x1d0d(){const _0x2d6c6a=['started','stringify','../myConfig/config','2364286nQcWHK','setFeedURL','8772grjChx','download-progress','electron-log','./globalInfoUtil','3231224MrPGNS','downloading','lastInsertRowid','run','versionInfo','1NUgKnW','window-all-closed','upDateUrl','error','1413069XsiWQQ','prepare','2497yullte','66msvfzx','84655evZpxS','14ueWUeu','better-sqlite3','quitAndInstall','log','create','getVersionFromDb','4QQlpCp','exports','done','dbOther','catch','darwin','logger','findByTitle','parse','57470pXvUhA','removeAllListeners','2001105CGoHnk','../db/dbNoticeCenterTable','UPDATE\x20bg_task\x20SET\x20task_state=?\x20where\x20id=?','status','update-downloaded','app','electron','INSERT\x20INTO\x20bg_task(task_type)\x20VALUES(?)','UPDATE\x20bg_task\x20SET\x20progress_current=?,progress_all=?\x20where\x20id=?\x20and\x20task_state=1','checkForUpdates','Clientless\x20service\x20mode','electron-updater'];_0x1d0d=function(){return _0x2d6c6a;};return _0x1d0d();}let {autoUpdater}=require(_0x441f0d(0xe0));const globalInfoUtil=require(_0x441f0d(0xb5));function saveStatus(_0x5a34a8,_0x5ec8ac){const _0x1aa533=_0x441f0d;versionInfo[_0x1aa533(0xd8)]=_0x5a34a8,setVersionInfoToDb(),_0x5a34a8==_0x1aa533(0xcc)&&bgTaskId&&dbOther['prepare'](_0x1aa533(0xd7))[_0x1aa533(0xb9)](_0x5ec8ac?0x2:0x3,bgTaskId);}function getVersionFromDb(){const _0xb3400b=_0x441f0d;let _0x382381=dbConfigTable[_0xb3400b(0xd1)](dbOther,_0xb3400b(0xba));if(_0x382381)try{return _0x382381=JSON[_0xb3400b(0xd2)](_0x382381['value']),_0x382381;}catch(_0x203043){return console[_0xb3400b(0xc7)](_0xb3400b(0xbe),_0x203043),'';}else return'';}updateUtil[_0x441f0d(0xc9)]=getVersionFromDb;function _0x9d1f(_0x20f762,_0x171aff){const _0x1d0d2f=_0x1d0d();return _0x9d1f=function(_0x9d1ffb,_0x1d7ce9){_0x9d1ffb=_0x9d1ffb-0xb0;let _0xe0d614=_0x1d0d2f[_0x9d1ffb];return _0xe0d614;},_0x9d1f(_0x20f762,_0x171aff);}function setVersionInfoToDb(){const _0x34e2e5=_0x441f0d;let _0x277acd={'title':_0x34e2e5(0xba),'value':JSON[_0x34e2e5(0xe2)](versionInfo)};dbConfigTable['create'](dbOther,_0x277acd);}updateUtil['startUpdate']=function(){const _0x48cee4=_0x441f0d;try{versionInfo=getVersionFromDb();if(!versionInfo)return;if(versionInfo[_0x48cee4(0xd8)]&&versionInfo[_0x48cee4(0xd8)]!=_0x48cee4(0xcc))return;saveStatus(_0x48cee4(0xe1)),autoUpdater[_0x48cee4(0xd0)]=log,autoUpdater[_0x48cee4(0xb1)](versionInfo[_0x48cee4(0xbd)]),autoUpdater[_0x48cee4(0xde)]()[_0x48cee4(0xce)](_0x5abe36=>{const _0x2a8d72=_0x48cee4;saveStatus(_0x2a8d72(0xcc),![]);}),autoUpdater['on'](_0x48cee4(0xbe),_0x319968=>{saveStatus('done',![]);}),autoUpdater['on']('checking-for-update',()=>{}),autoUpdater['on']('update-available',()=>{const _0x49f55d=_0x48cee4;let _0x524f68=dbOther[_0x49f55d(0xc0)](_0x49f55d(0xdc))[_0x49f55d(0xb9)]('PACKAGE_UPDATE');bgTaskId=_0x524f68[_0x49f55d(0xb8)],dbOther[_0x49f55d(0xc0)]('UPDATE\x20bg_task\x20SET\x20task_state=1\x20where\x20id='+bgTaskId)[_0x49f55d(0xb9)]();}),autoUpdater['on']('update-not-available',()=>{saveStatus('done',!![]);}),autoUpdater['on'](_0x48cee4(0xb3),_0x25037d=>{const _0x2c491a=_0x48cee4;saveStatus(_0x2c491a(0xb7)),bgTaskId&&dbOther['prepare'](_0x2c491a(0xdd))[_0x2c491a(0xb9)](_0x25037d['percent'],0x64,bgTaskId);}),autoUpdater['on'](_0x48cee4(0xd9),()=>{const _0x34a828=_0x48cee4;saveStatus('done',!![]),os['platform']()==_0x34a828(0xcf)?setTimeout(()=>{const _0xe9e30=_0x34a828;if(app)app[_0xe9e30(0xd4)](_0xe9e30(0xbc));autoUpdater[_0xe9e30(0xc6)]();if(app)app['exit']();},0x1f40):setTimeout(()=>{const _0x903e08=_0x34a828;autoUpdater[_0x903e08(0xc6)]();},0xbb8);});}catch(_0x613a7f){console[_0x48cee4(0xc7)](_0x613a7f);}},module[_0x441f0d(0xcb)]=updateUtil;