function _0x2224(){const _0x3bc5ac=['sharp','path','filename','ImageHeight','log','sharpGetExifInfo','3719133DJCFlG','1952440WoVxpq','1233864YzJmqP','extractTimestampFromFilename','height','originalTime','width','ExifImageHeight','getTime','3459078NZxTmj','match','464916Dluxvm','substring','ImageWidth','catch','CameraOrientation','2451975jueHQF','270','670855UmZRix','14nsGNIa','metadata','ExifImageWidth','28KLfygf','2uxjxTe','then','length','DateTimeOriginal','exifr异常','latitude','Model','indexOf','CreateDate','getFullYear','exifr','getExifInfo','exifrGetExifInfo','33tWgopK','mode'];_0x2224=function(){return _0x3bc5ac;};return _0x2224();}const _0x13429b=_0x2e56;(function(_0x527ff3,_0x35ff5b){const _0x33b4bd=_0x2e56,_0x255417=_0x527ff3();while(!![]){try{const _0x3caaa9=parseInt(_0x33b4bd(0x99))/0x1*(parseInt(_0x33b4bd(0x8d))/0x2)+-parseInt(_0x33b4bd(0x92))/0x3+-parseInt(_0x33b4bd(0x98))/0x4*(-parseInt(_0x33b4bd(0x94))/0x5)+parseInt(_0x33b4bd(0xb7))/0x6+-parseInt(_0x33b4bd(0x95))/0x7*(-parseInt(_0x33b4bd(0xb0))/0x8)+-parseInt(_0x33b4bd(0xae))/0x9+parseInt(_0x33b4bd(0xaf))/0xa*(-parseInt(_0x33b4bd(0xa6))/0xb);if(_0x3caaa9===_0x35ff5b)break;else _0x255417['push'](_0x255417['shift']());}catch(_0x4b3ced){_0x255417['push'](_0x255417['shift']());}}}(_0x2224,0x736de));const path=require(_0x13429b(0xa9));let exifUtils={};function _0x2e56(_0x5f3248,_0x39ff16){const _0x222434=_0x2224();return _0x2e56=function(_0x2e56b0,_0x11ee12){_0x2e56b0=_0x2e56b0-0x8c;let _0x491e08=_0x222434[_0x2e56b0];return _0x491e08;},_0x2e56(_0x5f3248,_0x39ff16);}var exifr=require(_0x13429b(0xa3));const sharp=require(_0x13429b(0xa8));exifUtils['getRotateFromTags']=function(_0x285553){const _0x288dcf=_0x13429b;let _0x29388a=0x0;if(!_0x285553)return null;if(_0x285553['CameraOrientation']){if(_0x285553[_0x288dcf(0x91)]['indexOf']('90')!=-0x1)_0x29388a=0x5a;else{if(_0x285553[_0x288dcf(0x91)]['indexOf']('180')!=-0x1)_0x29388a=0xb4;else _0x285553[_0x288dcf(0x91)][_0x288dcf(0xa0)](_0x288dcf(0x93))!=-0x1&&(_0x29388a=0x10e);}}return _0x29388a;},exifUtils['sharpGetExifInfo']=function(_0x3c4b16,_0x47537d,_0xaa121e,_0x448dc5){const _0x451767=_0x13429b;sharp(_0x3c4b16,{'failOnError':![]})['metadata']()[_0x451767(0x9a)](_0x1e7f7e=>{const _0x9ab9f3=_0x451767;_0x1e7f7e[_0x9ab9f3(0xb4)]&&_0x1e7f7e['height']&&_0x1e7f7e[_0x9ab9f3(0xb4)]!=_0x47537d[_0x9ab9f3(0xb4)]&&_0x1e7f7e[_0x9ab9f3(0xb4)]>0x0&&(_0x47537d[_0x9ab9f3(0xb4)]=_0x1e7f7e[_0x9ab9f3(0xb4)],_0x47537d[_0x9ab9f3(0xb2)]=_0x1e7f7e[_0x9ab9f3(0xb2)]),_0xaa121e({'tags':_0x1e7f7e,'dealedIndexObj':_0x47537d});})['catch'](_0x4d1857=>{_0xaa121e({'tags':null,'dealedIndexObj':_0x47537d});});},exifUtils[_0x13429b(0xb1)]=function(_0x11e6ca,_0x509928){const _0x7415f2=_0x13429b;try{const _0x459e7c=_0x509928[_0x7415f2(0x8c)](_0x11e6ca);if(_0x459e7c){const _0x489eef=_0x459e7c[0x0];let _0x3405b3=null;if(_0x489eef&&_0x489eef['length']==0x8){const _0x274e12=_0x489eef[_0x7415f2(0x8e)](0x0,0x4),_0x36036a=_0x489eef[_0x7415f2(0x8e)](0x4,0x6),_0x49fac2=_0x489eef[_0x7415f2(0x8e)](0x6,0x8);_0x3405b3=new Date(_0x274e12,parseInt(_0x36036a,0xa)-0x1,_0x49fac2);}else{if(_0x489eef&&_0x489eef[_0x7415f2(0x9b)]==0x8)_0x3405b3=new Date(_0x489eef);else{if(_0x489eef&&_0x489eef['length']==0xd)_0x3405b3=new Date(parseInt(_0x489eef));else{if(_0x489eef&&_0x489eef[_0x7415f2(0x9b)]==0xa)_0x3405b3=new Date(parseInt(_0x489eef)*0x3e8);else{if(_0x489eef&&_0x489eef[_0x7415f2(0x9b)]==0xf&&_0x489eef['startsWith']('_')){const [,_0x5264ac,_0x34d34e]=_0x459e7c,_0x1c9f6b=_0x5264ac[_0x7415f2(0x8e)](0x0,0x4)+'-'+_0x5264ac[_0x7415f2(0x8e)](0x4,0x6)+'-'+_0x5264ac[_0x7415f2(0x8e)](0x6,0x8)+'\x20'+_0x34d34e[_0x7415f2(0x8e)](0x0,0x2)+':'+_0x34d34e[_0x7415f2(0x8e)](0x2,0x4)+':'+_0x34d34e['substring'](0x4,0x6);console[_0x7415f2(0xac)](_0x1c9f6b),_0x3405b3=new Date(_0x1c9f6b);}else{if(_0x489eef&&_0x489eef['length']==0xe){const [,_0x33864e,_0xe954cc]=_0x459e7c,_0x4e1eef=_0x33864e[_0x7415f2(0x8e)](0x0,0x4)+'-'+_0x33864e['substring'](0x4,0x6)+'-'+_0x33864e[_0x7415f2(0x8e)](0x6,0x8)+'\x20'+_0xe954cc[_0x7415f2(0x8e)](0x0,0x2)+':'+_0xe954cc['substring'](0x2,0x4)+':'+_0xe954cc[_0x7415f2(0x8e)](0x4,0x6);console[_0x7415f2(0xac)](_0x4e1eef),_0x3405b3=new Date(_0x4e1eef);}else{if(_0x489eef&&_0x489eef['length']==0x10){console['log'](_0x459e7c);const [,_0x1e4c13,_0x1ac413]=_0x459e7c,_0x2e8ada=_0x1e4c13[_0x7415f2(0x8e)](0x0,0x4)+'-'+_0x1e4c13[_0x7415f2(0x8e)](0x4,0x6)+'-'+_0x1e4c13['substring'](0x6,0x8)+'\x20'+_0x1ac413[_0x7415f2(0x8e)](0x0,0x2)+':'+_0x1ac413[_0x7415f2(0x8e)](0x2,0x4)+':'+_0x1ac413[_0x7415f2(0x8e)](0x4,0x6);console['log'](_0x2e8ada),_0x3405b3=new Date(_0x2e8ada);}}}}}}}if(!_0x3405b3)return null;const _0x35f653=new Date()[_0x7415f2(0xa2)]();let _0x38fa9a=_0x3405b3[_0x7415f2(0xa2)]();if(!_0x38fa9a||_0x38fa9a<0x7b2||_0x38fa9a>_0x35f653)return null;if(!isNaN(_0x3405b3[_0x7415f2(0xb6)]()))return _0x3405b3[_0x7415f2(0xb6)]();}return null;}catch(_0x1cd1aa){return console[_0x7415f2(0xac)](_0x1cd1aa),null;}},exifUtils[_0x13429b(0xa5)]=function(_0xe6b083,_0x179b42,_0x124db2,_0x516d44){const _0x255279=_0x13429b;let _0x436947=![];try{exifr['parse'](_0xe6b083)['then'](_0x1cea5d=>{const _0x10fc96=_0x2e56;_0x1cea5d&&(_0x179b42[_0x10fc96(0xa7)]=_0x1cea5d[_0x10fc96(0x9f)],_0x179b42['latitude']=_0x1cea5d[_0x10fc96(0x9e)],_0x179b42['longitude']=_0x1cea5d['longitude'],_0x179b42['width']=_0x1cea5d[_0x10fc96(0x8f)]||_0x1cea5d[_0x10fc96(0x97)],_0x179b42['height']=_0x1cea5d[_0x10fc96(0xab)]||_0x1cea5d[_0x10fc96(0xb5)],_0x436947=_0x1cea5d[_0x10fc96(0x9c)],_0x1cea5d[_0x10fc96(0xa1)]&&!_0x436947&&(_0x436947=_0x1cea5d['CreateDate']));if(!_0x436947){const _0xba2731=/(\d{4}-\d{2}-\d{2})/,_0x39e291=exifUtils[_0x10fc96(0xb1)](_0xba2731,_0x179b42[_0x10fc96(0xaa)]);_0x39e291&&(_0x436947=_0x39e291);}if(!_0x436947){const _0x3696a0=/_(\d{8})_(\d{6})/,_0x11e886=exifUtils[_0x10fc96(0xb1)](_0x3696a0,_0x179b42[_0x10fc96(0xaa)]);_0x11e886&&(_0x436947=_0x11e886);}if(!_0x436947){const _0x5abe05=/_(\d{8})(\d{6})/,_0x1e0894=exifUtils[_0x10fc96(0xb1)](_0x5abe05,_0x179b42[_0x10fc96(0xaa)]);_0x1e0894&&(_0x436947=_0x1e0894);}if(!_0x436947){const _0x5cb91e=/(\d{8})(\d{6})/,_0xe90437=exifUtils['extractTimestampFromFilename'](_0x5cb91e,_0x179b42[_0x10fc96(0xaa)]);_0xe90437&&(_0x436947=_0xe90437);}if(!_0x436947){const _0x3b8a60=/(\d{13}|\d{10})/,_0xf68e82=exifUtils['extractTimestampFromFilename'](_0x3b8a60,_0x179b42[_0x10fc96(0xaa)]);_0xf68e82&&(_0x436947=_0xf68e82);}if(!_0x436947){const _0x2603ea=/(\d{4})(\d{2})(\d{2})/,_0x11cf71=exifUtils[_0x10fc96(0xb1)](_0x2603ea,_0x179b42[_0x10fc96(0xaa)]);_0x11cf71&&(_0x436947=_0x11cf71);}function _0x54cc36(){const _0x4164cd=_0x10fc96;if(_0x436947)try{_0x436947=new Date(_0x436947)[_0x4164cd(0xb6)](),_0x179b42['originalTime']=_0x436947;}catch(_0xe81631){console[_0x4164cd(0xac)](_0xe81631),_0x179b42[_0x4164cd(0xb3)]='';}if(!_0x179b42[_0x4164cd(0xb4)]||!_0x179b42[_0x4164cd(0xb2)])return exifUtils[_0x4164cd(0xad)](_0xe6b083,_0x179b42,_0x124db2,_0x516d44);else _0x124db2({'tags':_0x1cea5d,'dealedIndexObj':_0x179b42});}sharp(_0xe6b083,{'failOnError':![]})[_0x10fc96(0x96)]()['then'](_0x3eab45=>{const _0x1c0e4f=_0x10fc96;_0x3eab45[_0x1c0e4f(0xb4)]&&_0x3eab45[_0x1c0e4f(0xb2)]&&_0x3eab45['width']!=_0x179b42['width']&&_0x3eab45['width']>0x0&&(_0x179b42[_0x1c0e4f(0xb4)]=_0x3eab45['width'],_0x179b42[_0x1c0e4f(0xb2)]=_0x3eab45[_0x1c0e4f(0xb2)]),_0x54cc36();})[_0x10fc96(0x90)](_0x1ed175=>{console['log'](_0x1ed175),_0x54cc36();});})[_0x255279(0x90)](_0x3bf4d0=>{const _0x201160=_0x255279;return console[_0x201160(0xac)](_0x201160(0x9d),_0x3bf4d0),exifUtils[_0x201160(0xad)](_0xe6b083,_0x179b42,_0x124db2,_0x516d44);});}catch(_0x4416cb){return console[_0x255279(0xac)](_0x255279(0x9d),_0x4416cb),exifUtils['sharpGetExifInfo'](_0xe6b083,_0x179b42,_0x124db2,_0x516d44);}},exifUtils[_0x13429b(0xa4)]=function(_0x24aa96,_0x5d2036){return new Promise((_0x22577d,_0x3e5260)=>{const _0x27d0ef=_0x2e56;exifUtils[_0x27d0ef(0xa5)](_0x24aa96,_0x5d2036,_0x22577d);return;});},module['exports']=exifUtils;