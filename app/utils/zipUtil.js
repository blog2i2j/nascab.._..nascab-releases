const _0x87aeb2=_0xffec;(function(_0x43cfa9,_0x50f661){const _0x1f23ba=_0xffec,_0xca8b8a=_0x43cfa9();while(!![]){try{const _0x276f7b=-parseInt(_0x1f23ba(0x1de))/0x1+parseInt(_0x1f23ba(0x1d6))/0x2+-parseInt(_0x1f23ba(0x1cc))/0x3+-parseInt(_0x1f23ba(0x1d3))/0x4+-parseInt(_0x1f23ba(0x1e4))/0x5+parseInt(_0x1f23ba(0x1cb))/0x6*(parseInt(_0x1f23ba(0x1ef))/0x7)+parseInt(_0x1f23ba(0x1c7))/0x8*(parseInt(_0x1f23ba(0x1dc))/0x9);if(_0x276f7b===_0x50f661)break;else _0xca8b8a['push'](_0xca8b8a['shift']());}catch(_0x3d63bf){_0xca8b8a['push'](_0xca8b8a['shift']());}}}(_0x3836,0x8668d));function _0xffec(_0x57f25f,_0x206be8){const _0x383671=_0x3836();return _0xffec=function(_0xffec18,_0x200e9f){_0xffec18=_0xffec18-0x1c1;let _0x225952=_0x383671[_0xffec18];return _0x225952;},_0xffec(_0x57f25f,_0x206be8);}const path=require(_0x87aeb2(0x1c9));let zipUtil={};const sharp=require(_0x87aeb2(0x1e1)),AdmZip=require(_0x87aeb2(0x1e5)),unrar=require('node-unrar-js'),fs=require('fs'),config=require(_0x87aeb2(0x1e3)),EPub=require(_0x87aeb2(0x1f1)),zipEpubUtil=require(_0x87aeb2(0x1ce)),arrayUtil=require(_0x87aeb2(0x1ec));function _0x3836(){const _0xa2462e=['126PUBjnQ','2155989KyOrer','.zip','./zipEpubUtil','toLowerCase','getEpubImageList','name','exports','1762848hbRHYH','getZipCover','includes','1580658lqptPG','extname','.cbr','files','不支持的压缩文件格式','getEntries','3969PbUzXI','length','31372fUxKBV','getFileList','getInnerFileContent','sharp','toBuffer','../myConfig/config','4846510kLgxOC','adm-zip','createExtractorFromData','.rar','getZipInnerFileList','isDirectory','imgTypeList','from','./arrayUtil','extraction','getSharpDealedBuffer','276703PNtlqH','readFile','epub','log','push','then','.cbz','extract','sortFileNamesByNumber','19776rkeCbd','entryName','path','jpeg'];_0x3836=function(){return _0xa2462e;};return _0x3836();}zipUtil[_0x87aeb2(0x1e8)]=(_0x33b348,_0xa8ab77)=>{return new Promise((_0x4ada8c,_0x4cfeb1)=>{const _0x46d516=_0xffec;let _0x3dd806=[];try{let _0xc3796b=path[_0x46d516(0x1d7)](_0x33b348);_0xc3796b&&(_0xc3796b=_0xc3796b[_0x46d516(0x1cf)]());if(_0xc3796b==_0x46d516(0x1cd)||_0xc3796b==_0x46d516(0x1c4)){const _0x52fba3=new AdmZip(_0x33b348);_0x52fba3[_0x46d516(0x1db)]()['forEach'](_0x24a5bd=>{const _0x7bf125=_0x46d516;let _0x4005a6=!![],_0x181e52=path[_0x7bf125(0x1d7)](_0x24a5bd[_0x7bf125(0x1c8)]);_0xa8ab77&&(_0x4005a6=![],_0x181e52&&config['imgTypeList'][_0x7bf125(0x1d5)](_0x181e52[_0x7bf125(0x1cf)]())&&(_0x4005a6=!![])),_0x4005a6&&_0x3dd806[_0x7bf125(0x1c2)]({'isDir':_0x24a5bd[_0x7bf125(0x1e9)],'name':_0x24a5bd[_0x7bf125(0x1c8)]});}),_0x4ada8c(arrayUtil[_0x46d516(0x1c6)](_0x3dd806,_0x46d516(0x1d1)));}else{if(_0xc3796b=='.rar'||_0xc3796b==_0x46d516(0x1d8))fs[_0x46d516(0x1f0)](_0x33b348,(_0x510c22,_0x91648c)=>{const _0x16ab94=_0x46d516;unrar[_0x16ab94(0x1e6)]({'data':_0x91648c})[_0x16ab94(0x1c3)](_0x4df203=>{const _0xe8c0c4=_0x16ab94,_0x25ab5f=_0x4df203[_0xe8c0c4(0x1df)](),_0x5bafb3=[..._0x25ab5f['fileHeaders']];for(let _0x34dc6f of _0x5bafb3){let _0x41e2c6=!![],_0x5b37e2=path[_0xe8c0c4(0x1d7)](_0x34dc6f[_0xe8c0c4(0x1d1)]);_0xa8ab77&&(_0x41e2c6=![],_0x5b37e2&&config[_0xe8c0c4(0x1ea)][_0xe8c0c4(0x1d5)](_0x5b37e2[_0xe8c0c4(0x1cf)]())&&(_0x41e2c6=!![])),_0x41e2c6&&_0x3dd806[_0xe8c0c4(0x1c2)]({'isDir':![],'name':_0x34dc6f[_0xe8c0c4(0x1d1)]});}_0x4ada8c(arrayUtil['sortFileNamesByNumber'](_0x3dd806,_0xe8c0c4(0x1d1)));});});else _0xc3796b=='.epub'?zipEpubUtil[_0x46d516(0x1d0)](_0x33b348)[_0x46d516(0x1c3)](_0x554680=>{for(let _0x343bee of _0x554680){_0x3dd806['push']({'isDir':![],'name':_0x343bee});}_0x4ada8c(_0x3dd806);}):(console[_0x46d516(0x1c1)](_0x46d516(0x1da),_0x33b348),_0x4ada8c([]));}}catch(_0xd2cdfc){console['log'](_0xd2cdfc),_0x4ada8c([]);}});},zipUtil[_0x87aeb2(0x1ee)]=(_0x33dd29,_0x178f0e)=>{return new Promise((_0x23a3cb,_0x54cd5e)=>{const _0x400870=_0xffec;let _0x5a59a7=path[_0x400870(0x1d7)](_0x178f0e);_0x5a59a7&&config[_0x400870(0x1ea)]['includes'](_0x5a59a7[_0x400870(0x1cf)]())?sharp(_0x33dd29,{'failOnError':![]})[_0x400870(0x1ca)]({'quality':0x4d})[_0x400870(0x1e2)]()[_0x400870(0x1c3)](_0x1096d6=>{_0x23a3cb(_0x1096d6);})['catch'](_0x48d33b=>{const _0x56df0f=_0x400870;console[_0x56df0f(0x1c1)](_0x48d33b),_0x23a3cb(_0x33dd29);}):_0x23a3cb(_0x33dd29);});},zipUtil['getInnerFileContent']=(_0xa94bf9,_0x2d26a2)=>{return new Promise((_0x5e74c0,_0x18adb6)=>{const _0x3613e5=_0xffec;try{let _0x98714=path['extname'](_0xa94bf9);_0x98714&&(_0x98714=_0x98714[_0x3613e5(0x1cf)]());if(_0x98714==_0x3613e5(0x1cd)||_0x98714==_0x3613e5(0x1c4)||_0x98714=='.epub'){const _0x1a184f=new AdmZip(_0xa94bf9);let _0x261a66=_0x1a184f[_0x3613e5(0x1f0)](_0x2d26a2);zipUtil['getSharpDealedBuffer'](_0x261a66,_0x2d26a2)['then'](_0x5461d0=>{_0x5e74c0(_0x5461d0);});}else _0x98714==_0x3613e5(0x1e7)||_0x98714==_0x3613e5(0x1d8)?fs['readFile'](_0xa94bf9,(_0xc47e39,_0x41a68b)=>{const _0x6ffb04=_0x3613e5;if(_0xc47e39)return console[_0x6ffb04(0x1c1)](_0xc47e39),_0x5e74c0(null);unrar[_0x6ffb04(0x1e6)]({'data':_0x41a68b})[_0x6ffb04(0x1c3)](_0x537103=>{const _0x4c8653=_0x6ffb04;try{const _0x495b2f=_0x537103[_0x4c8653(0x1c5)]({'files':[_0x2d26a2]}),_0x1bc8d8=[..._0x495b2f[_0x4c8653(0x1d9)]];if(_0x1bc8d8&&_0x1bc8d8[_0x4c8653(0x1dd)]>0x0){let _0x2efd46=Buffer[_0x4c8653(0x1eb)](_0x1bc8d8[0x0][_0x4c8653(0x1ed)]);zipUtil['getSharpDealedBuffer'](_0x2efd46,_0x2d26a2)[_0x4c8653(0x1c3)](_0x1a0fad=>{_0x5e74c0(_0x1a0fad);});}else _0x5e74c0(null);}catch(_0x2f5b77){_0x5e74c0(null);}});}):(console['log'](_0x3613e5(0x1da),_0xa94bf9),_0x5e74c0(null));}catch(_0x51cd4d){console['log'](_0x51cd4d),_0x5e74c0(null);}});},zipUtil[_0x87aeb2(0x1d4)]=_0x36d2b3=>{return new Promise((_0x2715b7,_0xfe4079)=>{const _0x447ee3=_0xffec;try{zipUtil[_0x447ee3(0x1e8)](_0x36d2b3,!![])[_0x447ee3(0x1c3)](_0x56635c=>{const _0x464b4d=_0x447ee3;if(_0x56635c[_0x464b4d(0x1dd)]>0x0){let _0x1f1827=_0x56635c[0x0];zipUtil[_0x464b4d(0x1e0)](_0x36d2b3,_0x1f1827[_0x464b4d(0x1d1)])[_0x464b4d(0x1c3)](_0x23d1fb=>{const _0x3c9934=_0x464b4d;_0x2715b7({'dealedBuffer':_0x23d1fb,'fileCount':_0x56635c[_0x3c9934(0x1dd)]});});}else _0x2715b7(null);});}catch(_0x3045cf){_0x2715b7(null);}});},module[_0x87aeb2(0x1d2)]=zipUtil;