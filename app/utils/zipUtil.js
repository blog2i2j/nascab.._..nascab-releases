const _0x5a2ac0=_0x2806;function _0x2806(_0x5cf162,_0x41ea03){const _0x1d804d=_0x1d80();return _0x2806=function(_0x28066c,_0x54d090){_0x28066c=_0x28066c-0x15a;let _0x2bfef3=_0x1d804d[_0x28066c];return _0x2bfef3;},_0x2806(_0x5cf162,_0x41ea03);}(function(_0x96a02,_0x39e860){const _0x1dd97d=_0x2806,_0x342d33=_0x96a02();while(!![]){try{const _0x314967=parseInt(_0x1dd97d(0x175))/0x1*(-parseInt(_0x1dd97d(0x181))/0x2)+-parseInt(_0x1dd97d(0x15b))/0x3+-parseInt(_0x1dd97d(0x171))/0x4*(-parseInt(_0x1dd97d(0x170))/0x5)+-parseInt(_0x1dd97d(0x173))/0x6*(-parseInt(_0x1dd97d(0x160))/0x7)+-parseInt(_0x1dd97d(0x185))/0x8+parseInt(_0x1dd97d(0x16e))/0x9*(-parseInt(_0x1dd97d(0x16d))/0xa)+parseInt(_0x1dd97d(0x162))/0xb;if(_0x314967===_0x39e860)break;else _0x342d33['push'](_0x342d33['shift']());}catch(_0x48939a){_0x342d33['push'](_0x342d33['shift']());}}}(_0x1d80,0xdc78a));const path=require(_0x5a2ac0(0x15c));let zipUtil={};const sharp=require(_0x5a2ac0(0x15d)),AdmZip=require(_0x5a2ac0(0x17e)),unrar=require(_0x5a2ac0(0x189)),fs=require('fs'),config=require(_0x5a2ac0(0x184)),EPub=require('epub'),zipEpubUtil=require(_0x5a2ac0(0x17b)),arrayUtil=require(_0x5a2ac0(0x15f));zipUtil[_0x5a2ac0(0x179)]=(_0x1468f6,_0x54cd78)=>{return new Promise((_0x180f6f,_0x29a21e)=>{const _0x40046d=_0x2806;let _0x4a6df7=[];try{let _0x31f278=path[_0x40046d(0x15e)](_0x1468f6);_0x31f278&&(_0x31f278=_0x31f278['toLowerCase']());if(_0x31f278==_0x40046d(0x183)||_0x31f278==_0x40046d(0x16c)){const _0x41b83c=new AdmZip(_0x1468f6);_0x41b83c['getEntries']()[_0x40046d(0x168)](_0x55815c=>{const _0x17a6e9=_0x40046d;let _0x19f5ff=!![],_0x358260=path[_0x17a6e9(0x15e)](_0x55815c['entryName']);_0x54cd78&&(_0x19f5ff=![],_0x358260&&config[_0x17a6e9(0x176)][_0x17a6e9(0x182)](_0x358260[_0x17a6e9(0x17f)]())&&(_0x19f5ff=!![])),_0x19f5ff&&_0x4a6df7[_0x17a6e9(0x165)]({'isDir':_0x55815c['isDirectory'],'name':_0x55815c['entryName']});}),_0x180f6f(arrayUtil[_0x40046d(0x180)](_0x4a6df7,'name'));}else{if(_0x31f278==_0x40046d(0x15a)||_0x31f278==_0x40046d(0x164))fs[_0x40046d(0x17a)](_0x1468f6,(_0x59d777,_0x36096f)=>{const _0x4a3cab=_0x40046d;unrar[_0x4a3cab(0x16f)]({'data':_0x36096f})[_0x4a3cab(0x166)](_0x17589e=>{const _0x282063=_0x4a3cab,_0x5872ec=_0x17589e[_0x282063(0x17d)](),_0x248df1=[..._0x5872ec[_0x282063(0x163)]];for(let _0x2f7aa2 of _0x248df1){let _0x4c78d7=!![],_0x4216c9=path['extname'](_0x2f7aa2[_0x282063(0x186)]);_0x54cd78&&(_0x4c78d7=![],_0x4216c9&&config['imgTypeList'][_0x282063(0x182)](_0x4216c9[_0x282063(0x17f)]())&&(_0x4c78d7=!![])),_0x4c78d7&&_0x4a6df7[_0x282063(0x165)]({'isDir':![],'name':_0x2f7aa2[_0x282063(0x186)]});}_0x180f6f(arrayUtil['sortFileNamesByNumber'](_0x4a6df7,_0x282063(0x186)));});});else _0x31f278=='.epub'?zipEpubUtil[_0x40046d(0x187)](_0x1468f6)[_0x40046d(0x166)](_0x588464=>{for(let _0x4e78ea of _0x588464){_0x4a6df7['push']({'isDir':![],'name':_0x4e78ea});}_0x180f6f(_0x4a6df7);}):(console[_0x40046d(0x17c)](_0x40046d(0x174),_0x1468f6),_0x180f6f([]));}}catch(_0x6c7bfa){console['log'](_0x6c7bfa),_0x180f6f([]);}});},zipUtil[_0x5a2ac0(0x178)]=(_0x1bf95a,_0x15f692)=>{return new Promise((_0x1a47a1,_0x3c206b)=>{const _0x20b627=_0x2806;let _0x1c5d30=path[_0x20b627(0x15e)](_0x15f692);_0x1c5d30&&config[_0x20b627(0x176)][_0x20b627(0x182)](_0x1c5d30['toLowerCase']())?sharp(_0x1bf95a,{'failOnError':![]})[_0x20b627(0x172)]({'quality':0x4d})[_0x20b627(0x188)]()[_0x20b627(0x166)](_0x2ae737=>{_0x1a47a1(_0x2ae737);})['catch'](_0x5b4dad=>{console['log'](_0x5b4dad),_0x1a47a1(_0x1bf95a);}):_0x1a47a1(_0x1bf95a);});},zipUtil[_0x5a2ac0(0x16b)]=(_0xa178a6,_0x2311b7)=>{return new Promise((_0x18f545,_0x161501)=>{const _0x5e989a=_0x2806;try{let _0x6835e4=path[_0x5e989a(0x15e)](_0xa178a6);_0x6835e4&&(_0x6835e4=_0x6835e4['toLowerCase']());if(_0x6835e4==_0x5e989a(0x183)||_0x6835e4==_0x5e989a(0x16c)||_0x6835e4=='.epub'){const _0x207b80=new AdmZip(_0xa178a6);let _0x245220=_0x207b80[_0x5e989a(0x17a)](_0x2311b7);zipUtil[_0x5e989a(0x178)](_0x245220,_0x2311b7)[_0x5e989a(0x166)](_0x50dfdd=>{_0x18f545(_0x50dfdd);});}else _0x6835e4=='.rar'||_0x6835e4==_0x5e989a(0x164)?fs[_0x5e989a(0x17a)](_0xa178a6,(_0xb6d66d,_0x4c8b44)=>{const _0x3400d4=_0x5e989a;if(_0xb6d66d)return console[_0x3400d4(0x17c)](_0xb6d66d),_0x18f545(null);unrar[_0x3400d4(0x16f)]({'data':_0x4c8b44})[_0x3400d4(0x166)](_0x5a35ae=>{const _0x2c3b4c=_0x3400d4;try{const _0x63e8b0=_0x5a35ae[_0x2c3b4c(0x167)]({'files':[_0x2311b7]}),_0x13d22a=[..._0x63e8b0['files']];if(_0x13d22a&&_0x13d22a['length']>0x0){let _0x24b232=Buffer[_0x2c3b4c(0x169)](_0x13d22a[0x0][_0x2c3b4c(0x16a)]);zipUtil[_0x2c3b4c(0x178)](_0x24b232,_0x2311b7)[_0x2c3b4c(0x166)](_0x4744c9=>{_0x18f545(_0x4744c9);});}else _0x18f545(null);}catch(_0x2ff1d1){_0x18f545(null);}});}):(console[_0x5e989a(0x17c)]('不支持的压缩文件格式',_0xa178a6),_0x18f545(null));}catch(_0x49fab7){console[_0x5e989a(0x17c)](_0x49fab7),_0x18f545(null);}});},zipUtil[_0x5a2ac0(0x161)]=_0x50d09c=>{return new Promise((_0x56cdb8,_0x5b0c84)=>{try{zipUtil['getZipInnerFileList'](_0x50d09c,!![])['then'](_0x4c7d32=>{const _0x832a91=_0x2806;if(_0x4c7d32['length']>0x0){let _0xaceb49=_0x4c7d32[0x0];zipUtil[_0x832a91(0x16b)](_0x50d09c,_0xaceb49[_0x832a91(0x186)])[_0x832a91(0x166)](_0x29d136=>{const _0x50d17f=_0x832a91;_0x56cdb8({'dealedBuffer':_0x29d136,'fileCount':_0x4c7d32[_0x50d17f(0x177)]});});}else _0x56cdb8(null);});}catch(_0x1e36ce){_0x56cdb8(null);}});},module['exports']=zipUtil;function _0x1d80(){const _0x556ac9=['24103673FjsEyf','fileHeaders','.cbr','push','then','extract','forEach','from','extraction','getInnerFileContent','.cbz','14421540iJHEPi','9RQqyEv','createExtractorFromData','35lRDTFT','276712SDLCEG','jpeg','408dwZpZR','不支持的压缩文件格式','14CbywzG','imgTypeList','length','getSharpDealedBuffer','getZipInnerFileList','readFile','./zipEpubUtil','log','getFileList','adm-zip','toLowerCase','sortFileNamesByNumber','43932IWXwRb','includes','.zip','../myConfig/config','1206320AQkTgo','name','getEpubImageList','toBuffer','node-unrar-js','.rar','1999857CJiwxC','path','sharp','extname','./arrayUtil','81802MPxHPP','getZipCover'];_0x1d80=function(){return _0x556ac9;};return _0x1d80();}