function _0x8603(){const _0x3f0c68=['.cbz','106778JgSVvZ','length','name','isDirectory','entryName','imgTypeList','extraction','2CcVWOC','getZipInnerFileList','getSharpDealedBuffer','toLowerCase','readFile','exports','then','path','from','extname','1012665Qzadjy','./arrayUtil','不支持的压缩文件格式','createExtractorFromData','toBuffer','fileHeaders','getEntries','sortFileNamesByNumber','forEach','includes','.epub','42054VExIjE','getZipCover','1232744bwvgPK','1817694uIRRme','sharp','.rar','8866360XKsUVu','.zip','push','./zipEpubUtil','getInnerFileContent','node-unrar-js','.cbr','jpeg','log','2220545NINNWV'];_0x8603=function(){return _0x3f0c68;};return _0x8603();}const _0x19a149=_0x5198;(function(_0x3f65a4,_0x24b607){const _0x7c792f=_0x5198,_0x526740=_0x3f65a4();while(!![]){try{const _0x9cc9d0=parseInt(_0x7c792f(0x18b))/0x1+-parseInt(_0x7c792f(0x1a3))/0x2*(parseInt(_0x7c792f(0x180))/0x3)+-parseInt(_0x7c792f(0x18d))/0x4+-parseInt(_0x7c792f(0x19a))/0x5+parseInt(_0x7c792f(0x18e))/0x6+-parseInt(_0x7c792f(0x19c))/0x7+parseInt(_0x7c792f(0x191))/0x8;if(_0x9cc9d0===_0x24b607)break;else _0x526740['push'](_0x526740['shift']());}catch(_0x1fd330){_0x526740['push'](_0x526740['shift']());}}}(_0x8603,0x55022));function _0x5198(_0x467cb0,_0x31d558){const _0x86032c=_0x8603();return _0x5198=function(_0x5198f4,_0x1ee21c){_0x5198f4=_0x5198f4-0x179;let _0x16eddf=_0x86032c[_0x5198f4];return _0x16eddf;},_0x5198(_0x467cb0,_0x31d558);}const path=require(_0x19a149(0x17d));let zipUtil={};const sharp=require(_0x19a149(0x18f)),AdmZip=require('adm-zip'),unrar=require(_0x19a149(0x196)),fs=require('fs'),config=require('../myConfig/config'),EPub=require('epub'),zipEpubUtil=require(_0x19a149(0x194)),arrayUtil=require(_0x19a149(0x181));zipUtil[_0x19a149(0x1a4)]=(_0x482451,_0x1b51eb)=>{return new Promise((_0x3bd31a,_0x38d4f8)=>{const _0x4d1242=_0x5198;let _0x1b6d10=[];try{let _0x25dc23=path[_0x4d1242(0x17f)](_0x482451);_0x25dc23&&(_0x25dc23=_0x25dc23[_0x4d1242(0x179)]());if(_0x25dc23==_0x4d1242(0x192)||_0x25dc23==_0x4d1242(0x19b)){const _0xc4a79c=new AdmZip(_0x482451);_0xc4a79c[_0x4d1242(0x186)]()[_0x4d1242(0x188)](_0x4d73b2=>{const _0xebf752=_0x4d1242;let _0xb6f39f=!![],_0x25508c=path[_0xebf752(0x17f)](_0x4d73b2[_0xebf752(0x1a0)]);_0x1b51eb&&(_0xb6f39f=![],_0x25508c&&config['imgTypeList'][_0xebf752(0x189)](_0x25508c[_0xebf752(0x179)]())&&(_0xb6f39f=!![])),_0xb6f39f&&_0x1b6d10[_0xebf752(0x193)]({'isDir':_0x4d73b2[_0xebf752(0x19f)],'name':_0x4d73b2['entryName']});}),_0x3bd31a(arrayUtil[_0x4d1242(0x187)](_0x1b6d10,'name'));}else{if(_0x25dc23==_0x4d1242(0x190)||_0x25dc23==_0x4d1242(0x197))fs[_0x4d1242(0x17a)](_0x482451,(_0x229832,_0x35d91f)=>{const _0x46ffa2=_0x4d1242;unrar[_0x46ffa2(0x183)]({'data':_0x35d91f})[_0x46ffa2(0x17c)](_0x2d197b=>{const _0x410be1=_0x46ffa2,_0x37077f=_0x2d197b['getFileList'](),_0x563fee=[..._0x37077f[_0x410be1(0x185)]];for(let _0x623f20 of _0x563fee){let _0x19a50c=!![],_0xa2e9ea=path[_0x410be1(0x17f)](_0x623f20[_0x410be1(0x19e)]);_0x1b51eb&&(_0x19a50c=![],_0xa2e9ea&&config[_0x410be1(0x1a1)][_0x410be1(0x189)](_0xa2e9ea[_0x410be1(0x179)]())&&(_0x19a50c=!![])),_0x19a50c&&_0x1b6d10['push']({'isDir':![],'name':_0x623f20[_0x410be1(0x19e)]});}_0x3bd31a(arrayUtil[_0x410be1(0x187)](_0x1b6d10,_0x410be1(0x19e)));});});else _0x25dc23==_0x4d1242(0x18a)?zipEpubUtil['getEpubImageList'](_0x482451)[_0x4d1242(0x17c)](_0x521eae=>{const _0x4a1ddd=_0x4d1242;for(let _0xefa6e9 of _0x521eae){_0x1b6d10[_0x4a1ddd(0x193)]({'isDir':![],'name':_0xefa6e9});}_0x3bd31a(_0x1b6d10);}):(console[_0x4d1242(0x199)]('不支持的压缩文件格式',_0x482451),_0x3bd31a([]));}}catch(_0x243e11){console[_0x4d1242(0x199)](_0x243e11),_0x3bd31a([]);}});},zipUtil[_0x19a149(0x1a5)]=(_0x3545f,_0x158ce1)=>{return new Promise((_0x23bc8b,_0x2b6805)=>{const _0x195638=_0x5198;let _0x1d3c58=path[_0x195638(0x17f)](_0x158ce1);_0x1d3c58&&config['imgTypeList']['includes'](_0x1d3c58[_0x195638(0x179)]())?sharp(_0x3545f,{'failOnError':![]})[_0x195638(0x198)]({'quality':0x4d})[_0x195638(0x184)]()[_0x195638(0x17c)](_0x20920e=>{_0x23bc8b(_0x20920e);})['catch'](_0x5d6a6d=>{const _0x15ca36=_0x195638;console[_0x15ca36(0x199)](_0x5d6a6d),_0x23bc8b(_0x3545f);}):_0x23bc8b(_0x3545f);});},zipUtil[_0x19a149(0x195)]=(_0x10a6d1,_0x26de79)=>{return new Promise((_0x4aa351,_0xd460a)=>{const _0x2c844e=_0x5198;try{let _0x284cb7=path['extname'](_0x10a6d1);_0x284cb7&&(_0x284cb7=_0x284cb7[_0x2c844e(0x179)]());if(_0x284cb7==_0x2c844e(0x192)||_0x284cb7==_0x2c844e(0x19b)||_0x284cb7==_0x2c844e(0x18a)){const _0x526e81=new AdmZip(_0x10a6d1);let _0x2ed039=_0x526e81[_0x2c844e(0x17a)](_0x26de79);zipUtil[_0x2c844e(0x1a5)](_0x2ed039,_0x26de79)[_0x2c844e(0x17c)](_0x100705=>{_0x4aa351(_0x100705);});}else _0x284cb7==_0x2c844e(0x190)||_0x284cb7==_0x2c844e(0x197)?fs[_0x2c844e(0x17a)](_0x10a6d1,(_0x3ebe71,_0x1974a9)=>{const _0x26444d=_0x2c844e;if(_0x3ebe71)return console[_0x26444d(0x199)](_0x3ebe71),_0x4aa351(null);unrar[_0x26444d(0x183)]({'data':_0x1974a9})[_0x26444d(0x17c)](_0x33782b=>{const _0x21b6d6=_0x26444d;try{const _0x29f3e0=_0x33782b['extract']({'files':[_0x26de79]}),_0x4c2c43=[..._0x29f3e0['files']];if(_0x4c2c43&&_0x4c2c43[_0x21b6d6(0x19d)]>0x0){let _0x205b2f=Buffer[_0x21b6d6(0x17e)](_0x4c2c43[0x0][_0x21b6d6(0x1a2)]);zipUtil[_0x21b6d6(0x1a5)](_0x205b2f,_0x26de79)[_0x21b6d6(0x17c)](_0x36bf=>{_0x4aa351(_0x36bf);});}else _0x4aa351(null);}catch(_0x42d947){_0x4aa351(null);}});}):(console['log'](_0x2c844e(0x182),_0x10a6d1),_0x4aa351(null));}catch(_0x20ec57){console[_0x2c844e(0x199)](_0x20ec57),_0x4aa351(null);}});},zipUtil[_0x19a149(0x18c)]=_0x5ac35f=>{return new Promise((_0x55c678,_0x31bc42)=>{const _0x419ba6=_0x5198;try{zipUtil[_0x419ba6(0x1a4)](_0x5ac35f,!![])[_0x419ba6(0x17c)](_0x17ee85=>{const _0x371c1a=_0x419ba6;if(_0x17ee85[_0x371c1a(0x19d)]>0x0){let _0x15583c=_0x17ee85[0x0];zipUtil['getInnerFileContent'](_0x5ac35f,_0x15583c[_0x371c1a(0x19e)])['then'](_0x10b929=>{const _0x100c87=_0x371c1a;_0x55c678({'dealedBuffer':_0x10b929,'fileCount':_0x17ee85[_0x100c87(0x19d)]});});}else _0x55c678(null);});}catch(_0x5c78c0){_0x55c678(null);}});},module[_0x19a149(0x17b)]=zipUtil;