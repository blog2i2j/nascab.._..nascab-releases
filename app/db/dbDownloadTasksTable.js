const _0x2c5919=_0x5469;function _0x5469(_0x1b200e,_0x3f9778){const _0x2f0ec4=_0x2f0e();return _0x5469=function(_0x5469de,_0x21156b){_0x5469de=_0x5469de-0x1d2;let _0x55db6b=_0x2f0ec4[_0x5469de];return _0x55db6b;},_0x5469(_0x1b200e,_0x3f9778);}function _0x2f0e(){const _0x12ac82=['getTaskList','=?\x20WHERE\x20id=?','\x20FROM\x20download_tasks\x20','updateTaskField','run','1591674ACMrWe','4AsFCzm','downloaded','order\x20field\x20/\x20type\x20error','ALLOW_ORDER_FIELD','691986dJEleN','50kVhEda','getDownloadingTaskByWhere','id,save_path,task_name,task_type,task_state,download_speed,upload_speed,uploaded,downloaded,total_size,downloaded,create_time,torrent_path','task_state','STATE_DOWNLOADING','STATE_PARSING','STATE_WAITING_SELECT_FILE','12vTKRmH','UPDATE\x20download_tasks\x20SET\x20task_state=?\x20WHERE\x20task_state=?\x20or\x20task_state=?','all','MAGNET','STATE_FAILD','prepare','4902471tYqQho','SELECT\x20*\x20FROM\x20download_tasks\x20WHERE\x20id=?','STATE_COMPLETED','2805470foZyJF','log','UPDATE\x20download_tasks\x20SET\x20','getTaskById','1782352MdlCmC','total_size','asc','WHERE\x20task_state=','3179440obxEiL','ALLOW_ORDER_TYPE','STATE_PAUSE','\x20LIMIT\x20?\x20OFFSET\x20?','TYPE_MAGNET','get','deleteTask','DELETE\x20FROM\x20download_tasks\x20\x20WHERE\x20id=?','FIELD_LIST','ALLOW_UPDATE_FIELD','\x20AND\x20task_state','INSERT\x20INTO\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20download_tasks(user_id,task_name,task_type,task_state,save_path,create_time,magnet,http_url,torrent_path)\x20\x0a\x09\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20VALUES(?,?,?,?,?,?,?,?,?)','DELETE\x20FROM\x20download_tasks\x20','desc','WHERE\x20task_state\x20<\x20','2796264JUKPWi','63zvpfIo','now','UPDATE\x20download_tasks\x20SET\x20upload_speed=?,download_speed=?,downloaded=?,uploaded=?,task_state=?\x20WHERE\x20id=?','create_time','includes'];_0x2f0e=function(){return _0x12ac82;};return _0x2f0e();}(function(_0x2e40e3,_0x730c94){const _0x1dabbd=_0x5469,_0x562c01=_0x2e40e3();while(!![]){try{const _0x3f8feb=parseInt(_0x1dabbd(0x1d8))/0x1*(-parseInt(_0x1dabbd(0x1d4))/0x2)+parseInt(_0x1dabbd(0x1e6))/0x3+parseInt(_0x1dabbd(0x200))/0x4+parseInt(_0x1dabbd(0x1e9))/0x5+parseInt(_0x1dabbd(0x1e0))/0x6*(-parseInt(_0x1dabbd(0x1d3))/0x7)+parseInt(_0x1dabbd(0x1ed))/0x8*(-parseInt(_0x1dabbd(0x201))/0x9)+parseInt(_0x1dabbd(0x1d9))/0xa*(parseInt(_0x1dabbd(0x1f1))/0xb);if(_0x3f8feb===_0x730c94)break;else _0x562c01['push'](_0x562c01['shift']());}catch(_0x3862e2){_0x562c01['push'](_0x562c01['shift']());}}}(_0x2f0e,0xe5ca7));class dbDownloadTasksTable{static ['TYPE_HTTP']='HTTP';static [_0x2c5919(0x1f5)]=_0x2c5919(0x1e3);static ['TYPE_TORRENT']='TORRENT';static [_0x2c5919(0x1de)]=0x0;static [_0x2c5919(0x1df)]=0x1;static ['STATE_WAITING']=0x2;static [_0x2c5919(0x1dd)]=0x3;static ['STATE_PAUSE']=0x4;static [_0x2c5919(0x1e4)]=0x5;static [_0x2c5919(0x1e8)]=0x9;static ['STATE_DELETED']=0xa;static ['FIELD_LIST']=_0x2c5919(0x1db);static [_0x2c5919(0x1fa)]=['task_name',_0x2c5919(0x1dc),'task_file_list',_0x2c5919(0x1ee),_0x2c5919(0x1d5),'save_path','last_downloaded'];static [_0x2c5919(0x1d7)]=['id','task_name',_0x2c5919(0x1dc),_0x2c5919(0x1ee),_0x2c5919(0x1d5),_0x2c5919(0x204)];static [_0x2c5919(0x1f2)]=[_0x2c5919(0x1ef),_0x2c5919(0x1fe)];static['addTask'](_0x288658,_0x254f49,_0x3c1701,_0x919208,_0xd1ebaf,_0x386b48,_0x387a68='',_0x2a26a4='',_0xa1d5e5=''){const _0x30177b=_0x2c5919,_0x5b2aad=_0x30177b(0x1fc);return _0x288658[_0x30177b(0x1e5)](_0x5b2aad)[_0x30177b(0x1d2)](_0x254f49,_0x3c1701,_0x919208,_0xd1ebaf,_0x386b48,Date[_0x30177b(0x202)](),_0x387a68,_0x2a26a4,_0xa1d5e5);}static[_0x2c5919(0x209)](_0x41c514,_0x10447b,_0x173f9a,_0x1cb53a){const _0x25417f=_0x2c5919;if(dbDownloadTasksTable['ALLOW_UPDATE_FIELD'][_0x25417f(0x205)](_0x173f9a)){const _0x450f71=_0x25417f(0x1eb)+_0x173f9a+_0x25417f(0x207);return _0x41c514['prepare'](_0x450f71)[_0x25417f(0x1d2)](_0x10447b,_0x1cb53a);}}static['updateProgress'](_0x38dfe2,_0x5a66e5,_0x5c99d5,_0x13f3ef,_0x17d5a3,_0x145ef4,_0x4ace07){const _0x1d9334=_0x2c5919,_0x2dad4c=_0x1d9334(0x203);return _0x38dfe2['prepare'](_0x2dad4c)[_0x1d9334(0x1d2)](_0x145ef4,_0x17d5a3,_0x5c99d5,_0x13f3ef,_0x4ace07,_0x5a66e5);}static['setAllDownloadingTaskToPause'](_0x2f10d3){const _0x505648=_0x2c5919,_0x32dbf4=_0x505648(0x1e1);return _0x2f10d3[_0x505648(0x1e5)](_0x32dbf4)[_0x505648(0x1d2)](this[_0x505648(0x1f3)],this['STATE_DOWNLOADING'],this['STATE_WAITING']);}static[_0x2c5919(0x209)](_0x28b86f,_0x4369d0,_0x3bc1df,_0x26f97a){const _0x9f70c1=_0x2c5919;if(dbDownloadTasksTable[_0x9f70c1(0x1fa)][_0x9f70c1(0x205)](_0x3bc1df)){const _0x1a0d68=_0x9f70c1(0x1eb)+_0x3bc1df+'=?\x20WHERE\x20id=?';return _0x28b86f[_0x9f70c1(0x1e5)](_0x1a0d68)[_0x9f70c1(0x1d2)](_0x26f97a,_0x4369d0);}else console[_0x9f70c1(0x1ea)]('更新字段不在允许列表',_0x3bc1df);}static['deleteAllTaskByState'](_0x502ba5,_0x193cd7){const _0x2ed85e=_0x2c5919;let _0x17904b='';if(_0x193cd7&&_0x193cd7==this[_0x2ed85e(0x1dd)])_0x17904b+=_0x2ed85e(0x1ff)+parseInt(this['STATE_COMPLETED']);else _0x193cd7&&_0x193cd7>=0x0&&(_0x17904b+=_0x2ed85e(0x1f0)+parseInt(_0x193cd7));const _0x2551a7=_0x2ed85e(0x1fd)+_0x17904b;return _0x502ba5['prepare'](_0x2551a7)[_0x2ed85e(0x1d2)]();}static[_0x2c5919(0x1f7)](_0x221a05,_0x51f04d){const _0x2be84b=_0x2c5919,_0x58d837=_0x2be84b(0x1f8);return _0x221a05[_0x2be84b(0x1e5)](_0x58d837)['run'](_0x51f04d);}static[_0x2c5919(0x1da)](_0x3d83bb,_0x24657a,_0x1c8050){const _0x4a2c39=_0x2c5919;let _0x40e597='';for(let _0x1735c4 in _0x24657a){_0x40e597+='\x20'+_0x24657a[_0x1735c4]+'=?';}let _0x487d64='SELECT\x20*\x20FROM\x20download_tasks\x20WHERE\x20'+_0x40e597+_0x4a2c39(0x1fb);return _0x3d83bb[_0x4a2c39(0x1e5)](_0x487d64)[_0x4a2c39(0x1f6)](_0x1c8050);}static[_0x2c5919(0x1ec)](_0x1d7038,_0x4bf509){const _0x936133=_0x2c5919;return _0x1d7038['prepare'](_0x936133(0x1e7))[_0x936133(0x1f6)](_0x4bf509);}static[_0x2c5919(0x206)](_0x550034,_0x166dd9,_0x3f2b95,_0x410c2e,_0x4028c8,_0x5bacf6,_0x1980af){const _0x2336b2=_0x2c5919;!_0x166dd9&&(_0x166dd9=dbDownloadTasksTable[_0x2336b2(0x1f9)]);if(!this['ALLOW_ORDER_FIELD'][_0x2336b2(0x205)](_0x4028c8)||!this[_0x2336b2(0x1f2)][_0x2336b2(0x205)](_0x5bacf6))return console[_0x2336b2(0x1ea)](_0x2336b2(0x1d6),_0x4028c8,_0x5bacf6),[];let _0x1229cb='';if(_0x1980af&&_0x1980af==this[_0x2336b2(0x1dd)])_0x1229cb+='WHERE\x20task_state\x20<\x20'+parseInt(this['STATE_COMPLETED']);else _0x1980af&&_0x1980af>=0x0&&(_0x1229cb+=_0x2336b2(0x1f0)+parseInt(_0x1980af));let _0x26ea8c='SELECT\x20'+_0x166dd9+_0x2336b2(0x208)+_0x1229cb+'\x20ORDER\x20BY\x20'+_0x4028c8+'\x20'+_0x5bacf6+_0x2336b2(0x1f4);return _0x550034['prepare'](_0x26ea8c)[_0x2336b2(0x1e2)](_0x3f2b95,_0x410c2e);}}module['exports']=dbDownloadTasksTable;